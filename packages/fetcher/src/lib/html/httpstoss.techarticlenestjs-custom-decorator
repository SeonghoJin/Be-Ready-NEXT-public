<!DOCTYPE html><html><head><link rel="stylesheet" href="https://static.toss.im/tds-pc/3.232.0/main.css"/><link rel="alternate" title="í† ìŠ¤ ê¸°ìˆ  ë¸”ë¡œê·¸, í† ìŠ¤í…Œí¬ ê¸€ ëª©ë¡" type="application/rss+xml" href="/rss.xml"/><link rel="alternate" title="í† ìŠ¤ ê¸°ìˆ  ë¸”ë¡œê·¸, í† ìŠ¤í…Œí¬ ê¸€ ëª©ë¡" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" type="text/css" href="//static.toss.im/tps/main.css"/><link rel="stylesheet" type="text/css" href="//static.toss.im/tps/others.css"/><link rel="stylesheet" href="https://static.toss.im/tossface-font/tossface.css"/><link rel="alternate" title="í† ìŠ¤ ê¸°ìˆ  ë¸”ë¡œê·¸, í† ìŠ¤í…Œí¬ ê¸€ ëª©ë¡" type="application/activitystream+json" href="/feed.json"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover"/><meta name="author" content="Viva Republica"/><link rel="preconnect" href="https://static.toss.im"/><link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png"/><link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png"/><link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"/><meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PQ5NV18TH1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-PQ5NV18TH1');</script><script>(function(h,o,t,j,a,r){
    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
    h._hjSettings={hjid:2399367,hjsv:6};
    a=o.getElementsByTagName('head')[0];
    r=o.createElement('script');r.async=1;
    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
    a.appendChild(r);
})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><title>NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°</title><meta name="twitter:creator" content="Viva Republica"/><meta name="twitter:site" content="@Toss_service"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:title" content="NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°"/><meta name="twitter:title" content="NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°"/><meta property="og:description" content="NestJSì—ì„œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” NestJSì˜ DIì™€ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™˜ê²½ ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ë©´ ì´ëŸ¬í•œ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
"/><meta name="twitter:description" content="NestJSì—ì„œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” NestJSì˜ DIì™€ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™˜ê²½ ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ë©´ ì´ëŸ¬í•œ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í•´ë³´ì•˜ìŠµë‹ˆë‹¤.
"/><meta property="og:image" content="https://og.toss.tech?title=NestJS%20%ED%99%98%EA%B2%BD%EC%97%90%20%EB%A7%9E%EB%8A%94%0D%0ACustom%20Decorator%20%EB%A7%8C%EB%93%A4%EA%B8%B0&amp;imageUrl=https%3A%2F%2Fstatic.toss.im%2Fassets%2Ftech-blog%2Fog-image%2Ftech-article-nest-js-02-og.png&amp;v=2"/><meta name="twitter:image" content="https://og.toss.tech?title=NestJS%20%ED%99%98%EA%B2%BD%EC%97%90%20%EB%A7%9E%EB%8A%94%0D%0ACustom%20Decorator%20%EB%A7%8C%EB%93%A4%EA%B8%B0&amp;imageUrl=https%3A%2F%2Fstatic.toss.im%2Fassets%2Ftech-blog%2Fog-image%2Ftech-article-nest-js-02-og.png&amp;v=2"/><meta name="next-head-count" content="36"/><meta name="next-font-preconnect"/><link rel="preload" href="https://static.toss.im/frontend/toss-tech/_next/static/css/6486c46747f65f89.css" as="style"/><link rel="stylesheet" href="https://static.toss.im/frontend/toss-tech/_next/static/css/6486c46747f65f89.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/webpack-a37367524f3d9e47.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/framework-5201cf011975c339.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/main-4ffd67ad72332dfe.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/pages/_app-02461bb4136bedab.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/821-c2f4db054c6f6b42.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/935-149f2da2961c2b08.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/pages/article/%5Bslug%5D-bf5a24035d1301de.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_buildManifest.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_ssgManifest.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global ubpbb5">html,body{padding:0;margin:0;font-family:'Toss Product Sans';}button{font-family:'Toss Product Sans';}p{margin:0;}</style><style data-emotion="css kcwxxw">.css-kcwxxw{position:-webkit-sticky;position:sticky;top:0;height:59px;}</style><nav class="p-navbar p-navbar--bottom-border css-kcwxxw"><div class="p-container p-container--default"><div class="p-container__inner p-navbar__inner-container"><div class="p-navbar__logo-container"><a class="p-navbar__logo-icon" href="/tech"><span class="icon p-icon" aria-hidden="true" role="presentation" style="height:auto;width:auto;min-width:24px"></span></a></div><div class="p-navbar__right-on-mobile"></div><div class="p-navbar__content" aria-expanded="false" aria-hidden="true"><ul class="p-navbar__menu"></ul><ul class="p-navbar__menu"><li class="p-navbar__item"><a>ë””ìì¸</a></li><li class="p-navbar__item"><a>ê°œë°œ</a></li><li class="p-navbar__item p-navbar__button-item"><button class="p-button p-button--primary p-button--inline p-button--fill p-button--small padding--s p-navbar__button" type="button" aria-disabled="false">ì±„ìš© ë°”ë¡œê°€ê¸°</button></li></ul></div></div></div></nav><style data-emotion="css 1nquki8">.css-1nquki8{max-width:700px;margin-bottom:80px;}.css-1nquki8 .has-extra-large-font-size{font-size:20px;}.css-1nquki8 .has-large-font-size{font-size:18px;}.css-1nquki8 .has-small-font-size{font-size:14px;}.css-1nquki8 .has-extra-small-font-size{font-size:12px;}@media (max-width: 700px){.css-1nquki8{margin-bottom:64px;}}</style><div class="p-container p-container--default css-1nquki8"><div class="p-container__inner"><style data-emotion="css gtmad4">.css-gtmad4>*:not(style)~*:not(style){margin-top:54px;}@media (max-width: 700px){.css-gtmad4>*:not(style)~*:not(style){margin-top:48px;}}</style><article class="css-gtmad4"><style data-emotion="css 1095auh">.css-1095auh>*:not(style)~*:not(style){margin-top:20px;}</style><header class="css-1095auh"><style data-emotion="css iffq4o">.css-iffq4o{width:100%;margin-top:36px;border-radius:12px;}</style><img srcSet="https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-300x150.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-768x384.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02.png 1200w" alt="NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°" class="css-iffq4o e132k2574"/><style data-emotion="css 117sh4z">.css-117sh4z{margin-top:36px;margin-bottom:0;font-size:48px;font-weight:700;line-height:1.25;color:#333d4b;word-break:keep-all;overflow-wrap:break-word;}@media (max-width: 700px){.css-117sh4z{margin-top:28px;font-size:32px;}}</style><h1 class="css-117sh4z e132k2573">NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°</h1><style data-emotion="css s5xdrg">.css-s5xdrg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><section class="css-s5xdrg e2c667z4"><style data-emotion="css 1hdebld">.css-1hdebld{grid-area:image;width:48px;height:48px;border-radius:156px;margin-right:14px;}</style><img src="https://toss.tech/wp-content/uploads/2022/11/IMG_1399-312x312.jpg" alt="" class="css-1hdebld e2c667z3"/><div><style data-emotion="css 14d9k6d">.css-14d9k6d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;grid-area:outline;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding-top:8px;font-size:17px;margin-bottom:2px;}@media (max-width: 700px){.css-14d9k6d>*+*{margin-top:4px;margin-left:0;}}</style><div class="css-14d9k6d e2c667z2"><style data-emotion="css 9krnkp">.css-9krnkp{grid-area:name;margin:0;font-size:17px;font-weight:600;color:#4e5968;white-space:nowrap;}</style><h3 class="css-9krnkp e2c667z1">ì†¡í˜„ì§€</h3><h3 class="css-9krnkp e2c667z1">ã†<!-- -->Node.js Developer</h3></div><style data-emotion="css 154r2lc">.css-154r2lc{font-size:14px;line-height:1.5;color:#8b95a1;}</style><div class="css-154r2lc e2c667z0">2022. 11. 22</div></div></section></header><style data-emotion="css 1k1kkv6">.css-1k1kkv6{font-size:18px;line-height:1.7;color:var(--grey700);font-size:18px;word-break:keep-all;overflow-wrap:break-word;counter-reset:p-post-ol 0;}.css-1k1kkv6 h2{margin:2.2em 0 0.6em 0;font-size:25px;font-weight:600;line-height:1.4;color:var(--grey900);}.css-1k1kkv6 h3{margin:2.2em 0 0.6em 0;font-size:22px;font-weight:600;line-height:1.6;color:var(--grey900);}.css-1k1kkv6 h4{margin:2.2em 0 0.3em 0;font-size:19px;font-weight:600;line-height:1.6;color:var(--grey700);}.css-1k1kkv6 p{margin:1em 0;}.css-1k1kkv6 p code,.css-1k1kkv6 li code{font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-size:0.9em;background-color:var(--greyOpacity100);border:1px solid var(--greyOpacity200);border-radius:3px;}.css-1k1kkv6 a{color:var(--blue700);}.css-1k1kkv6 pre{margin:2em -24px;}@media (max-width: 700px){.css-1k1kkv6 pre{margin:2em 0;}}.css-1k1kkv6 pre code{display:block;padding:16px 24px;overflow-x:auto;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-size:0.9em;line-height:1.5;word-wrap:normal;white-space:pre;background-color:var(--greyOpacity100);border:1px solid var(--greyOpacity200);border-radius:12px;}.css-1k1kkv6 figure{margin:2em 0;overflow:hidden;border-radius:12px;width:100%;}.css-1k1kkv6 figure.aligncenter{text-align:center;}.css-1k1kkv6 ol,.css-1k1kkv6 ul{margin:0 0 16px;list-style:none;}.css-1k1kkv6 ol li,.css-1k1kkv6 ul li{position:relative;margin-bottom:8px;}.css-1k1kkv6 ol li:before,.css-1k1kkv6 ul li:before{position:absolute;left:0;}.css-1k1kkv6 ol li ol,.css-1k1kkv6 ul li ol{padding-left:0;margin:8px 0 0 -16px;}.css-1k1kkv6 ol li ul,.css-1k1kkv6 ul li ul{padding-left:0;margin-top:8px;}.css-1k1kkv6 ol li p,.css-1k1kkv6 ul li p{margin:0;}.css-1k1kkv6 ol{padding-left:16px;counter-reset:p-post-ol;}.css-1k1kkv6 ol>li{padding-left:32px;counter-increment:p-post-ol;}.css-1k1kkv6 ol>li:before{font-weight:700;font-weight:var(--font-weight-bold);content:counter(p-post-ol) '.';}.css-1k1kkv6 ul{padding-left:16px;}.css-1k1kkv6 ul>li{padding-left:24px;}.css-1k1kkv6 ul>li:before{width:16px;text-align:center;content:'â€¢';}.css-1k1kkv6 figcaption{font-size:0.9em;color:var(--grey600);}.css-1k1kkv6 .wp-block-pullquote{margin:0;}.css-1k1kkv6 blockquote{padding:32px;background:var(--greyOpacity100);border-radius:12px;text-align:left;margin:16px 0 16px 0;}.css-1k1kkv6 blockquote p{color:#333d4b;font-weight:600;margin:0;}.css-1k1kkv6 blockquote cite{font-style:normal;}@media (max-width: 700px){.css-1k1kkv6 blockquote{padding:24px;}}.css-1k1kkv6 .wp-block-embed-youtube iframe{width:100%;border-radius:12px;}.css-1k1kkv6 ol{counter-reset:none;}.css-1k1kkv6 hr{border-top:1px solid #e5e8eb;border-right-style:none;border-left-style:none;border-bottom-style:none;margin:2.5rem 0;}.css-1k1kkv6 figure{display:table;text-align:center;}@media (max-width: 700px){.css-1k1kkv6 figure{width:100%;}}.css-1k1kkv6 figure img,.css-1k1kkv6 figure video{max-width:100%;height:auto;border:1px solid rgba(2,32,71,0.05);border-radius:12px;}.css-1k1kkv6 figure.alignright{float:right;margin:0 0 8px 24px;}@media (max-width: 700px){.css-1k1kkv6 figure.alignright{float:none;margin:0;}}.css-1k1kkv6 figcaption{display:table-caption;text-align:center;white-space:pre-wrap;caption-side:bottom;}.css-1k1kkv6 p:empty::before{content:'';}</style><div class="css-1k1kkv6 e132k2572"><div>
<h1>ë“¤ì–´ê°€ë©°</h1>



<p>ë°ì½”ë ˆì´í„°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ìƒê´€ ì—†ëŠ” ë¡œì§ë“¤ì„ ìˆ¨ê¸°ë©´ì„œ ê¸°ëŠ¥ì„ ë³€ê²½í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ë°˜ë³µë˜ëŠ” ê³µí†µ ê´€ì‹¬ì‚¬ê°€ ìˆì„ ë•Œ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ë³µëœ ì½”ë“œë¥¼ ì¤„ì´ê³  ì½”ë“œë¥¼ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•˜ëŠ” íš¨ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="847" src="https://wp.toss.tech/wp-content/uploads/2022/11/tech-blog-1-1024x847.png" alt="" class="wp-image-1001" srcSet="https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1024x847.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-300x248.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-768x635.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1536x1270.png 1536w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1568x1297.png 1568w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1.png 2000w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p>ì´ëŸ° ì´ìœ ë¡œ ì €í¬ Node.js Chapterì—ì„œë„ ë°ì½”ë ˆì´í„°ë¥¼ ì ê·¹ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ NestJSì—ì„œëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ë“¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤.<br/></p>



<ol><li>ë°ì½”ë ˆì´í„°ì—ì„œ Providerë¥¼ ì‚¬ìš©í•´ì•¼í•  ë•Œ ì–´ë–»ê²Œ Providerì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œ?</li><li>ë©”íƒ€ë°ì´í„°ë¥¼ ì“°ëŠ” NestJS ë°ì½”ë ˆì´í„°ë¥¼ ì¼ë°˜ ë°ì½”ë ˆì´í„°ì™€ ì‚¬ìš©í•´ë„ ê´œì°®ì„ê¹Œ?</li></ol>



<p><br/>NestJSì—ì„œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” NestJSì˜ DIì™€ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™˜ê²½ ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ ê¸€ì„ í†µí•´ NestJSì—ì„œëŠ” ì–´ë–»ê²Œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ”ì§€ ì‚´í´ë³´ê³ , ì•ì˜ ë‘ ì§ˆë¬¸ë“¤ì„ ê³ ë ¤í•˜ì—¬ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.<br/></p>



<p>ë“¤ì–´ê°€ê¸° ì „ì—, ë§Œì•½ ë°ì½”ë ˆì´í„°ë‚˜ ë©”íƒ€ë°ì´í„°ê°€ ìƒì†Œí•˜ì‹œë‹¤ë©´ ì•„ë˜ ë¬¸ì„œë“¤ì„ ì½ì–´ë³´ì‹œëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.</p>



<ul><li><a href="https://www.typescriptlang.org/ko/docs/handbook/decorators.html">Typescript Decorator</a></li><li><a href="https://www.npmjs.com/package/reflect-metadata">reflect-metadata</a></li></ul>



<p><br/></p>



<hr class="wp-block-separator"/>



<p><br/></p>



<h1>Chapter1. ë°ì½”ë ˆì´í„°ì—ì„œ Providerì— ì ‘ê·¼í•˜ê¸°<br/></h1>


<pre class="wp-block-code" aria-describedby="shcb-language-1" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><link rel="stylesheet" id="syntax-highlighting-code-block-css" href="https://toss.tech/wp-content/plugins/syntax-highlighting-code-block/vendor/scrivo/highlight-php/styles/default.css?ver=1.3.1" media="all"/><style>.wp-block-code {
	border: 0;
	padding: 0;
}

.wp-block-code > div {
	overflow: auto;
}

.shcb-language {
	border: 0;
	clip: rect(1px, 1px, 1px, 1px);
	-webkit-clip-path: inset(50%);
	clip-path: inset(50%);
	height: 1px;
	margin: -1px;
	overflow: hidden;
	padding: 0;
	position: absolute;
	width: 1px;
	word-wrap: normal;
	word-break: normal;
}

.hljs {
	box-sizing: border-box;
}

.hljs.shcb-code-table {
	display: table;
	width: 100%;
}

.hljs.shcb-code-table > .shcb-loc {
	color: inherit;
	display: table-row;
	width: 100%;
}

.hljs.shcb-code-table .shcb-loc > span {
	display: table-cell;
}

.wp-block-code code.hljs:not(.shcb-wrap-lines) {
	white-space: pre;
}

.wp-block-code code.hljs.shcb-wrap-lines {
	white-space: pre-wrap;
}

.hljs.shcb-line-numbers {
	border-spacing: 0;
	counter-reset: line;
}

.hljs.shcb-line-numbers > .shcb-loc {
	counter-increment: line;
}

.hljs.shcb-line-numbers .shcb-loc > span {
	padding-left: 0.75em;
}

.hljs.shcb-line-numbers .shcb-loc::before {
	border-right: 1px solid #ddd;
	content: counter(line);
	display: table-cell;
	padding: 0 0.75em;
	text-align: right;
	-webkit-user-select: none;
	-moz-user-select: none;
	-ms-user-select: none;
	user-select: none;
	white-space: nowrap;
	width: 1%;
}
</style><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestService</span> </span>{
  @Cacheable(<span class="hljs-string">&#x27;key&#x27;</span>)
  test() {
      <span class="hljs-comment">// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§</span>
  }
}</code></div><small class="shcb-language" id="shcb-language-1"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>TestServiceê°€ ìˆì„ ë•Œ, ìºì‹± ë¡œì§ì„ Cacheable ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬í•˜ë ¤ê³  í•©ë‹ˆë‹¤.<br/><br/>Cacheable ë°ì½”ë ˆì´í„°ì—ì„œ <code>CacheManager</code>ë¼ëŠ” Providerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ í• ê¹Œìš”?</p>



<p><br/></p>


<pre class="wp-block-code" aria-describedby="shcb-language-2" data-shcb-language-name="CSS" data-shcb-language-slug="css"><div><code class="hljs language-css"><span class="hljs-keyword">@Module</span>{
  <span class="hljs-selector-tag">imports</span>: <span class="hljs-selector-attr">[CacheModule.register(...)]</span>
  <span class="hljs-selector-tag">providers</span>: <span class="hljs-selector-attr">[TestService]</span>
}
<span class="hljs-selector-tag">class</span> <span class="hljs-selector-tag">TestModule</span> {}</code></div><small class="shcb-language" id="shcb-language-2"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">CSS</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">css</span><span class="shcb-language__paren">)</span></small></pre>


<p>CacheManager Providerë¥¼ exportí•˜ëŠ” CacheModuleì„ import í•´ë´…ì‹œë‹¤.</p>



<p><br/></p>


<pre class="wp-block-code" aria-describedby="shcb-language-3" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Cacheable</span>(<span class="hljs-params">key: string, ttl: number</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">target: any, _key: string, descriptor: PropertyDescriptor</span>) </span>{
    <span class="hljs-keyword">const</span> methodRef = descriptor.value;

    descriptor.value = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args: any[]</span>) </span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">this</span>) <span class="hljs-comment">// TestService {}</span>

    <span class="hljs-comment">// TypeError: Cannot read properties of undefined (reading &#x27;get&#x27;)</span>
    <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.cache.get(key); 
    <span class="hljs-keyword">if</span> (value) {
      <span class="hljs-keyword">return</span> value;
    }

    <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> methodRef.call(<span class="hljs-keyword">this</span>, ...args);
    <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.cache.set(key, result, ttl);
    <span class="hljs-built_in">console</span>.log(result)
    <span class="hljs-keyword">return</span> result;
    };
  };
}</code></div><small class="shcb-language" id="shcb-language-3"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="458" src="https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1024x458.png" alt="" class="wp-image-1074" srcSet="https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1024x458.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-300x134.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-768x344.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1536x687.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1568x702.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44.png 1926w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p></p>



<p>TestModuleì—ì„œ CacheModuleì„ importí•˜ê³  ìˆê¸´ í•˜ì§€ë§Œ TestServiceì—ì„œ CacheManager ë¥¼ ì£¼ì…í•˜ì§€ ì•ŠëŠ” ì´ìƒ Cacheableì—ì„œ CacheManagerì— ì ‘ê·¼í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. Cacheable ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í´ë˜ìŠ¤ì— í•­ìƒ CacheManagerë¥¼ ì£¼ì…í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤.</p>



<p>ê²Œë‹¤ê°€ CacheManagerë¥¼ ë„£ì–´ì¤€ë‹¤ê³  í•´ë„ ë©¤ë²„ ì´ë¦„ì„ <code>cache</code> ë¡œ ê°•ì œí•´ì•¼ í•©ë‹ˆë‹¤. ê°€ëŠ¥í•œ ë°©ë²•ì´ì§€ë§Œ íœ´ë¨¼ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹™ë‹ˆë‹¤.</p>



<p><br/><br/>ê·¸ë ‡ë‹¤ë©´ NestJS ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ëŠ” ì–´ë–»ê²Œ ë˜ì–´ìˆì„ê¹Œìš”?</p>



<p>NestJSê°€ ë°ì½”ë ˆì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ê³¼ì •ì€ â€˜<strong>ë§ˆí‚¹ â€“ ì¡°íšŒ â€“ ë“±ë¡</strong>â€™ë¡œ í¬ê²Œ ì„¸ ë‹¨ê³„ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. <code>Cron</code> ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.<br/></p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="310" src="https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1024x310.png" alt="" class="wp-image-1116" srcSet="https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1024x310.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-300x91.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-768x232.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1536x464.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-2048x619.png 2048w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1568x474.png 1568w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p></p>



<ol><li>ë§ˆí‚¹ â€“ SetMetadataë¼ëŠ” í•¨ìˆ˜ë¡œ íŠ¹ì • ë©”ì„œë“œì— <code>CRON</code> ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.</li><li>ì¡°íšŒ â€“ ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ì— DiscoveryServicedì™€ MetadataScannerë¡œ ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©° <code>CRON</code> ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ê°€ì§€ê³  ìˆëŠ” ë©”ì„œë“œë“¤ì„ ì°¾ìŠµë‹ˆë‹¤.</li><li>ë“±ë¡ â€“ ë©”ì„œë“œë¥¼ ì°¾ì•˜ìœ¼ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ í¬ë¡  ì¡ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.</li></ol>



<p><br/>NestJSì—ì„œ ì œê³µí•˜ëŠ” SetMetadataì™€ DiscoverService, ê·¸ë¦¬ê³  MetadataScannerë¥¼ ì‚¬ìš©í•˜ë©´, íŠ¹ì • í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œë§Œ í•„í„°ë§í•˜ì—¬ IoC ë‚´ ë‹¤ë¥¸ Providerë¥¼ ì‚¬ìš©í•´ ì›í•˜ëŠ” ë¡œì§ë“¤ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. <br/></p>



<h2>SetMetadata</h2>



<p>SetMetadataëŠ” <strong>íƒ€ê²Ÿ(í´ë˜ìŠ¤, ë©”ì„œë“œ)ì— ë©”íƒ€ë°ì´í„°ë¥¼ ë§ˆí‚¹í•˜ëŠ” ë°ì½”ë ˆì´í„°</strong>ë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. NestJSì˜ ì½”ë“œë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.<br/><br/><a rel="noreferrer noopener" href="https://github1s.com/nestjs/nest/blob/HEAD/packages/common/decorators/core/set-metadata.decorator.ts#L22-L37" target="_blank"><strong>setMetadata ì½”ë“œ</strong></a></p>


<pre class="wp-block-code" aria-describedby="shcb-language-4" data-shcb-language-name="PHP" data-shcb-language-slug="php"><div><code class="hljs language-php">export <span class="hljs-keyword">const</span> SetMetadata = &lt;K = string, V = any&gt;(
  metadataKey: K,
  metadataValue: V,
): CustomDecorator&lt;K&gt; =&gt; {
  <span class="hljs-keyword">const</span> decoratorFactory = (target: object, key?: any, descriptor?: any) =&gt; {
    <span class="hljs-comment">// method or classì— ë©”íƒ€ë°ì´í„° ë“±ë¡</span>
    Reflect.defineMetadata(metadataKey, metadataValue, <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">or</span> <span class="hljs-title">method</span>);
    <span class="hljs-title">return</span> <span class="hljs-title">target</span>;
  };
  <span class="hljs-title">decoratorFactory</span>.<span class="hljs-title">KEY</span> = <span class="hljs-title">metadataKey</span>;
  <span class="hljs-title">return</span> <span class="hljs-title">decoratorFactory</span>;
};</span></code></div><small class="shcb-language" id="shcb-language-4"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">PHP</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">php</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p><code><strong>Reflect.defineMetadata(metadataKey, metadataValue, class or method);</strong></code></p>



<p>SetMetadata í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” *<code>Reflect.defineMetadata</code> ë©”ì„œë“œë¥¼ í†µí•´ íƒ€ê²Ÿ ê°ì²´ì— metadataKeyë¥¼ í‚¤, metadataValueë¥¼ ê°’ìœ¼ë¡œ í•˜ëŠ” <a href="https://medium.com/jspoint/what-are-internal-slots-and-internal-methods-in-javascript-f2f0f6b38de">ë‚´ë¶€ ìŠ¬ë¡¯</a>ì„ ì •ì˜í•©ë‹ˆë‹¤. (<code>[[Metadata]]</code> )<br/><br/>*<code>Reflect</code> ëŠ” <a href="https://www.npmjs.com/package/reflect-metadata">reflect-metadata</a> ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ìˆëŠ” ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”íƒ€ë°ì´í„°ë¥¼ ì •ì˜í•˜ê±°ë‚˜ ì¡°íšŒí•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤.<br/><br/><br/></p>



<p><code><strong>SetMetadata(KEY, value) -&gt; CustomDecorator;</strong></code></p>



<p>SetMetadataì˜ ë¦¬í„´ê°’ì€ í´ë˜ìŠ¤, ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. í•´ë‹¹ ë°ì½”ë ˆì´í„°ë¡œ íƒ€ê²Ÿ í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/><br/></p>


<pre class="wp-block-code" aria-describedby="shcb-language-5" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">const</span> SOMETHING = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&#x27;SOMETHING&#x27;</span>)

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">CustomDecorator</span>(<span class="hljs-params">key: string | symbol</span>) </span>{
  <span class="hljs-comment">// SetMetadata(SOMETHING, key)ì™€ ë‹¤ë¥¸ ë°ì½”ë ˆì´í„°ë¥¼ í•©ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
  <span class="hljs-keyword">return</span> applyDecorators(SetMetadata(SOMETHING, key), AnotherDecorator)
}

@CustomDecorator(<span class="hljs-string">&#x27;KEY1&#x27;</span>)
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DecoratedClass</span> </span>{}</code></div><small class="shcb-language" id="shcb-language-5"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><code>DecoratedClass</code>ì— <code>SOMETHING</code> ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤, <code>&#x27;KEY1&#x27;</code>ì„ ë©”íƒ€ë°ì´í„° ê°’ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. </p>



<p><br/></p>



<h2>DiscoveryService</h2>



<p>NestJSëŠ” DiscoveryModule ì„ ì œê³µí•©ë‹ˆë‹¤. DiscoveryModuleì˜ DiscoveryServiceì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ modulesContainerë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ëª¨ë“ˆì˜ Controllerì™€ Provider í´ë˜ìŠ¤ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<p><strong><code>DiscoverService</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©°, SetMetadataë¡œ ë“±ë¡í–ˆë˜ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ íŠ¹ì • Providerë¥¼ í•„í„°ë§í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.</strong><br/></p>



<p><a rel="noreferrer noopener" href="https://github.com/nestjs/nest/blob/master/packages/core/discovery/discovery-service.ts" target="_blank"><strong></strong></a><strong><a rel="noreferrer noopener" href="https://github.com/nestjs/nest/blob/master/packages/core/discovery/discovery-service.ts" target="_blank">DiscoveryService ì½”ë“œ</a></strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-6" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DiscoveryService</span> </span>{
  <span class="hljs-keyword">constructor</span>(private readonly modulesContainer: ModulesContainer) {}

  getProviders(
    options: DiscoveryOptions = {},
    <span class="hljs-attr">modules</span>: Module[] = <span class="hljs-keyword">this</span>.getModules(options),
  ): InstanceWrapper[] {
    <span class="hljs-keyword">return</span> modules.flatMap(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> [...item.providers.values()]);
  }

  <span class="hljs-comment">// ...ìƒëµ</span>
}</code></div><small class="shcb-language" id="shcb-language-6"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p>CustomDecorator ê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ ì°¾ëŠ” ê³¼ì •ì„ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ë©”íƒ€ë°ì´í„° í‚¤ëŠ” <kbd><code>CUSTOM_DECORATOR</code></kbd>  ì‹¬ë³¼ì´ê³ , ë©”íƒ€ë°ì´í„° ê°’ì€ <kbd><code>test-value </code></kbd>ì…ë‹ˆë‹¤.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-7" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CUSTOM_DECORATOR = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&quot;CUSTOM_DECORATOR&quot;</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CustomDecorator = SetMetadata(CUSTOM_DECORATOR, <span class="hljs-string">&#x27;test-value&#x27;</span>);

@CustomDecorator
@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestService</span> </span>{
  test() {}
}</code></div><small class="shcb-language" id="shcb-language-7"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p><br/>ì•„ë˜ì˜ <code>explorerService.find(CUSTOM_DECORATOR)</code> ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?</p>


<pre class="wp-block-code" aria-describedby="shcb-language-8" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { Injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;
<span class="hljs-keyword">import</span> { DiscoveryService, MetadataScanner, Reflector } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/core&#x27;</span>;

@Injectable()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ExplorerService</span> </span>{
  <span class="hljs-keyword">constructor</span>(
    private readonly discoveryService: DiscoveryService,
  ) {}

  find(metadataKey: string | symbol) {
    <span class="hljs-keyword">const</span> providers = <span class="hljs-keyword">this</span>.discoveryService.getProviders();

    <span class="hljs-keyword">return</span> providers
      .filter(<span class="hljs-function">(<span class="hljs-params">wrapper</span>) =&gt;</span> wrapper.isDependencyTreeStatic()) 
      .filter(<span class="hljs-function">(<span class="hljs-params">{ metatype, instance }</span>) =&gt;</span> {
        <span class="hljs-keyword">if</span> (!instance || !metatype) {
          <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
        }
        <span class="hljs-keyword">return</span> <span class="hljs-built_in">Reflect</span>.getMetadata(metadataKey, metatype);
      })
      .map(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> instance);
  }
}</code></div><small class="shcb-language" id="shcb-language-8"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><strong>ì²«ë²ˆì§¸ í•„í„°: <code>filter((wrapper) =&gt; wrapper.isDependencyTreeStatic())</code></strong></p>



<p>request scopeê°€ ì•„ë‹Œ ì‹±ê¸€í†¤ í”„ë¡œë°”ì´ë”ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.<br/></p>



<p><strong>ë‘ë²ˆì§¸ í•„í„°: <code>Reflect.getMetadata(metadataKey, metatype)</code></strong></p>



<p>í•´ë‹¹ í•„í„°ëŠ” ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ í´ë˜ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="249" src="https://wp.toss.tech/wp-content/uploads/2022/11/tech-blog-3-1024x249.png" alt="" class="wp-image-1005" srcSet="https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1024x249.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-300x73.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-768x187.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1536x374.png 1536w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1568x382.png 1568w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3.png 2000w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p><code>metatype</code> ì€ <code>class TestService</code> ì™€ ê°™ì´ í•´ë‹¹ Providerì˜ í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. </p>



<p><code>Reflect.getMetadata(metadataKey, metatype)</code> ì€ metatype(í´ë˜ìŠ¤)ì— <code>metadataKey</code>ë¡œ ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ì˜ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. TestService í´ë˜ìŠ¤ì˜ ê²½ìš° ë©”íƒ€ë°ì´í„° í‚¤ëŠ” <code>CUSTOM_DECORATOR</code> ì´ê³  ê°’ì€ <code>test-value</code> ì…ë‹ˆë‹¤.</p>



<p>ë§Œì•½ ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ê°€ ì—†ìœ¼ë©´ undefinedë¥¼ ë°˜í™˜í•˜ê³  í•´ë‹¹ ProviderëŠ” í•„í„°ë§ë©ë‹ˆë‹¤.<br/><br/></p>



<h2>MetadataScanner</h2>



<p></p>



<p>ì•ì˜ DiscoverServiceì˜ ì˜ˆì‹œì—ì„œëŠ” ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œë¥¼ ê°€ì§„ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë° ê·¸ì³¤ìŠµë‹ˆë‹¤. ì‹¤ì œ ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” DiscoveryModuleì—ì„œ ì œê³µí•˜ëŠ” <code>MetadataScanner</code> ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.</p>



<p><a rel="noreferrer noopener" href="https://github1s.com/nestjs/nest/blob/HEAD/packages/core/metadata-scanner.ts#L9-L40" target="_blank"><strong>MetadataScanner ì½”ë“œ</strong></a></p>


<pre class="wp-block-code" aria-describedby="shcb-language-9" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MetadataScanner</span> </span>{
  public scanFromPrototype&lt;T extends Injectable, R = any&gt;(
    instance: T,
    <span class="hljs-attr">prototype</span>: object,
    <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">name: string</span>) =&gt;</span> R,
  ): R[] {
    <span class="hljs-keyword">const</span> methodNames = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>(<span class="hljs-keyword">this</span>.getAllFilteredMethodNames(prototype));
    <span class="hljs-keyword">return</span> iterate(methodNames)
      .map(callback)
      .filter(<span class="hljs-function"><span class="hljs-params">metadata</span> =&gt;</span> !isNil(metadata))
      .toArray();
  }

  *getAllFilteredMethodNames(prototype: object): IterableIterator&lt;string&gt; {
    <span class="hljs-comment">// prototypeì— ë“±ë¡ëœ method ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.  </span>
  }
}</code></div><small class="shcb-language" id="shcb-language-9"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><code>scanFromPrototype</code> ëŠ” <code>getAllFilteredMethodNames</code> ë©”ì„œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œ ì´ë¦„ë“¤ì„ ê°€ì ¸ì™€ ì¸ìë¡œ ë°›ì€ callbackì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” ë©”ì„œë“œë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.</p>



<p><strong><code>scanFromPrototype</code> ì˜ callback íŒŒë¼ë¯¸í„°ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ë©”ì„œë“œì— ì ‘ê·¼í•´ ë°ì½”ë ˆì´íŒ… í•¨ìˆ˜ë¡œ ë®ì–´ì”Œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>



<p><code>SetMetadata</code>, <code>DiscoveryService</code>, <code>MetadataScanner</code> ëª¨ë“  ì¬ë£Œë“¤ì´ ëª¨ì˜€ìœ¼ë‹ˆ Providerì— ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.<br/><br/></p>



<p><strong>Cacheable ë°ì½”ë ˆì´í„°</strong></p>



<p>ë©”ì„œë“œì— <code>CACHEABLE</code> ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ, ttlì„ ë©”íƒ€ë°ì´í„° ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-10" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CACHEABLE = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&#x27;CACHEABLE&#x27;</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Cacheable = <span class="hljs-function">(<span class="hljs-params">ttl: number</span>) =&gt;</span> SetMetadata(CACHEABLE, ttl);

@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TargetClass</span> </span>{
  @Cacheable(<span class="hljs-number">0</span>)
  test() {}
}</code></div><small class="shcb-language" id="shcb-language-10"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><br/><br/><strong>CacheDecoratorRegister í´ë˜ìŠ¤</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-11" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CacheDecoratorRegister</span> <span class="hljs-title">implements</span> <span class="hljs-title">OnModuleInit</span> </span>{
  <span class="hljs-keyword">constructor</span>(
    private readonly discoveryService: DiscoveryService,
    private readonly metadataScanner: MetadataScanner,
    private readonly reflector: Reflector,
    private readonly cache: Cache,
  ) {}

  onModuleInit() {
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.discoveryService
      .getProviders() <span class="hljs-comment">// #1. ëª¨ë“  provider ì¡°íšŒ</span>
      .filter(<span class="hljs-function">(<span class="hljs-params">wrapper</span>) =&gt;</span> wrapper.isDependencyTreeStatic())
      .filter(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> instance &amp;&amp; <span class="hljs-built_in">Object</span>.getPrototypeOf(instance))
      .forEach(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.metadataScanner.scanFromPrototype(
          instance,
          <span class="hljs-built_in">Object</span>.getPrototypeOf(instance),
          (methodName) =&gt; {
	    <span class="hljs-comment">// #2. ë©”íƒ€ë°ì´í„° value</span>
            <span class="hljs-keyword">const</span> ttl = <span class="hljs-keyword">this</span>.reflector.get(CACHEABLE, instance[methodName]); 
            <span class="hljs-keyword">if</span> (!ttl) {
              <span class="hljs-keyword">return</span>;
            }

            <span class="hljs-keyword">const</span> methodRef = instance[methodName];

            <span class="hljs-comment">// #3. ê¸°ì¡´ í•¨ìˆ˜ ë°ì½”ë ˆì´íŒ…</span>
            instance[methodName] = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">...args: any[]</span>) </span>{
              <span class="hljs-keyword">const</span> name = <span class="hljs-string">`<span class="hljs-subst">${instance.constructor.name}</span>.<span class="hljs-subst">${methodName}</span>`</span>;
              <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.cache.get(name, args);
              <span class="hljs-keyword">if</span> (value) {
                <span class="hljs-keyword">return</span> value;
              }

              <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> methodRef.call(instance, ...args);
              <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.cache.set(name, args, result, ttl);
              <span class="hljs-keyword">return</span> result;
            };
          },
        );
      });
  }
}</code></div><small class="shcb-language" id="shcb-language-11"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ëª¨ë“ˆì˜ providerì— ë“±ë¡í•˜ë©´, onModuleInit ë‹¨ê³„ì—ì„œ <code>@Cacheable</code>ë¡œ ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œë¥¼ ì°¾ì•„ ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.</p>



<p>ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>



<p>#1. ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©°</p>



<p>#2. íŠ¹ì • ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ ë©”ì„œë“œë¥¼ ì°¾ì•„</p>



<p>#3. ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.</p>



<p>#3ì˜ ê³¼ì •ì—ì„œ, <code>CacheDecoratorRegister</code> ìƒì„±ìì— ì£¼ì…í•œ CacheManagerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<p>ê·¸ëŸ°ë° ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì´ë ‡ê²Œ ë³µì¡í•œ ê³¼ì •ì„ ê±°ì³ì•¼í•˜ëŠ” ê±¸ê¹Œìš”? ì €í¬ ì±•í„°ì—ì„œëŠ” ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë§ˆë‹¤ ë°˜ë³µë˜ëŠ” ê³¼ì •ì„ <strong>AopModule</strong>ì´ë¼ëŠ” ëª¨ë“ˆë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.</p>



<p></p>



<p>í•´ë‹¹ ëª¨ë“ˆì€ 2022ë…„ 12ì›”ì— ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ npmì—ì„œ <a rel="noreferrer noopener" href="https://www.npmjs.com/package/@toss/nestjs-aop" data-type="URL" data-id="https://www.npmjs.com/package/@toss/nestjs-aop" target="_blank"><strong>@toss/nestjs-aop</strong></a> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ìš´ ë°›ì•„ ì‚¬ìš©í•´ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<p>ê´€ë ¨í•´ì„œ <a href="https://youtube.com/channel/UCxUcLf_VfUC0pwFujmLK6dw"></a><strong><a rel="noreferrer noopener" href="https://www.youtube.com/watch?v=VH1GTGIMHQw&amp;t=3000s" target="_blank">NestJS ë°‹ì—…ì—ì„œ ë°œí‘œí•œ ìë£Œ</a></strong><span style="font-size:inherit;font-weight:inherit;line-height:inherit;color:inherit">ë„ ìˆìœ¼ë‹ˆ í•¨ê»˜ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ë“¯ í•©ë‹ˆë‹¤. </span><span>ğŸ™‚</span></p>



<h2><br/>AopModule</h2>



<p>AopModuleì´ ë°ì½”ë ˆì´í„°ë“¤ì„ ë“±ë¡í•˜ëŠ” ê³¼ì •ì€ ì´ë ‡ìŠµë‹ˆë‹¤.</p>



<p></p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="489" src="https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1024x489.png" alt="" class="wp-image-1122" srcSet="https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1024x489.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-300x143.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-768x367.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1536x733.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1568x749.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31.png 1990w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p></p>



<p>ê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´</p>



<ol><li>Aspect ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì°¾ê³  (CacheableDecorator)</li><li>Cacheable ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ í•¨ìˆ˜ë¥¼ ì°¾ì•„ (FooService.foo)</li><li>1ë²ˆ í´ë˜ìŠ¤ì˜ wrap í•¨ìˆ˜ë¡œ 2ë²ˆì˜ í•¨ìˆ˜ë¥¼ ê°ìŒ‰ë‹ˆë‹¤. (CacheableDecorator.wrap)</li></ol>



<p>ì½”ë“œë¥¼ ë³´ë©° ì¢€ ë” ìì„¸íˆ ì„¤ëª…í•´ë³¼ê²Œìš”.<br/><br/></p>



<h3>1. Aspect ë°ì½”ë ˆì´í„° ì‚¬ìš©</h3>



<p><br/><strong>Aspect ë°ì½”ë ˆì´í„°</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-12" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">import</span> { applyDecorators, Injectable } <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@nestjs/common&#x27;</span>;

<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> ASPECT = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&#x27;ASPECT_CLASS&#x27;</span>);

<span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">Aspect</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">return</span> applyDecorators(SetMetadata(ASPECT, <span class="hljs-string">&#x27;ASPECT_CLASS&#x27;</span>), Injectable);
}</code></div><small class="shcb-language" id="shcb-language-12"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><br/></p>



<p><strong>ë°ì½”ë ˆì´í„° ì‚¬ìš©</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-13" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Aspect()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CacheLazyDecorator</span> </span>{}</code></div><small class="shcb-language" id="shcb-language-13"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>ë°ì½”ë ˆì´í„° ë¡œì§ì„ ì‹¤í–‰í•  í´ë˜ìŠ¤ì— <code>ASPECT</code> ë¼ëŠ” ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>



<p><br/></p>



<h3>2. ë°ì½”ë ˆì´í„° ìƒì„±</h3>


<pre class="wp-block-code" aria-describedby="shcb-language-14" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> CACHEABLE = <span class="hljs-built_in">Symbol</span>(<span class="hljs-string">&#x27;CACHEABLE&#x27;</span>);
<span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> Cacheable = <span class="hljs-function">(<span class="hljs-params">ttl: number</span>) =&gt;</span> SetMetadata(CACHEABLE, ttl);


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FooService</span> </span>{
	@Cacheable(<span class="hljs-number">1000</span>)
	foo() {}
}</code></div><small class="shcb-language" id="shcb-language-14"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>íŠ¹ì • ì‹¬ë³¼(ë˜ëŠ” ë¬¸ìì—´)ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ í•˜ì—¬ SetMetadataë¡œ ì›í•˜ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤.</p>



<p><br/></p>



<h3>3. LazyDecorator êµ¬í˜„</h3>



<p>AopModuleì— ë“±ë¡ë˜ëŠ” ëª¨ë“  ë°ì½”ë ˆì´í„°ë“¤ì€ LazyDecorator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ë°ì½”ë ˆì´íŒ… í•˜ëŠ” ì‹œì ì„ ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ìœ¼ë¡œ ë¯¸ë£¨ê¸° ë•Œë¬¸ì— LazyDecoratorë¼ê³  í•©ë‹ˆë‹¤.</p>



<p><br/></p>



<p><strong>LazyDecorator ì¸í„°í˜ì´ìŠ¤</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-15" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> interface LazyDecorator {
  wrap(reflector: Reflector, <span class="hljs-attr">instance</span>: any, <span class="hljs-attr">methodName</span>: string): Decorator | <span class="hljs-literal">undefined</span>;
}</code></div><small class="shcb-language" id="shcb-language-15"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><br/></p>



<p><strong>CacheLazyDecorator êµ¬í˜„</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-16" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Aspect()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CacheLazyDecorator</span> <span class="hljs-title">implements</span> <span class="hljs-title">LazyDecorator</span> </span>{
  <span class="hljs-keyword">constructor</span>(@Inject(CACHE_MANAGER) private readonly cache: CacheManager) {}

  wrap(reflector: Reflector, <span class="hljs-attr">instance</span>: any, <span class="hljs-attr">methodName</span>: string) {
    <span class="hljs-keyword">const</span> ttl = reflector.get(CACHEABLE, instance[methodName]);
    <span class="hljs-keyword">if</span> (!ttl) {
      <span class="hljs-keyword">return</span>;
    }

    <span class="hljs-keyword">const</span> methodRef = instance[methodName];
    <span class="hljs-keyword">const</span> name = <span class="hljs-string">`<span class="hljs-subst">${instance.constructor.name}</span>.<span class="hljs-subst">${methodName}</span>`</span>;
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">async</span> (...args: any[]) =&gt; {
      <span class="hljs-keyword">const</span> value = <span class="hljs-keyword">await</span> <span class="hljs-keyword">this</span>.cache.get(name);
      <span class="hljs-keyword">if</span> (value) {
        <span class="hljs-keyword">return</span> value;
      }

      <span class="hljs-keyword">const</span> result = <span class="hljs-keyword">await</span> methodRef.call(instance, ...args);
      <span class="hljs-keyword">this</span>.cache.set(name, result, ttl);
      <span class="hljs-keyword">return</span> result;
    };
  }
}</code></div><small class="shcb-language" id="shcb-language-16"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>ì ‘ê·¼í•˜ê³ ì í•˜ëŠ” ProviderëŠ” ì´ì œ ìƒì„±ìì— ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<p><br/></p>



<h3>4. AutoAspectExecutor</h3>



<p>onModuleInit ë‹¨ê³„ì—ì„œ AopModuleì˜ AutoAspectExecutor ê°€ ASPECTê°€ ë¶™ì€ ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ë“¤ì˜ wrap í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©° ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.</p>



<p><br/></p>



<p><strong>AutoAspectExecutor ì½”ë“œ</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-17" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-keyword">export</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AutoAspectExecutor</span> <span class="hljs-title">implements</span> <span class="hljs-title">OnModuleInit</span> </span>{
  <span class="hljs-keyword">constructor</span>(
    private readonly discoveryService: DiscoveryService,
    private readonly metadataScanner: MetadataScanner,
    private readonly reflector: Reflector,
  ) {}

  onModuleInit() {
    <span class="hljs-keyword">const</span> providers = <span class="hljs-keyword">this</span>.discoveryService.getProviders();
    <span class="hljs-keyword">const</span> lazyDecorators = <span class="hljs-keyword">this</span>.lookupLazyDecorators(providers);
    <span class="hljs-keyword">if</span> (lazyDecorators.length === <span class="hljs-number">0</span>) {
      <span class="hljs-keyword">return</span>;
    }

    providers
      .filter(<span class="hljs-function">(<span class="hljs-params">wrapper</span>) =&gt;</span> wrapper.isDependencyTreeStatic())
      .filter(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> instance &amp;&amp; <span class="hljs-built_in">Object</span>.getPrototypeOf(instance))
      .forEach(<span class="hljs-function">(<span class="hljs-params">{ instance }</span>) =&gt;</span> {
        <span class="hljs-keyword">this</span>.metadataScanner.scanFromPrototype(
          instance,
          <span class="hljs-built_in">Object</span>.getPrototypeOf(instance),
          (methodName) =&gt;
            lazyDecorators.forEach(<span class="hljs-function">(<span class="hljs-params">lazyDecorator</span>) =&gt;</span> {
              <span class="hljs-keyword">const</span> wrappedMethod = lazyDecorator.wrap(<span class="hljs-keyword">this</span>.reflector, instance, methodName);
              <span class="hljs-keyword">if</span> (wrappedMethod) {
                instance[methodName] = wrappedMethod;
              }
            }),
        );
      });
  }

  private lookupLazyDecorators(providers: any[]): LazyDecorator[] {
    <span class="hljs-comment">// this.reflector.get(ASPECT, metatype) ê²°ê³¼ê°’ì´ ì¡´ì¬í•˜ëŠ” providersë§Œ í•„í„°ë§</span>
  }
}</code></div><small class="shcb-language" id="shcb-language-17"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p>Providerì— ì ‘ê·¼ ê°€ëŠ¥í•œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ë‹¤ì‹œ ìš”ì•½í•˜ë©´ ì´ë ‡ìŠµë‹ˆë‹¤.</p>



<ol><li><code>SetMetadata</code>ë¡œ í•„í„°ë§í•  í´ë˜ìŠ¤ì— ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ê³ </li><li><code>DiscoveryService</code>ë¡œ ëª¨ë“  Providerë¥¼ ì¡°íšŒí•˜ë©°</li><li>ë“±ë¡ëœ Metadataë¡œ íŠ¹ì • í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œë¥¼ í•„í„°ë§í•˜ì—¬ ì›í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ ë©ë‹ˆë‹¤.</li></ol>



<p><br/></p>



<hr class="wp-block-separator"/>



<p><br/></p>



<h1>Chapter2. ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°ì½”ë ˆì´í„°</h1>



<p>Providerì— ì ‘ê·¼ì´ í•„ìš”ì—†ëŠ” ê²½ìš° ì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ êµ¬í˜„í•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” NestJS ë°ì½”ë ˆì´í„°ë¥¼ ì¼ë°˜ ë°ì½”ë ˆì´í„°ì™€ í•¨ê»˜ ì‚¬ìš©í•´ë„ ê´œì°®ì„ê¹Œìš”?</p>



<p>ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ ë‘˜ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>



<p><br/></p>



<h3>ì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ëŠ” ì´ìœ </h3>



<p><strong>ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ë‹¤ë¥¸ ë°ì½”ë ˆì´í„°ì™€ í•¨ê»˜ ì“°ì´ëŠ” ê²½ìš°, ê¸°ì¡´ ë©”ì„œë“œê°€ ë®ì–´ì”Œì›Œì§€ë©´ì„œ í”„ë¡œí† íƒ€ì…ì— ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-18" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OnError</span>(<span class="hljs-params">handler: (e: Error</span>) =&gt; <span class="hljs-title">void</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: object, key?: any, descriptor?: any</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> originMethod = descriptor.value;
    descriptor.value = <span class="hljs-function">(<span class="hljs-params">...args: any[]</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> originMethod.call(<span class="hljs-keyword">this</span>, ...args);
      } <span class="hljs-keyword">catch</span> (error) {
        handler(error);
      }
    };
  };
}</code></div><small class="shcb-language" id="shcb-language-18"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>OnError ë°ì½”ë ˆì´í„°ëŠ” ê¸°ì¡´ ë©”ì„œë“œë¥¼ ìƒˆë¡œìš´ ë©”ì„œë“œë¡œ ë®ì–´ì”Œì›ë‹ˆë‹¤.</p>



<p>ì•„ë˜ ì½”ë“œì—ì„œëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” RegisterMetadata ë°ì½”ë ˆì´í„°ì™€ OnError ë°ì½”ë ˆì´í„°ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë°ì½”ë ˆì´í„° ì„ ì–¸ ìˆœì„œì— ë”°ë¼ ê¸°ì¡´ì— ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ëŠ” ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br/></p>



<p>ì•„ë˜ ë©”ì„œë“œ ì¤‘ì— <code>Reflect.getMetadata</code>ë¥¼ í–ˆì„ ë•Œ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§€ëŠ” ë©”ì„œë“œëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>


<pre class="wp-block-code" aria-describedby="shcb-language-19" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestService</span> </span>{
  @OnError(<span class="hljs-built_in">console</span>.log)
  @RegisterMetadata(<span class="hljs-string">&#x27;value&#x27;</span>)
  test() {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>);
  }

  @RegisterMetadata(<span class="hljs-string">&#x27;value2&#x27;</span>)
  @OnError(<span class="hljs-built_in">console</span>.log)
  test2() {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>);
  }
}</code></div><small class="shcb-language" id="shcb-language-19"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p></p>



<p>ì •ë‹µì€ test ë©”ì„œë“œì…ë‹ˆë‹¤. ì‹¤í–‰ ê²°ê³¼ëŠ” <a rel="noreferrer noopener" href="https://www.typescriptlang.org/play?noImplicitAny=false&amp;noImplicitThis=false&amp;ssl=54&amp;ssc=89&amp;pln=51&amp;pc=1#code/PTAEEsFsAcHsCcAuoDk8CmAzANugxogLSTqICGAJmeSgFC16wB2AzsgMqkCypl1ZoALygAPAGkhoNvHBMA5gBpQANUlkmATwB8AClqhQJclXJj0GgFygxC-Yd4myystgCu6K8tsBKIVtAA3naMrLC4AHTYsHI6KJyIPMb8oICTy4AANSjewcxsoBT4CNQIAGJkBAgakjrk8HKkVrAARgBW+IhKANbmAPxW6hpK+Sx4MtCICL2g-b6C-kEGBuCYoDpDI+BjCL7zCwYhLGHokdGxgCpdgAMLgA7NgC7jgAyLoICPLYC6HShKRnzkzm7oWbsGAEpYXAEcL5TCydCJD5kHTvRxmAb2JKfFzuQboYajcbwcIAN1RPwA3HZdhhEK54Ew8hj1pt4MTdgBfOyMhnUxjwIrwUrleAacJiACiAE1JHD+Ai2WSKVT8hyuTzsRpiaz6JhXEwCOBmKAAPJMQXweAIHQAC3UFFw8CsOg8oENxvgM38uNg4Ao22yoQiURiACJ9Q6EKk0n7vFLSDKVjU6ogGi02p0en1NOjMRtsZNpn5AiTQPtDsd-YGjcHACdDgEjVqyAC1XABhDoEAds2AFtHAA8jgAY6sNsvY5ZAIcByWSJU2wCiSNZYhB4gld6npulT75VcLLsi1FgpjQAbQAus7c39QIg+fuD6BpZTQH2B0whyPwngXNhqqbwCwlMvwqu5Cxw3mDIz82oPBTRWdBS2tKZNE9U9QHNJhLTA21wN-A9mSZNlVWZBge1Af5BQAcQASXYAAVQV-gAfS4QUSIAQQAEVoujJHYDRIEaMJYjwojSPIqiaIYpjaMybDWGQQEBzYMCoUcKp8W+KxpFkOQ93iGT+B0bjiLIyjqLoxi6KUeT3CyBhsDIFgWFAEiMUQTh4FxcA8HQE8AAES0dHQCx9aJflAVyJNfRBpIcDSUGM9ARIMYK2B0aCFkQU1jQAd1AJh0FSoN4FiMDHUyDD6AMAL0Ek4L4HU8hYgigAmKL-I8k1vKOX0-JixBqrik9oqS2BUvSzLwJy8D8pZWgsP2ZA2vsxznMkfrrNs6anPQOL6CaotYjapFoVeXCgTacJYwqmEtN43SBIM2ilCmsCZqONrvCydbfU22zqu2xxdsBHADqO0LKtOnT+P0oTrsW27lvCNrqseoA" target="_blank"><strong>íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ</strong>ì—ì„œ</a> ì§ì ‘ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-20" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">const</span> testService = <span class="hljs-keyword">new</span> TestService()

<span class="hljs-comment">// undefined</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;test metadata&#x27;</span>, <span class="hljs-built_in">Reflect</span>.getMetadata(REGISTER_METADATA, testService.test))
<span class="hljs-comment">// value2</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;test2 metadata&#x27;</span>, <span class="hljs-built_in">Reflect</span>.getMetadata(REGISTER_METADATA, testService.test2))</code></div><small class="shcb-language" id="shcb-language-20"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p></p>



<p>ì™œ ì´ë ‡ê²Œ ë˜ëŠ” ê±¸ê¹Œìš”? ë°ì½”ë ˆì´í„°ì˜ ì‹¤í–‰ ìˆœì„œê°€ íŒíŠ¸ì…ë‹ˆë‹¤.</p>



<p><em>gâˆ˜f(x) = g(f(x))</em> ì™€ ê°™ì€ í•©ì„± í•¨ìˆ˜ê°€ ìˆì„ ë•Œ ì„ ì–¸ì€ <em>g</em>ê°€ <em>f</em>ë³´ë‹¤ ë¨¼ì € ë˜ì—ˆì§€ë§Œ ì‹¤í–‰ì€ <em>f</em> í•¨ìˆ˜ê°€ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ <strong>ë°ì½”ë ˆì´í„°ëŠ” í‰ê°€ë  ë•ŒëŠ” ì„ ì–¸ëœ ìˆœì„œëŒ€ë¡œ ìœ„ì—ì„œ ì•„ë˜ë¡œ, ì‹¤í–‰ë  ë•ŒëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤</strong>.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="828" src="https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1024x828.png" alt="" class="wp-image-1124" srcSet="https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1024x828.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-300x243.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-768x621.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1536x1243.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1568x1268.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51.png 1916w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p>RegisterMetadataì—ì„œ <code>Reflector.defineMetadata</code>ê°€ ë¨¼ì € ì‹¤í–‰ë˜ê³  ê·¸ ë‹¤ìŒ OnError ë°ì½”ë ˆì´í„°ê°€ ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤. </p>



<p>ë®ì–´ì”Œì›Œì§€ë©´ì„œ ê¸°ì¡´ì— ë©”íƒ€ë°ì´í„°ê°€ ì €ì¥ëœ í”„ë¡œí† íƒ€ì…ê³¼ ëŠê¸°ê²Œ ë˜ê³  <code>test</code> ë©”ì„œë“œì—ì„œ ë©”íƒ€ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.</p>



<p><br/></p>



<p>ì´ëŸ° ì‚¬ë¡€ë„ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-21" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TossScheduler</span> </span>{

  @OnError(<span class="hljs-built_in">console</span>.log)
  @Cron(<span class="hljs-string">&#x27;*/10 * * * *&#x27;</span>)
  task() {
    <span class="hljs-comment">// do something</span>
  }
}</code></div><small class="shcb-language" id="shcb-language-21"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><code>@nestjs/schedule</code> ì˜ Cron ë°ì½”ë ˆì´í„° ì—­ì‹œ CRON ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ì— í•´ë‹¹ ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ ë©”ì„œë“œë“¤ì„ ì¡°íšŒí•˜ì—¬ cron jobì„ ë“±ë¡í•©ë‹ˆë‹¤.</p>



<p>í•˜ì§€ë§Œ OnError ë°ì½”ë ˆì´í„°ê°€ Cron ë°ì½”ë ˆì´í„° ì´í›„ì— ì‹¤í–‰ë¨ìœ¼ë¡œì¨ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§€ê²Œ ë˜ê³ , NestJSì—ì„œëŠ” task ë©”ì„œë“œë¥¼ ì°¾ì§€ ëª»í•´ cron jobì„ ë“±ë¡í•˜ì§€ ëª»í•˜ê²Œ ë©ë‹ˆë‹¤.</p>



<p>ì´ë ‡ë“¯ ì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ NestJS í™˜ê²½ì—ì„œ ê·¸ëƒ¥ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê°œë°œìì˜ ì‹¤ìˆ˜ì— ì˜í•´ ì½”ë“œì˜ ë™ì‘ì´ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì½”ë ˆì´í„° ì‹¤í–‰ ìˆœì„œë‚˜ ë©”íƒ€ë°ì´í„° í™˜ê²½ì— ëŒ€í•´ ì•Œê³  ìˆì§€ ëª»í•˜ë‹¤ë©´ ì´ëŸ° ë¥˜ì˜ ë²„ê·¸ë¥¼ ì°¾ëŠ” ë°ëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.</p>



<p>ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ê³ ë ¤í•˜ì—¬ ë°ì½”ë ˆì´í„°ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.</p>



<p><br/></p>



<h2>ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°ì½”ë ˆì´í„°</h2>



<p>ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê°€ì¥ naiveí•œ ë°©ë²•ì€, ì˜¤ë²„ë¼ì´ë”© ë˜ê¸° ì „ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘” ë’¤ ì˜¤ë²„ë¼ì´ë”©ì´ ëë‚˜ë©´ ë©”íƒ€ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë“±ë¡í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.</p>



<p><br/></p>



<p><strong>OnErrorPreserveMeta ì½”ë“œ</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-22" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OnErrorPreserveMeta</span>(<span class="hljs-params">handler: (e: Error</span>) =&gt; <span class="hljs-title">void</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: object, key?: any, descriptor?: any</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> originMethod = descriptor.value;

    <span class="hljs-comment">//  ì˜¤ë²„ë¼ì´ë”© ë˜ê¸° ì „ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•´ë†¨ë‹¤ê°€</span>
    <span class="hljs-keyword">const</span> metaKeys = <span class="hljs-built_in">Reflect</span>.getOwnMetadataKeys(descriptor.value);
    <span class="hljs-keyword">const</span> metas = metaKeys.map(<span class="hljs-function">(<span class="hljs-params">k</span>) =&gt;</span> [
      k,
      <span class="hljs-built_in">Reflect</span>.getMetadata(k, descriptor.value),
    ]);

    descriptor.value = <span class="hljs-function">(<span class="hljs-params">...args: any[]</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> originMethod.call(<span class="hljs-keyword">this</span>, ...args);
      } <span class="hljs-keyword">catch</span> (error) {
        handler(error);
      }
    };

    <span class="hljs-comment">// ì˜¤ë²„ë¼ì´ë”© ëœ ë©”ì„œë“œì— ëŒ€í•´ ë©”íƒ€ë°ì´í„° ì¬ë“±ë¡</span>
    metas.forEach(<span class="hljs-function">(<span class="hljs-params">[k, v]</span>) =&gt;</span> <span class="hljs-built_in">Reflect</span>.defineMetadata(k, v, descriptor.value));
  };
}</code></div><small class="shcb-language" id="shcb-language-22"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p>ì§ê´€ì ì´ì§€ë§Œ ë§¤ë²ˆ Decoratorë¥¼ ë§Œë“¤ì–´ì¤„ ë•Œë§ˆë‹¤ ì´ëŸ° ê³¼ì •ì„ ê±°ì³ì•¼ í•˜ëŠ” ê²Œ ë¶ˆí¸í•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ëŠ” ì¢€ ë” ê°„ë‹¨í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.</p>



<p><br/></p>



<h2>í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•´ ë©”íƒ€ë°ì´í„° ìœ ì§€í•˜ê¸°</h2>



<p>SetMetadata íŒŒíŠ¸ì—ì„œ Reflect.defineMetadata ëŠ” íƒ€ê²Ÿ ê°ì²´ì— [[Metadata]] ë¼ëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ì„ ì •ì˜í•œë‹¤ê³  ë§ì”€ë“œë ¸ìŠµë‹ˆë‹¤. </p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="405" src="https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-1024x405.png" alt="" class="wp-image-1126" srcSet="https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-1024x405.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-300x119.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-768x304.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56.png 1466w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p>ë‚´ë¶€ ìŠ¬ë¡¯ ë˜í•œ í”„ë¡œí† íƒ€ì…ì˜ ë‚´ë¶€ í”„ë¡œí¼í‹°ì´ë‹ˆ, ê¸°ì¡´ í”„ë¡œí† íƒ€ì…ì— ë©”íƒ€ë°ì´í„° ë‚´ë¶€ ìŠ¬ë¡¯ì´ ì €ì¥ë˜ì–´ìˆì„ ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ <strong>ìƒˆë¡­ê²Œ ì •ì˜í•œ ë©”ì„œë“œì— ê¸°ì¡´ í”„ë¡œí† íƒ€ì…ì„ ì—°ê²°í•´ì£¼ë©´ ë©ë‹ˆë‹¤.</strong></p>



<p><br/></p>



<p><strong>ë³€ê²½ëœ OnErrorPreserveMeta ì½”ë“œ</strong></p>


<pre class="wp-block-code" aria-describedby="shcb-language-23" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript"><span class="hljs-keyword">export</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">OnErrorPreserveMeta</span>(<span class="hljs-params">handler: (e: Error</span>) =&gt; <span class="hljs-title">void</span>) </span>{
  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">target: object, key?: any, descriptor?: any</span>) =&gt;</span> {
    <span class="hljs-keyword">const</span> originMethod = descriptor.value;

    <span class="hljs-keyword">const</span> wrapper = <span class="hljs-function">(<span class="hljs-params">...args: any[]</span>) =&gt;</span> {
      <span class="hljs-keyword">try</span> {
        <span class="hljs-keyword">return</span> originMethod.call(<span class="hljs-keyword">this</span>, ...args);
      } <span class="hljs-keyword">catch</span> (error) {
        handler(error);
      }
    };

    <span class="hljs-built_in">Object</span>.setPrototypeOf(wrapper, originMethod); <span class="hljs-comment">// ì´ ì¤„ë§Œ ì¶”ê°€</span>
    descriptor.value = wrapper;
  };
}</code></div><small class="shcb-language" id="shcb-language-23"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><code>Object.setPrototypeOf(arg1, arg2)</code> ì€ arg1 ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì„ arg2ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.</p>



<p>ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œìš´ í›„ <code>Object.setPrototypeOf(wrapper, originMethod)</code>ë¡œ originMethodë¥¼ wrapperì˜ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ì„¤ì •í•´ì£¼ë©´ ë©”íƒ€ë°ì´í„°ê°€ ìœ ì§€ë©ë‹ˆë‹¤.</p>


<pre class="wp-block-code" aria-describedby="shcb-language-24" data-shcb-language-name="JavaScript" data-shcb-language-slug="javascript"><div><code class="hljs language-javascript">@Injectable()
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">TestService</span> </span>{
  @OnError(<span class="hljs-built_in">console</span>.log)
  @RegisterMetadata(<span class="hljs-string">&#x27;value&#x27;</span>)
  test() {
    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-built_in">Error</span>(<span class="hljs-string">&#x27;error&#x27;</span>);
  }
}

<span class="hljs-keyword">const</span> testService = <span class="hljs-keyword">new</span> TestService()

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;test metadata&#x27;</span>, <span class="hljs-built_in">Reflect</span>.getMetadata(REGISTER_METADATA, testService.test)) <span class="hljs-comment">// &#x27;value&#x27;</span></code></div><small class="shcb-language" id="shcb-language-24"><span class="shcb-language__label">Code language:</span> <span class="shcb-language__name">JavaScript</span> <span class="shcb-language__paren">(</span><span class="shcb-language__slug">javascript</span><span class="shcb-language__paren">)</span></small></pre>


<p><br/></p>



<hr class="wp-block-separator"/>



<p><br/></p>



<h1>ë§ˆì¹˜ë©°</h1>



<p>ë©”íƒ€ë°ì´í„°ì™€ NestJSì˜ <code>DiscoveryModule</code> ì„ ì‚¬ìš©í•˜ì—¬ NestJSì˜ IoC ì»¨í…Œì´ë„ˆì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„°, ê·¸ë¦¬ê³  ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>



<p>ë©”íƒ€ë°ì´í„° íƒœê¹…, DiscoveryModule, í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•´ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì„ í†µí•´ ë”ìš± ë” NestJSì˜ Aop íŒ¨í„´ì— ë§ëŠ” í”„ë¡œê·¸ë˜ë°ì„ í•˜ê²Œ ë˜ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.</p>



<p>ë˜í•œ í† ìŠ¤ Node.js ì±•í„°ëŠ” í† ìŠ¤ì˜ ë‹¤ì–‘í•œ ì œí’ˆê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œì„ ìœ„í•´ íŒ€ì›ë“¤ì˜ ì§€ì†ì ì¸ ì„±ì¥ì´ ì¤‘ìš”í•˜ë‹¤ê³  ë¯¿ìœ¼ë©°, ì´ë¥¼ ìœ„í•´ ì½”ë“œ ë¦¬ë·°, ìŠ¤í„°ë””ì™€ ì—”ì§€ë‹ˆì–´ë§ ì„¸ë¯¸ë‚˜ ë“±ì„ í†µí•´ ê¾¸ì¤€íˆ ê³µë¶€í•˜ê³  ê³µìœ í•˜ëŠ” ìë¦¬ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ ë§ì€ ê´€ì‹¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>



<p><br/></p>



<hr class="wp-block-separator"/>



<p><br/></p>



<h2>References</h2>



<ul><li><a href="https://zuminternet.github.io/nestjs-custom-decorator/">https://zuminternet.github.io/nestjs-custom-decorator/</a></li><li><a href="https://github.com/nestjs/nest">https://github.com/nestjs/nest</a></li><li><a href="https://github.com/nestjs/swagger/issues/217">https://github.com/nestjs/swagger/issues/217</a></li><li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf</a></li></ul>



<p></p>
</div></div><style data-emotion="css auig7l">.css-auig7l{margin-top:96px;}</style><style data-emotion="css x7fajo">.css-x7fajo{margin-top:96px;}.css-x7fajo>*:not(style)~*:not(style){margin-left:24px;}</style><style data-emotion="css 6rfvv8">.css-6rfvv8{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;margin-top:96px;}.css-6rfvv8>*:not(style)~*:not(style){margin-left:24px;}</style><div class="css-6rfvv8"><style data-emotion="css 1n0u3h">.css-1n0u3h{background-color:#f9fafb;width:100%;height:auto;border-radius:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:48px;}@media (max-width: 700px){.css-1n0u3h{padding:32px;}}</style><div class="css-1n0u3h e1t1xt3a7"><style data-emotion="css 6cc9f0">.css-6cc9f0{font-size:24px;font-weight:700;margin-bottom:16px;color:#4e5968;}</style><h2 class="css-6cc9f0 e1t1xt3a6">í† ìŠ¤ Node.js Chapter ì±„ìš© ê³µê³ </h2><style data-emotion="css 1wmgpcn">.css-1wmgpcn{font-size:16px;line-height:1.5;font-weight:600;color:#6b7684;margin-bottom:4px;}</style><p class="css-1wmgpcn e1t1xt3a5">ì¢‹ì•˜ëŠ”ì§€, ì•„ì‰¬ì› ëŠ”ì§€, ì•„ë˜ ì´ëª¨ì§€ë¥¼ ëˆŒëŸ¬ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”.</p><style data-emotion="css 4qu8li">.css-4qu8li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:16px;}</style><div class="css-4qu8li e1t1xt3a3"><style data-emotion="css 1fmr5ax">.css-1fmr5ax{display:block;font-family:'tossface';font-size:40px;cursor:pointer;margin:0 12px;-webkit-transition:0.15s ease-in-out all;transition:0.15s ease-in-out all;}.css-1fmr5ax a{-webkit-text-decoration:none;text-decoration:none;}.css-1fmr5ax:hover{-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}</style><div class="css-1fmr5ax e1t1xt3a1">ğŸ˜</div><div class="css-1fmr5ax e1t1xt3a1">ğŸ¤”</div></div><style data-emotion="css 1p3zmjw">.css-1p3zmjw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:16px;}.css-1p3zmjw button,.css-1p3zmjw a{margin:0 12px;}@media (max-width: 700px){.css-1p3zmjw{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}.css-1p3zmjw button,.css-1p3zmjw a{width:100%;margin:8px 0;}}</style><div class="css-1p3zmjw e1t1xt3a0"><style data-emotion="css 1u8jkqx">.css-1u8jkqx{display:grid;grid-template-columns:min-content auto;grid-column-gap:8px;}</style><button class="p-button p-button--primary p-button--inline p-button--weak p-button--default p-button--has-icon padding--base css-1u8jkqx" type="button" aria-disabled="false"><span class="icon p-icon icon--colored p-icon--colored" aria-hidden="true" role="presentation" style="height:16px;width:16px;min-width:16px;color:#3182f6"></span>ì•„í‹°í´ ê³µìœ í•˜ê¸°</button><a class="p-button p-button--primary p-button--inline p-button--fill p-button--default padding--base" aria-disabled="false" href="https://toss.im/career/jobs?search=node.js">ì±„ìš© ê³µê³  ë³´ê¸°</a></div></div></div></article><style data-emotion="css 1lsuzal">.css-1lsuzal{margin-top:100px;}.css-1lsuzal::before{content:'';position:absolute;width:100%;height:1px;left:0;border-bottom:1px solid #e5e8eb;}</style><div class="css-1lsuzal e132k2571"><style data-emotion="css 1ympfnp">.css-1ympfnp{display:inline-block;width:100%;font-size:20px;margin:34px 0 40px 0;}</style><span class="typography typography--h3 typography--bold color--grey800 css-1ympfnp e132k2570">ì´ì–´ì§€ëŠ” ê¸€</span><style data-emotion="css vivlm7">.css-vivlm7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;margin-bottom:40px;}.css-vivlm7:last-of-type{margin-bottom:0px;}.css-vivlm7:hover .egyklng4{color:#3182f6;}</style><div class="css-vivlm7 egyklng3"><style data-emotion="css bc0lqn">.css-bc0lqn{width:80px;height:80px;margin-right:20px;border-radius:12px;object-fit:cover;}@media (max-width: 700px){.css-bc0lqn{width:64px;height:64px;}}</style><img srcSet="https://toss.tech/wp-content/uploads/2023/04/00009-889461687-300x300.png 300w, https://toss.tech/wp-content/uploads/2023/04/00009-889461687-150x150.png 150w, https://toss.tech/wp-content/uploads/2023/04/00009-889461687.png 512w" class="css-bc0lqn egyklng2"/><style data-emotion="css 1fttcpj">.css-1fttcpj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1fttcpj egyklng1"><style data-emotion="css p4blj2">.css-p4blj2{font-size:24px;margin-bottom:4px;word-break:keep-all;line-height:1.4;overflow-wrap:break-word;-webkit-transition:color 0.3s ease;transition:color 0.3s ease;-webkit-line-clamp:2;display:block;}@media (max-width: 700px){.css-p4blj2{font-size:18px;-webkit-line-clamp:2;}}</style><span class="typography typography--h4 typography--bold color--grey800 css-p4blj2 egyklng4">ë¬´ì§€ì„±ìœ¼ë¡œ ì‚¬ìš©í•œ í—¬ìŠ¤ ì²´í¬ê°€ ë¶ˆëŸ¬ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ” ì°¸ì‚¬</span><style data-emotion="css 1jxhn1e">.css-1jxhn1e{color:#8b95a1;}</style><span class="typography typography--p typography--regular color--grey700 css-1jxhn1e egyklng0">2023. 04. 01</span></div></div><div class="css-vivlm7 egyklng3"><img srcSet="https://toss.tech/wp-content/uploads/2023/03/center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/center.png 1200w" class="css-bc0lqn egyklng2"/><div class="css-1fttcpj egyklng1"><span class="typography typography--h4 typography--bold color--grey800 css-p4blj2 egyklng4">ESLintì™€ ASTë¡œ ì½”ë“œ í€„ë¦¬í‹° ë†’ì´ê¸°</span><span class="typography typography--p typography--regular color--grey700 css-1jxhn1e egyklng0">2023. 03. 31</span></div></div></div></div></div><style data-emotion="css 1d2vuhc">.css-1d2vuhc{padding:60px 24px;word-break:keep-all;overflow-wrap:break-word;background:rgba(2,9,19,0.91);}@media (max-width: 700px){.css-1d2vuhc{padding-top:24px;}}</style><section class="css-1d2vuhc eqrolup4"><style data-emotion="css yf0lpd">.css-yf0lpd{display:grid;grid-template-columns:3fr 7fr;grid-column-gap:20px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:640px;margin:0 auto;content-visibility:auto;}@media (max-width: 700px){.css-yf0lpd{grid-template-rows:min-content auto;grid-template-columns:1fr;grid-row-gap:24px;}}</style><div class="css-yf0lpd eqrolup2"><style data-emotion="css 1d33yk5">.css-1d33yk5{width:100%;}@media (max-width: 700px){.css-1d33yk5{width:90px;}}</style><img src="https://static.toss.im/3d/website_code_blue_alpha.png" alt="" class="css-1d33yk5 eqrolup3"/><style data-emotion="css 1gb2pj4">.css-1gb2pj4>*:not(style)~*:not(style){margin-top:24px;}</style><style data-emotion="css 7xmgw5">.css-7xmgw5{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.css-7xmgw5>*:not(style)~*:not(style){margin-top:24px;}</style><div class="css-7xmgw5"><style data-emotion="css 1pbuvpm">.css-1pbuvpm>*:not(style)~*:not(style){margin-top:8px;}</style><style data-emotion="css nbpfuv">.css-nbpfuv{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.css-nbpfuv>*:not(style)~*:not(style){margin-top:8px;}</style><div class="css-nbpfuv"><style data-emotion="css 19gu4b8">.css-19gu4b8{margin:0;font-size:26px;line-height:1.4;color:#ffffff;}@media (max-width: 700px){.css-19gu4b8{font-size:20px;}}</style><h3 class="css-19gu4b8 eqrolup1">í† ìŠ¤íŒ€ì´ ë§Œë“œëŠ” ìˆ˜ë§ì€ í˜ì‹ ì˜ ìˆœê°„ë“¤</h3><style data-emotion="css shfxsq">.css-shfxsq{font-size:17px;line-height:1.5;color:#e5e8eb;}@media (max-width: 700px){.css-shfxsq{font-size:16px;}}</style><div class="css-shfxsq eqrolup0">ë‹¹ì‹ ê³¼ í•¨ê»˜ ë§Œë“¤ê³  ì‹¶ìŠµë‹ˆë‹¤.<br/>ì§€ê¸ˆ, í† ìŠ¤íŒ€ì— í•©ë¥˜í•˜ì„¸ìš”.</div></div><a class="p-button p-button--primary p-button--inline p-button--fill p-button--small padding--s" aria-disabled="false" href="https://toss.im/career/jobs?gh_src=38b73b7a3us">ì±„ìš© ì¤‘ì¸ ê³µê³  ë³´ê¸°</a></div></div></section><footer class="p-footer p-footer--light"><div class="p-footer__inner"><div class="p-footer__site-group-list"><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">í† ìŠ¤í…Œí¬</div></li><li class="p-footer__site-group-item"><a href="mailto:techblog@toss.im">ì˜ê²¬ ë³´ë‚´ê¸°</a></li></ul><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">í† ìŠ¤</div></li><li class="p-footer__site-group-item"><a href="https://toss.im">í™ˆí˜ì´ì§€</a></li><li class="p-footer__site-group-item"><a href="https://team.toss.im">íšŒì‚¬ ì†Œê°œ</a></li><li class="p-footer__site-group-item"><a href="https://toss.im/career">ì±„ìš©</a></li></ul><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">ê³ ê°ì„¼í„°</div></li><li class="p-footer__site-group-item"><a href="tel:1599-4905">ì „í™”: 1599-4905 (24ì‹œê°„ ì—°ì¤‘ë¬´íœ´)</a></li><li class="p-footer__site-group-item"><a href="mailto:support.toss.im">ì´ë©”ì¼: support@toss.im</a></li><li class="p-footer__site-group-item"><a href="https://goto.kakao.com/@toss">ì¹´ì¹´ì˜¤í†¡: @toss</a></li></ul></div><address class="p-footer__address"><strong class="p-footer__address__company-name">ãˆœë¹„ë°”ë¦¬í¼ë¸”ë¦¬ì¹´</strong>Copyright Â© Viva Republica, Inc. All Rights Reserved.</address><ul class="p-footer__term-wrapper"></ul><ul class="p-footer__social-list"><li class="p-footer__social-list-item"><a aria-label="Toss Facebook" target="_blank" href="https://www.facebook.com/toss.revolution"><img src="https://static.toss.im/assets/homepage/safety/icn-facebook.svg" alt="Toss Facebook"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss blog" target="_blank" href="https://blog.toss.im"><img src="https://static.toss.im/assets/homepage/safety/icn-blog.svg" alt="Toss blog"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Naver Post" target="_blank" href="https://post.naver.com/tossblog"><img src="https://static.toss.im/assets/homepage/safety/icn-naver.svg" alt="Toss Naver Post"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Twitter" target="_blank" href="https://twitter.com/toss__official"><img src="https://static.toss.im/assets/homepage/safety/icn-twitter.svg" alt="Toss Twitter"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Instagram" target="_blank" href="https://www.instagram.com/toss.im/"><img src="https://static.toss.im/assets/homepage/safety/icn-instagram.svg" alt="Toss Instagram"/></a></li></ul></div></footer><div id="tds-pc__portal-container"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"title":"NestJS í™˜ê²½ì— ë§ëŠ” Custom Decorator ë§Œë“¤ê¸°","content":"\n\u003ch1\u003eë“¤ì–´ê°€ë©°\u003c/h1\u003e\n\n\n\n\u003cp\u003eë°ì½”ë ˆì´í„°ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ì™€ ìƒê´€ ì—†ëŠ” ë¡œì§ë“¤ì„ ìˆ¨ê¸°ë©´ì„œ ê¸°ëŠ¥ì„ ë³€ê²½í•˜ê±°ë‚˜ í™•ì¥í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. ë˜í•œ ì—¬ëŸ¬ í´ë˜ìŠ¤ì—ì„œ ë°˜ë³µë˜ëŠ” ê³µí†µ ê´€ì‹¬ì‚¬ê°€ ìˆì„ ë•Œ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì¤‘ë³µëœ ì½”ë“œë¥¼ ì¤„ì´ê³  ì½”ë“œë¥¼ ëª¨ë“ˆ ë‹¨ìœ„ë¡œ ê´€ë¦¬í•˜ëŠ” íš¨ê³¼ë¥¼ ê±°ë‘˜ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"847\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/tech-blog-1-1024x847.png\" alt=\"\" class=\"wp-image-1001\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1024x847.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-300x248.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-768x635.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1536x1270.png 1536w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1-1568x1297.png 1568w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-1.png 2000w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003eì´ëŸ° ì´ìœ ë¡œ ì €í¬ Node.js Chapterì—ì„œë„ ë°ì½”ë ˆì´í„°ë¥¼ ì ê·¹ í™œìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ NestJSì—ì„œëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ì§ˆë¬¸ë“¤ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003col\u003e\u003cli\u003eë°ì½”ë ˆì´í„°ì—ì„œ Providerë¥¼ ì‚¬ìš©í•´ì•¼í•  ë•Œ ì–´ë–»ê²Œ Providerì— ì ‘ê·¼í•  ìˆ˜ ìˆì„ê¹Œ?\u003c/li\u003e\u003cli\u003eë©”íƒ€ë°ì´í„°ë¥¼ ì“°ëŠ” NestJS ë°ì½”ë ˆì´í„°ë¥¼ ì¼ë°˜ ë°ì½”ë ˆì´í„°ì™€ ì‚¬ìš©í•´ë„ ê´œì°®ì„ê¹Œ?\u003c/li\u003e\u003c/ol\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003eNestJSì—ì„œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” NestJSì˜ DIì™€ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™˜ê²½ ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ì´ ê¸€ì„ í†µí•´ NestJSì—ì„œëŠ” ì–´ë–»ê²Œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ”ì§€ ì‚´í´ë³´ê³ , ì•ì˜ ë‘ ì§ˆë¬¸ë“¤ì„ ê³ ë ¤í•˜ì—¬ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë³´ë ¤ê³  í•©ë‹ˆë‹¤.\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eë“¤ì–´ê°€ê¸° ì „ì—, ë§Œì•½ ë°ì½”ë ˆì´í„°ë‚˜ ë©”íƒ€ë°ì´í„°ê°€ ìƒì†Œí•˜ì‹œë‹¤ë©´ ì•„ë˜ ë¬¸ì„œë“¤ì„ ì½ì–´ë³´ì‹œëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cul\u003e\u003cli\u003e\u003ca href=\"https://www.typescriptlang.org/ko/docs/handbook/decorators.html\"\u003eTypescript Decorator\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://www.npmjs.com/package/reflect-metadata\"\u003ereflect-metadata\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003chr class=\"wp-block-separator\"/\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch1\u003eChapter1. ë°ì½”ë ˆì´í„°ì—ì„œ Providerì— ì ‘ê·¼í•˜ê¸°\u003cbr\u003e\u003c/h1\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-1\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003clink rel='stylesheet' id='syntax-highlighting-code-block-css'  href='https://toss.tech/wp-content/plugins/syntax-highlighting-code-block/vendor/scrivo/highlight-php/styles/default.css?ver=1.3.1' media='all' /\u003e\u003cstyle\u003e.wp-block-code {\n\tborder: 0;\n\tpadding: 0;\n}\n\n.wp-block-code \u003e div {\n\toverflow: auto;\n}\n\n.shcb-language {\n\tborder: 0;\n\tclip: rect(1px, 1px, 1px, 1px);\n\t-webkit-clip-path: inset(50%);\n\tclip-path: inset(50%);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n\tword-wrap: normal;\n\tword-break: normal;\n}\n\n.hljs {\n\tbox-sizing: border-box;\n}\n\n.hljs.shcb-code-table {\n\tdisplay: table;\n\twidth: 100%;\n}\n\n.hljs.shcb-code-table \u003e .shcb-loc {\n\tcolor: inherit;\n\tdisplay: table-row;\n\twidth: 100%;\n}\n\n.hljs.shcb-code-table .shcb-loc \u003e span {\n\tdisplay: table-cell;\n}\n\n.wp-block-code code.hljs:not(.shcb-wrap-lines) {\n\twhite-space: pre;\n}\n\n.wp-block-code code.hljs.shcb-wrap-lines {\n\twhite-space: pre-wrap;\n}\n\n.hljs.shcb-line-numbers {\n\tborder-spacing: 0;\n\tcounter-reset: line;\n}\n\n.hljs.shcb-line-numbers \u003e .shcb-loc {\n\tcounter-increment: line;\n}\n\n.hljs.shcb-line-numbers .shcb-loc \u003e span {\n\tpadding-left: 0.75em;\n}\n\n.hljs.shcb-line-numbers .shcb-loc::before {\n\tborder-right: 1px solid #ddd;\n\tcontent: counter(line);\n\tdisplay: table-cell;\n\tpadding: 0 0.75em;\n\ttext-align: right;\n\t-webkit-user-select: none;\n\t-moz-user-select: none;\n\t-ms-user-select: none;\n\tuser-select: none;\n\twhite-space: nowrap;\n\twidth: 1%;\n}\n\u003c/style\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestService\u003c/span\u003e \u003c/span\u003e{\n  @Cacheable(\u003cspan class=\"hljs-string\"\u003e'key'\u003c/span\u003e)\n  test() {\n      \u003cspan class=\"hljs-comment\"\u003e// ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-1\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eTestServiceê°€ ìˆì„ ë•Œ, ìºì‹± ë¡œì§ì„ Cacheable ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ë¶„ë¦¬í•˜ë ¤ê³  í•©ë‹ˆë‹¤.\u003cbr\u003e\u003cbr\u003eCacheable ë°ì½”ë ˆì´í„°ì—ì„œ \u003ccode\u003eCacheManager\u003c/code\u003eë¼ëŠ” Providerë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ ì–´ë–»ê²Œ ì ‘ê·¼í•´ì•¼ í• ê¹Œìš”?\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-2\" data-shcb-language-name=\"CSS\" data-shcb-language-slug=\"css\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-css\"\u003e\u003cspan class=\"hljs-keyword\"\u003e@Module\u003c/span\u003e{\n  \u003cspan class=\"hljs-selector-tag\"\u003eimports\u003c/span\u003e: \u003cspan class=\"hljs-selector-attr\"\u003e[CacheModule.register(...)]\u003c/span\u003e\n  \u003cspan class=\"hljs-selector-tag\"\u003eproviders\u003c/span\u003e: \u003cspan class=\"hljs-selector-attr\"\u003e[TestService]\u003c/span\u003e\n}\n\u003cspan class=\"hljs-selector-tag\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-selector-tag\"\u003eTestModule\u003c/span\u003e {}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-2\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eCSS\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ecss\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eCacheManager Providerë¥¼ exportí•˜ëŠ” CacheModuleì„ import í•´ë´…ì‹œë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-3\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCacheable\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ekey: string, ttl: number\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003etarget: any, _key: string, descriptor: PropertyDescriptor\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e methodRef = descriptor.value;\n\n    descriptor.value = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) \u003c/span\u003e{\n    \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e) \u003cspan class=\"hljs-comment\"\u003e// TestService {}\u003c/span\u003e\n\n    \u003cspan class=\"hljs-comment\"\u003e// TypeError: Cannot read properties of undefined (reading 'get')\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.get(key); \n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (value) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e value;\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e methodRef.call(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e, ...args);\n    \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.set(key, result, ttl);\n    \u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(result)\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result;\n    };\n  };\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-3\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"458\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1024x458.png\" alt=\"\" class=\"wp-image-1074\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1024x458.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-300x134.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-768x344.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1536x687.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44-1568x702.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-15-á„‹á…©á„’á…®-2.44.44.png 1926w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eTestModuleì—ì„œ CacheModuleì„ importí•˜ê³  ìˆê¸´ í•˜ì§€ë§Œ TestServiceì—ì„œ CacheManager ë¥¼ ì£¼ì…í•˜ì§€ ì•ŠëŠ” ì´ìƒ Cacheableì—ì„œ CacheManagerì— ì ‘ê·¼í•  ë°©ë²•ì´ ì—†ìŠµë‹ˆë‹¤. Cacheable ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë ¤ë©´ í´ë˜ìŠ¤ì— í•­ìƒ CacheManagerë¥¼ ì£¼ì…í•´ì£¼ì–´ì•¼ í•˜ëŠ” ë¶ˆí¸í•¨ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eê²Œë‹¤ê°€ CacheManagerë¥¼ ë„£ì–´ì¤€ë‹¤ê³  í•´ë„ ë©¤ë²„ ì´ë¦„ì„ \u003ccode\u003ecache\u003c/code\u003e ë¡œ ê°•ì œí•´ì•¼ í•©ë‹ˆë‹¤. ê°€ëŠ¥í•œ ë°©ë²•ì´ì§€ë§Œ íœ´ë¨¼ ì—ëŸ¬ê°€ ë°œìƒí•  ìˆ˜ ìˆì–´ ì¢‹ì€ ë°©ë²•ì€ ì•„ë‹™ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003eê·¸ë ‡ë‹¤ë©´ NestJS ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ëŠ” ì–´ë–»ê²Œ ë˜ì–´ìˆì„ê¹Œìš”?\u003c/p\u003e\n\n\n\n\u003cp\u003eNestJSê°€ ë°ì½”ë ˆì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ê³¼ì •ì€ â€˜\u003cstrong\u003eë§ˆí‚¹ \u0026#8211; ì¡°íšŒ \u0026#8211; ë“±ë¡\u003c/strong\u003eâ€™ë¡œ í¬ê²Œ ì„¸ ë‹¨ê³„ë¡œ ë‚˜ë‰©ë‹ˆë‹¤. \u003ccode\u003eCron\u003c/code\u003e ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤.\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"310\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1024x310.png\" alt=\"\" class=\"wp-image-1116\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1024x310.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-300x91.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-768x232.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1536x464.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-2048x619.png 2048w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-6.44.45-1568x474.png 1568w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003col\u003e\u003cli\u003eë§ˆí‚¹ \u0026#8211; SetMetadataë¼ëŠ” í•¨ìˆ˜ë¡œ íŠ¹ì • ë©”ì„œë“œì— \u003ccode\u003eCRON\u003c/code\u003e ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.\u003c/li\u003e\u003cli\u003eì¡°íšŒ \u0026#8211; ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ì— DiscoveryServicedì™€ MetadataScannerë¡œ ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©° \u003ccode\u003eCRON\u003c/code\u003e ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ê°€ì§€ê³  ìˆëŠ” ë©”ì„œë“œë“¤ì„ ì°¾ìŠµë‹ˆë‹¤.\u003c/li\u003e\u003cli\u003eë“±ë¡ \u0026#8211; ë©”ì„œë“œë¥¼ ì°¾ì•˜ìœ¼ë©´ í•´ë‹¹ ë©”ì„œë“œë¥¼ í¬ë¡  ì¡ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤.\u003c/li\u003e\u003c/ol\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003eNestJSì—ì„œ ì œê³µí•˜ëŠ” SetMetadataì™€ DiscoverService, ê·¸ë¦¬ê³  MetadataScannerë¥¼ ì‚¬ìš©í•˜ë©´, íŠ¹ì • í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œë§Œ í•„í„°ë§í•˜ì—¬ IoC ë‚´ ë‹¤ë¥¸ Providerë¥¼ ì‚¬ìš©í•´ ì›í•˜ëŠ” ë¡œì§ë“¤ì„ ì ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eSetMetadata\u003c/h2\u003e\n\n\n\n\u003cp\u003eSetMetadataëŠ” \u003cstrong\u003eíƒ€ê²Ÿ(í´ë˜ìŠ¤, ë©”ì„œë“œ)ì— ë©”íƒ€ë°ì´í„°ë¥¼ ë§ˆí‚¹í•˜ëŠ” ë°ì½”ë ˆì´í„°\u003c/strong\u003eë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. NestJSì˜ ì½”ë“œë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\u003cbr\u003e\u003cbr\u003e\u003ca rel=\"noreferrer noopener\" href=\"https://github1s.com/nestjs/nest/blob/HEAD/packages/common/decorators/core/set-metadata.decorator.ts#L22-L37\" target=\"_blank\"\u003e\u003cstrong\u003esetMetadata ì½”ë“œ\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-4\" data-shcb-language-name=\"PHP\" data-shcb-language-slug=\"php\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-php\"\u003eexport \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e SetMetadata = \u0026lt;K = string, V = any\u0026gt;(\n  metadataKey: K,\n  metadataValue: V,\n): CustomDecorator\u0026lt;K\u0026gt; =\u0026gt; {\n  \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e decoratorFactory = (target: object, key?: any, descriptor?: any) =\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// method or classì— ë©”íƒ€ë°ì´í„° ë“±ë¡\u003c/span\u003e\n    Reflect.defineMetadata(metadataKey, metadataValue, \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eor\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003emethod\u003c/span\u003e);\n    \u003cspan class=\"hljs-title\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003etarget\u003c/span\u003e;\n  };\n  \u003cspan class=\"hljs-title\"\u003edecoratorFactory\u003c/span\u003e.\u003cspan class=\"hljs-title\"\u003eKEY\u003c/span\u003e = \u003cspan class=\"hljs-title\"\u003emetadataKey\u003c/span\u003e;\n  \u003cspan class=\"hljs-title\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003edecoratorFactory\u003c/span\u003e;\n};\u003c/span\u003e\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-4\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003ePHP\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ephp\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003e\u003cstrong\u003eReflect.defineMetadata(metadataKey, metadataValue, class or method);\u003c/strong\u003e\u003c/code\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eSetMetadata í•¨ìˆ˜ ë‚´ë¶€ì—ì„œëŠ” *\u003ccode\u003eReflect.defineMetadata\u003c/code\u003e ë©”ì„œë“œë¥¼ í†µí•´ íƒ€ê²Ÿ ê°ì²´ì— metadataKeyë¥¼ í‚¤, metadataValueë¥¼ ê°’ìœ¼ë¡œ í•˜ëŠ” \u003ca href=\"https://medium.com/jspoint/what-are-internal-slots-and-internal-methods-in-javascript-f2f0f6b38de\"\u003eë‚´ë¶€ ìŠ¬ë¡¯\u003c/a\u003eì„ ì •ì˜í•©ë‹ˆë‹¤. (\u003ccode\u003e[[Metadata]]\u003c/code\u003e )\u003cbr\u003e\u003cbr\u003e*\u003ccode\u003eReflect\u003c/code\u003e ëŠ” \u003ca href=\"https://www.npmjs.com/package/reflect-metadata\"\u003ereflect-metadata\u003c/a\u003e ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì„¤ì¹˜ë˜ì–´ìˆëŠ” ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”íƒ€ë°ì´í„°ë¥¼ ì •ì˜í•˜ê±°ë‚˜ ì¡°íšŒí•˜ëŠ” ë° ì‚¬ìš©í•©ë‹ˆë‹¤.\u003cbr\u003e\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003e\u003cstrong\u003eSetMetadata(KEY, value) -\u0026gt; CustomDecorator;\u003c/strong\u003e\u003c/code\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eSetMetadataì˜ ë¦¬í„´ê°’ì€ í´ë˜ìŠ¤, ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. í•´ë‹¹ ë°ì½”ë ˆì´í„°ë¡œ íƒ€ê²Ÿ í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œì— ëŒ€í•œ ë©”íƒ€ë°ì´í„°ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-5\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e SOMETHING = \u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'SOMETHING'\u003c/span\u003e)\n\n\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCustomDecorator\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ekey: string | symbol\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-comment\"\u003e// SetMetadata(SOMETHING, key)ì™€ ë‹¤ë¥¸ ë°ì½”ë ˆì´í„°ë¥¼ í•©ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e applyDecorators(SetMetadata(SOMETHING, key), AnotherDecorator)\n}\n\n@CustomDecorator(\u003cspan class=\"hljs-string\"\u003e'KEY1'\u003c/span\u003e)\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eDecoratedClass\u003c/span\u003e \u003c/span\u003e{}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-5\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eDecoratedClass\u003c/code\u003eì— \u003ccode\u003eSOMETHING\u003c/code\u003e ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤, \u003ccode\u003e'KEY1'\u003c/code\u003eì„ ë©”íƒ€ë°ì´í„° ê°’ìœ¼ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. \u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eDiscoveryService\u003c/h2\u003e\n\n\n\n\u003cp\u003eNestJSëŠ” DiscoveryModule ì„ ì œê³µí•©ë‹ˆë‹¤. DiscoveryModuleì˜ DiscoveryServiceì—ì„œëŠ” ë‚´ë¶€ì ìœ¼ë¡œ modulesContainerë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  ëª¨ë“ˆì˜ Controllerì™€ Provider í´ë˜ìŠ¤ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003eDiscoverService\u003c/code\u003eë¥¼ ì‚¬ìš©í•˜ì—¬ ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©°, SetMetadataë¡œ ë“±ë¡í–ˆë˜ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ íŠ¹ì • Providerë¥¼ í•„í„°ë§í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.\u003c/strong\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ca rel=\"noreferrer noopener\" href=\"https://github.com/nestjs/nest/blob/master/packages/core/discovery/discovery-service.ts\" target=\"_blank\"\u003e\u003cstrong\u003e\u003c/strong\u003e\u003c/a\u003e\u003cstrong\u003e\u003ca rel=\"noreferrer noopener\" href=\"https://github.com/nestjs/nest/blob/master/packages/core/discovery/discovery-service.ts\" target=\"_blank\"\u003eDiscoveryService ì½”ë“œ\u003c/a\u003e\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-6\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eDiscoveryService\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(private readonly modulesContainer: ModulesContainer) {}\n\n  getProviders(\n    options: DiscoveryOptions = {},\n    \u003cspan class=\"hljs-attr\"\u003emodules\u003c/span\u003e: Module[] = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.getModules(options),\n  ): InstanceWrapper[] {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e modules.flatMap(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eitem\u003c/span\u003e =\u0026gt;\u003c/span\u003e [...item.providers.values()]);\n  }\n\n  \u003cspan class=\"hljs-comment\"\u003e// ...ìƒëµ\u003c/span\u003e\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-6\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eCustomDecorator ê°€ ë¶™ì€ ë©”ì„œë“œë¥¼ ì°¾ëŠ” ê³¼ì •ì„ ì˜ˆë¡œ ë“¤ì–´ë³´ê² ìŠµë‹ˆë‹¤. ë©”íƒ€ë°ì´í„° í‚¤ëŠ” \u003ckbd\u003e\u003ccode\u003eCUSTOM_DECORATOR\u003c/code\u003e\u003c/kbd\u003e  ì‹¬ë³¼ì´ê³ , ë©”íƒ€ë°ì´í„° ê°’ì€ \u003ckbd\u003e\u003ccode\u003etest-value \u003c/code\u003e\u003c/kbd\u003eì…ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-7\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e CUSTOM_DECORATOR = \u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"CUSTOM_DECORATOR\"\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e CustomDecorator = SetMetadata(CUSTOM_DECORATOR, \u003cspan class=\"hljs-string\"\u003e'test-value'\u003c/span\u003e);\n\n@CustomDecorator\n@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestService\u003c/span\u003e \u003c/span\u003e{\n  test() {}\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-7\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003eì•„ë˜ì˜ \u003ccode\u003eexplorerService.find(CUSTOM_DECORATOR)\u003c/code\u003e ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œìš”?\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-8\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { Injectable } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { DiscoveryService, MetadataScanner, Reflector } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/core'\u003c/span\u003e;\n\n@Injectable()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eExplorerService\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(\n    private readonly discoveryService: DiscoveryService,\n  ) {}\n\n  find(metadataKey: string | symbol) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e providers = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.discoveryService.getProviders();\n\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e providers\n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ewrapper\u003c/span\u003e) =\u0026gt;\u003c/span\u003e wrapper.isDependencyTreeStatic()) \n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ metatype, instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!instance || !metatype) {\n          \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-literal\"\u003efalse\u003c/span\u003e;\n        }\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getMetadata(metadataKey, metatype);\n      })\n      .map(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e instance);\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-8\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cstrong\u003eì²«ë²ˆì§¸ í•„í„°: \u003ccode\u003efilter((wrapper) =\u0026gt; wrapper.isDependencyTreeStatic())\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003erequest scopeê°€ ì•„ë‹Œ ì‹±ê¸€í†¤ í”„ë¡œë°”ì´ë”ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eë‘ë²ˆì§¸ í•„í„°: \u003ccode\u003eReflect.getMetadata(metadataKey, metatype)\u003c/code\u003e\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eí•´ë‹¹ í•„í„°ëŠ” ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ í´ë˜ìŠ¤ë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"249\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/tech-blog-3-1024x249.png\" alt=\"\" class=\"wp-image-1005\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1024x249.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-300x73.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-768x187.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1536x374.png 1536w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3-1568x382.png 1568w, https://toss.tech/wp-content/uploads/2022/11/tech-blog-3.png 2000w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003emetatype\u003c/code\u003e ì€ \u003ccode\u003eclass TestService\u003c/code\u003e ì™€ ê°™ì´ í•´ë‹¹ Providerì˜ í´ë˜ìŠ¤ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. \u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003eReflect.getMetadata(metadataKey, metatype)\u003c/code\u003e ì€ metatype(í´ë˜ìŠ¤)ì— \u003ccode\u003emetadataKey\u003c/code\u003eë¡œ ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ì˜ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤. TestService í´ë˜ìŠ¤ì˜ ê²½ìš° ë©”íƒ€ë°ì´í„° í‚¤ëŠ” \u003ccode\u003eCUSTOM_DECORATOR\u003c/code\u003e ì´ê³  ê°’ì€ \u003ccode\u003etest-value\u003c/code\u003e ì…ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eë§Œì•½ ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ê°€ ì—†ìœ¼ë©´ undefinedë¥¼ ë°˜í™˜í•˜ê³  í•´ë‹¹ ProviderëŠ” í•„í„°ë§ë©ë‹ˆë‹¤.\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eMetadataScanner\u003c/h2\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eì•ì˜ DiscoverServiceì˜ ì˜ˆì‹œì—ì„œëŠ” ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œë¥¼ ê°€ì§„ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•˜ëŠ” ë° ê·¸ì³¤ìŠµë‹ˆë‹¤. ì‹¤ì œ ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œëŠ” DiscoveryModuleì—ì„œ ì œê³µí•˜ëŠ” \u003ccode\u003eMetadataScanner\u003c/code\u003e ë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ca rel=\"noreferrer noopener\" href=\"https://github1s.com/nestjs/nest/blob/HEAD/packages/core/metadata-scanner.ts#L9-L40\" target=\"_blank\"\u003e\u003cstrong\u003eMetadataScanner ì½”ë“œ\u003c/strong\u003e\u003c/a\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-9\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eMetadataScanner\u003c/span\u003e \u003c/span\u003e{\n  public scanFromPrototype\u0026lt;T extends Injectable, R = any\u0026gt;(\n    instance: T,\n    \u003cspan class=\"hljs-attr\"\u003eprototype\u003c/span\u003e: object,\n    \u003cspan class=\"hljs-attr\"\u003ecallback\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ename: string\u003c/span\u003e) =\u0026gt;\u003c/span\u003e R,\n  ): R[] {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e methodNames = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eSet\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.getAllFilteredMethodNames(prototype));\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e iterate(methodNames)\n      .map(callback)\n      .filter(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003emetadata\u003c/span\u003e =\u0026gt;\u003c/span\u003e !isNil(metadata))\n      .toArray();\n  }\n\n  *getAllFilteredMethodNames(prototype: object): IterableIterator\u0026lt;string\u0026gt; {\n    \u003cspan class=\"hljs-comment\"\u003e// prototypeì— ë“±ë¡ëœ method ì´ë¦„ë“¤ì„ ê°€ì ¸ì˜¨ë‹¤.  \u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-9\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003escanFromPrototype\u003c/code\u003e ëŠ” \u003ccode\u003egetAllFilteredMethodNames\u003c/code\u003e ë©”ì„œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œ ì´ë¦„ë“¤ì„ ê°€ì ¸ì™€ ì¸ìë¡œ ë°›ì€ callbackì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. ì´ ì¤‘ì—ì„œ ë©”íƒ€ë°ì´í„°ê°€ ìˆëŠ” ë©”ì„œë“œë§Œ í•„í„°ë§í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003e\u003ccode\u003escanFromPrototype\u003c/code\u003e ì˜ callback íŒŒë¼ë¯¸í„°ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ë©”ì„œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ ë©”ì„œë“œì— ì ‘ê·¼í•´ ë°ì½”ë ˆì´íŒ… í•¨ìˆ˜ë¡œ ë®ì–´ì”Œìš¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003eSetMetadata\u003c/code\u003e, \u003ccode\u003eDiscoveryService\u003c/code\u003e, \u003ccode\u003eMetadataScanner\u003c/code\u003e ëª¨ë“  ì¬ë£Œë“¤ì´ ëª¨ì˜€ìœ¼ë‹ˆ Providerì— ì ‘ê·¼ ê°€ëŠ¥í•œ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eCacheable ë°ì½”ë ˆì´í„°\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eë©”ì„œë“œì— \u003ccode\u003eCACHEABLE\u003c/code\u003e ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ, ttlì„ ë©”íƒ€ë°ì´í„° ê°’ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-10\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e CACHEABLE = \u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'CACHEABLE'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Cacheable = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ettl: number\u003c/span\u003e) =\u0026gt;\u003c/span\u003e SetMetadata(CACHEABLE, ttl);\n\n@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTargetClass\u003c/span\u003e \u003c/span\u003e{\n  @Cacheable(\u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e)\n  test() {}\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-10\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cbr\u003e\u003cbr\u003e\u003cstrong\u003eCacheDecoratorRegister í´ë˜ìŠ¤\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-11\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCacheDecoratorRegister\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnModuleInit\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(\n    private readonly discoveryService: DiscoveryService,\n    private readonly metadataScanner: MetadataScanner,\n    private readonly reflector: Reflector,\n    private readonly cache: Cache,\n  ) {}\n\n  onModuleInit() {\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.discoveryService\n      .getProviders() \u003cspan class=\"hljs-comment\"\u003e// #1. ëª¨ë“  provider ì¡°íšŒ\u003c/span\u003e\n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ewrapper\u003c/span\u003e) =\u0026gt;\u003c/span\u003e wrapper.isDependencyTreeStatic())\n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e instance \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.getPrototypeOf(instance))\n      .forEach(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.metadataScanner.scanFromPrototype(\n          instance,\n          \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.getPrototypeOf(instance),\n          (methodName) =\u0026gt; {\n\t    \u003cspan class=\"hljs-comment\"\u003e// #2. ë©”íƒ€ë°ì´í„° value\u003c/span\u003e\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ttl = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.reflector.get(CACHEABLE, instance[methodName]); \n            \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!ttl) {\n              \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n            }\n\n            \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e methodRef = instance[methodName];\n\n            \u003cspan class=\"hljs-comment\"\u003e// #3. ê¸°ì¡´ í•¨ìˆ˜ ë°ì½”ë ˆì´íŒ…\u003c/span\u003e\n            instance[methodName] = \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e (\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) \u003c/span\u003e{\n              \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e name = \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${instance.constructor.name}\u003c/span\u003e.\u003cspan class=\"hljs-subst\"\u003e${methodName}\u003c/span\u003e`\u003c/span\u003e;\n              \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.get(name, args);\n              \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (value) {\n                \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e value;\n              }\n\n              \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e methodRef.call(instance, ...args);\n              \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.set(name, args, result, ttl);\n              \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result;\n            };\n          },\n        );\n      });\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-11\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eí•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ëª¨ë“ˆì˜ providerì— ë“±ë¡í•˜ë©´, onModuleInit ë‹¨ê³„ì—ì„œ \u003ccode\u003e@Cacheable\u003c/code\u003eë¡œ ë°ì½”ë ˆì´íŒ…ëœ ë©”ì„œë“œë¥¼ ì°¾ì•„ ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e#1. ëª¨ë“  Provider í´ë˜ìŠ¤ë¥¼ ìˆœíšŒí•˜ë©°\u003c/p\u003e\n\n\n\n\u003cp\u003e#2. íŠ¹ì • ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ ë©”ì„œë“œë¥¼ ì°¾ì•„\u003c/p\u003e\n\n\n\n\u003cp\u003e#3. ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e#3ì˜ ê³¼ì •ì—ì„œ, \u003ccode\u003eCacheDecoratorRegister\u003c/code\u003e ìƒì„±ìì— ì£¼ì…í•œ CacheManagerë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eê·¸ëŸ°ë° ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ë•Œë§ˆë‹¤ ë§¤ë²ˆ ì´ë ‡ê²Œ ë³µì¡í•œ ê³¼ì •ì„ ê±°ì³ì•¼í•˜ëŠ” ê±¸ê¹Œìš”? ì €í¬ ì±•í„°ì—ì„œëŠ” ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë§ˆë‹¤ ë°˜ë³µë˜ëŠ” ê³¼ì •ì„ \u003cstrong\u003eAopModule\u003c/strong\u003eì´ë¼ëŠ” ëª¨ë“ˆë¡œ í•´ê²°í–ˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eí•´ë‹¹ ëª¨ë“ˆì€ 2022ë…„ 12ì›”ì— ì˜¤í”ˆì†ŒìŠ¤ë¡œ ê³µê°œë˜ì—ˆìŠµë‹ˆë‹¤. í˜„ì¬ npmì—ì„œ \u003ca rel=\"noreferrer noopener\" href=\"https://www.npmjs.com/package/@toss/nestjs-aop\" data-type=\"URL\" data-id=\"https://www.npmjs.com/package/@toss/nestjs-aop\" target=\"_blank\"\u003e\u003cstrong\u003e@toss/nestjs-aop\u003c/strong\u003e\u003c/a\u003e ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ìš´ ë°›ì•„ ì‚¬ìš©í•´ë³´ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eê´€ë ¨í•´ì„œ \u003ca href=\"https://youtube.com/channel/UCxUcLf_VfUC0pwFujmLK6dw\"\u003e\u003c/a\u003e\u003cstrong\u003e\u003ca rel=\"noreferrer noopener\" href=\"https://www.youtube.com/watch?v=VH1GTGIMHQw\u0026amp;t=3000s\" target=\"_blank\"\u003eNestJS ë°‹ì—…ì—ì„œ ë°œí‘œí•œ ìë£Œ\u003c/a\u003e\u003c/strong\u003eë„ ìˆìœ¼ë‹ˆ í•¨ê»˜ ì°¸ê³ í•˜ì‹œë©´ ì¢‹ì„ ë“¯ í•©ë‹ˆë‹¤. ğŸ™‚\u003c/p\u003e\n\n\n\n\u003ch2\u003e\u003cbr\u003eAopModule\u003c/h2\u003e\n\n\n\n\u003cp\u003eAopModuleì´ ë°ì½”ë ˆì´í„°ë“¤ì„ ë“±ë¡í•˜ëŠ” ê³¼ì •ì€ ì´ë ‡ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"489\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1024x489.png\" alt=\"\" class=\"wp-image-1122\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1024x489.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-300x143.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-768x367.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1536x733.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31-1568x749.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.03.31.png 1990w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eê°„ë‹¨íˆ ì„¤ëª…í•˜ë©´\u003c/p\u003e\n\n\n\n\u003col\u003e\u003cli\u003eAspect ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ í´ë˜ìŠ¤ë¥¼ ì°¾ê³  (CacheableDecorator)\u003c/li\u003e\u003cli\u003eCacheable ë°ì½”ë ˆì´í„°ê°€ ë¶™ì€ í•¨ìˆ˜ë¥¼ ì°¾ì•„ (FooService.foo)\u003c/li\u003e\u003cli\u003e1ë²ˆ í´ë˜ìŠ¤ì˜ wrap í•¨ìˆ˜ë¡œ 2ë²ˆì˜ í•¨ìˆ˜ë¥¼ ê°ìŒ‰ë‹ˆë‹¤. (CacheableDecorator.wrap)\u003c/li\u003e\u003c/ol\u003e\n\n\n\n\u003cp\u003eì½”ë“œë¥¼ ë³´ë©° ì¢€ ë” ìì„¸íˆ ì„¤ëª…í•´ë³¼ê²Œìš”.\u003cbr\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch3\u003e1. Aspect ë°ì½”ë ˆì´í„° ì‚¬ìš©\u003c/h3\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003cstrong\u003eAspect ë°ì½”ë ˆì´í„°\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-12\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eimport\u003c/span\u003e { applyDecorators, Injectable } \u003cspan class=\"hljs-keyword\"\u003efrom\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'@nestjs/common'\u003c/span\u003e;\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ASPECT = \u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'ASPECT_CLASS'\u003c/span\u003e);\n\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAspect\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e applyDecorators(SetMetadata(ASPECT, \u003cspan class=\"hljs-string\"\u003e'ASPECT_CLASS'\u003c/span\u003e), Injectable);\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-12\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eë°ì½”ë ˆì´í„° ì‚¬ìš©\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-13\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Aspect()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCacheLazyDecorator\u003c/span\u003e \u003c/span\u003e{}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-13\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eë°ì½”ë ˆì´í„° ë¡œì§ì„ ì‹¤í–‰í•  í´ë˜ìŠ¤ì— \u003ccode\u003eASPECT\u003c/code\u003e ë¼ëŠ” ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch3\u003e2. ë°ì½”ë ˆì´í„° ìƒì„±\u003c/h3\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-14\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e CACHEABLE = \u003cspan class=\"hljs-built_in\"\u003eSymbol\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'CACHEABLE'\u003c/span\u003e);\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e Cacheable = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ettl: number\u003c/span\u003e) =\u0026gt;\u003c/span\u003e SetMetadata(CACHEABLE, ttl);\n\n\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eFooService\u003c/span\u003e \u003c/span\u003e{\n\t@Cacheable(\u003cspan class=\"hljs-number\"\u003e1000\u003c/span\u003e)\n\tfoo() {}\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-14\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eíŠ¹ì • ì‹¬ë³¼(ë˜ëŠ” ë¬¸ìì—´)ì„ ë©”íƒ€ë°ì´í„° í‚¤ë¡œ í•˜ì—¬ SetMetadataë¡œ ì›í•˜ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“­ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch3\u003e3. LazyDecorator êµ¬í˜„\u003c/h3\u003e\n\n\n\n\u003cp\u003eAopModuleì— ë“±ë¡ë˜ëŠ” ëª¨ë“  ë°ì½”ë ˆì´í„°ë“¤ì€ LazyDecorator ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤. ë°ì½”ë ˆì´íŒ… í•˜ëŠ” ì‹œì ì„ ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ìœ¼ë¡œ ë¯¸ë£¨ê¸° ë•Œë¬¸ì— LazyDecoratorë¼ê³  í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eLazyDecorator ì¸í„°í˜ì´ìŠ¤\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-15\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e interface LazyDecorator {\n  wrap(reflector: Reflector, \u003cspan class=\"hljs-attr\"\u003einstance\u003c/span\u003e: any, \u003cspan class=\"hljs-attr\"\u003emethodName\u003c/span\u003e: string): Decorator | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e;\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-15\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eCacheLazyDecorator êµ¬í˜„\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-16\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Aspect()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eCacheLazyDecorator\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eLazyDecorator\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(@Inject(CACHE_MANAGER) private readonly cache: CacheManager) {}\n\n  wrap(reflector: Reflector, \u003cspan class=\"hljs-attr\"\u003einstance\u003c/span\u003e: any, \u003cspan class=\"hljs-attr\"\u003emethodName\u003c/span\u003e: string) {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e ttl = reflector.get(CACHEABLE, instance[methodName]);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (!ttl) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n    }\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e methodRef = instance[methodName];\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e name = \u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${instance.constructor.name}\u003c/span\u003e.\u003cspan class=\"hljs-subst\"\u003e${methodName}\u003c/span\u003e`\u003c/span\u003e;\n    \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (...args: any[]) =\u0026gt; {\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e value = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.get(name);\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (value) {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e value;\n      }\n\n      \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e result = \u003cspan class=\"hljs-keyword\"\u003eawait\u003c/span\u003e methodRef.call(instance, ...args);\n      \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.cache.set(name, result, ttl);\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e result;\n    };\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-16\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eì ‘ê·¼í•˜ê³ ì í•˜ëŠ” ProviderëŠ” ì´ì œ ìƒì„±ìì— ì£¼ì…í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch3\u003e4. AutoAspectExecutor\u003c/h3\u003e\n\n\n\n\u003cp\u003eonModuleInit ë‹¨ê³„ì—ì„œ AopModuleì˜ AutoAspectExecutor ê°€ ASPECTê°€ ë¶™ì€ ë°ì½”ë ˆì´í„° í´ë˜ìŠ¤ë“¤ì˜ wrap í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚¤ë©° ê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eAutoAspectExecutor ì½”ë“œ\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-17\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eAutoAspectExecutor\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eimplements\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnModuleInit\u003c/span\u003e \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003econstructor\u003c/span\u003e(\n    private readonly discoveryService: DiscoveryService,\n    private readonly metadataScanner: MetadataScanner,\n    private readonly reflector: Reflector,\n  ) {}\n\n  onModuleInit() {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e providers = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.discoveryService.getProviders();\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e lazyDecorators = \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.lookupLazyDecorators(providers);\n    \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (lazyDecorators.length === \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e) {\n      \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e;\n    }\n\n    providers\n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ewrapper\u003c/span\u003e) =\u0026gt;\u003c/span\u003e wrapper.isDependencyTreeStatic())\n      .filter(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e instance \u0026amp;\u0026amp; \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.getPrototypeOf(instance))\n      .forEach(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e{ instance }\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.metadataScanner.scanFromPrototype(\n          instance,\n          \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.getPrototypeOf(instance),\n          (methodName) =\u0026gt;\n            lazyDecorators.forEach(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003elazyDecorator\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n              \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e wrappedMethod = lazyDecorator.wrap(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e.reflector, instance, methodName);\n              \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (wrappedMethod) {\n                instance[methodName] = wrappedMethod;\n              }\n            }),\n        );\n      });\n  }\n\n  private lookupLazyDecorators(providers: any[]): LazyDecorator[] {\n    \u003cspan class=\"hljs-comment\"\u003e// this.reflector.get(ASPECT, metatype) ê²°ê³¼ê°’ì´ ì¡´ì¬í•˜ëŠ” providersë§Œ í•„í„°ë§\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-17\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eProviderì— ì ‘ê·¼ ê°€ëŠ¥í•œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“œëŠ” ê³¼ì •ì„ ë‹¤ì‹œ ìš”ì•½í•˜ë©´ ì´ë ‡ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003col\u003e\u003cli\u003e\u003ccode\u003eSetMetadata\u003c/code\u003eë¡œ í•„í„°ë§í•  í´ë˜ìŠ¤ì— ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ê³ \u003c/li\u003e\u003cli\u003e\u003ccode\u003eDiscoveryService\u003c/code\u003eë¡œ ëª¨ë“  Providerë¥¼ ì¡°íšŒí•˜ë©°\u003c/li\u003e\u003cli\u003eë“±ë¡ëœ Metadataë¡œ íŠ¹ì • í´ë˜ìŠ¤ë‚˜ ë©”ì„œë“œë¥¼ í•„í„°ë§í•˜ì—¬ ì›í•˜ëŠ” ì‘ì—…ì„ í•˜ë©´ ë©ë‹ˆë‹¤.\u003c/li\u003e\u003c/ol\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003chr class=\"wp-block-separator\"/\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch1\u003eChapter2. ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°ì½”ë ˆì´í„°\u003c/h1\u003e\n\n\n\n\u003cp\u003eProviderì— ì ‘ê·¼ì´ í•„ìš”ì—†ëŠ” ê²½ìš° ì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ êµ¬í˜„í•˜ë©´ ë  ê²ƒì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë©”íƒ€ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” NestJS ë°ì½”ë ˆì´í„°ë¥¼ ì¼ë°˜ ë°ì½”ë ˆì´í„°ì™€ í•¨ê»˜ ì‚¬ìš©í•´ë„ ê´œì°®ì„ê¹Œìš”?\u003c/p\u003e\n\n\n\n\u003cp\u003eê²°ë¡ ë¶€í„° ë§í•˜ìë©´ ë‘˜ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ë²„ê·¸ê°€ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch3\u003eì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ ì‚¬ìš©í•˜ë©´ ì•ˆë˜ëŠ” ì´ìœ \u003c/h3\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” ë‹¤ë¥¸ ë°ì½”ë ˆì´í„°ì™€ í•¨ê»˜ ì“°ì´ëŠ” ê²½ìš°, ê¸°ì¡´ ë©”ì„œë“œê°€ ë®ì–´ì”Œì›Œì§€ë©´ì„œ í”„ë¡œí† íƒ€ì…ì— ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-18\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnError\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ehandler: (e: Error\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-title\"\u003evoid\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etarget: object, key?: any, descriptor?: any\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e originMethod = descriptor.value;\n    descriptor.value = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e originMethod.call(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e, ...args);\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n        handler(error);\n      }\n    };\n  };\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-18\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eOnError ë°ì½”ë ˆì´í„°ëŠ” ê¸°ì¡´ ë©”ì„œë“œë¥¼ ìƒˆë¡œìš´ ë©”ì„œë“œë¡œ ë®ì–´ì”Œì›ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eì•„ë˜ ì½”ë“œì—ì„œëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ” RegisterMetadata ë°ì½”ë ˆì´í„°ì™€ OnError ë°ì½”ë ˆì´í„°ë¥¼ í•¨ê»˜ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë°ì½”ë ˆì´í„° ì„ ì–¸ ìˆœì„œì— ë”°ë¼ ê¸°ì¡´ì— ë“±ë¡ëœ ë©”íƒ€ë°ì´í„°ëŠ” ì‚¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eì•„ë˜ ë©”ì„œë“œ ì¤‘ì— \u003ccode\u003eReflect.getMetadata\u003c/code\u003eë¥¼ í–ˆì„ ë•Œ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§€ëŠ” ë©”ì„œë“œëŠ” ë¬´ì—‡ì¼ê¹Œìš”?\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-19\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestService\u003c/span\u003e \u003c/span\u003e{\n  @OnError(\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log)\n  @RegisterMetadata(\u003cspan class=\"hljs-string\"\u003e'value'\u003c/span\u003e)\n  test() {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'error'\u003c/span\u003e);\n  }\n\n  @RegisterMetadata(\u003cspan class=\"hljs-string\"\u003e'value2'\u003c/span\u003e)\n  @OnError(\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log)\n  test2() {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'error'\u003c/span\u003e);\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-19\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eì •ë‹µì€ test ë©”ì„œë“œì…ë‹ˆë‹¤. ì‹¤í–‰ ê²°ê³¼ëŠ” \u003ca rel=\"noreferrer noopener\" href=\"https://www.typescriptlang.org/play?noImplicitAny=false\u0026amp;noImplicitThis=false\u0026amp;ssl=54\u0026amp;ssc=89\u0026amp;pln=51\u0026amp;pc=1#code/PTAEEsFsAcHsCcAuoDk8CmAzANugxogLSTqICGAJmeSgFC16wB2AzsgMqkCypl1ZoALygAPAGkhoNvHBMA5gBpQANUlkmATwB8AClqhQJclXJj0GgFygxC-Yd4myystgCu6K8tsBKIVtAA3naMrLC4AHTYsHI6KJyIPMb8oICTy4AANSjewcxsoBT4CNQIAGJkBAgakjrk8HKkVrAARgBW+IhKANbmAPxW6hpK+Sx4MtCICL2g-b6C-kEGBuCYoDpDI+BjCL7zCwYhLGHokdGxgCpdgAMLgA7NgC7jgAyLoICPLYC6HShKRnzkzm7oWbsGAEpYXAEcL5TCydCJD5kHTvRxmAb2JKfFzuQboYajcbwcIAN1RPwA3HZdhhEK54Ew8hj1pt4MTdgBfOyMhnUxjwIrwUrleAacJiACiAE1JHD+Ai2WSKVT8hyuTzsRpiaz6JhXEwCOBmKAAPJMQXweAIHQAC3UFFw8CsOg8oENxvgM38uNg4Ao22yoQiURiACJ9Q6EKk0n7vFLSDKVjU6ogGi02p0en1NOjMRtsZNpn5AiTQPtDsd-YGjcHACdDgEjVqyAC1XABhDoEAds2AFtHAA8jgAY6sNsvY5ZAIcByWSJU2wCiSNZYhB4gld6npulT75VcLLsi1FgpjQAbQAus7c39QIg+fuD6BpZTQH2B0whyPwngXNhqqbwCwlMvwqu5Cxw3mDIz82oPBTRWdBS2tKZNE9U9QHNJhLTA21wN-A9mSZNlVWZBge1Af5BQAcQASXYAAVQV-gAfS4QUSIAQQAEVoujJHYDRIEaMJYjwojSPIqiaIYpjaMybDWGQQEBzYMCoUcKp8W+KxpFkOQ93iGT+B0bjiLIyjqLoxi6KUeT3CyBhsDIFgWFAEiMUQTh4FxcA8HQE8AAES0dHQCx9aJflAVyJNfRBpIcDSUGM9ARIMYK2B0aCFkQU1jQAd1AJh0FSoN4FiMDHUyDD6AMAL0Ek4L4HU8hYgigAmKL-I8k1vKOX0-JixBqrik9oqS2BUvSzLwJy8D8pZWgsP2ZA2vsxznMkfrrNs6anPQOL6CaotYjapFoVeXCgTacJYwqmEtN43SBIM2ilCmsCZqONrvCydbfU22zqu2xxdsBHADqO0LKtOnT+P0oTrsW27lvCNrqseoA\" target=\"_blank\"\u003e\u003cstrong\u003eíƒ€ì…ìŠ¤í¬ë¦½íŠ¸ í”Œë ˆì´ê·¸ë¼ìš´ë“œ\u003c/strong\u003eì—ì„œ\u003c/a\u003e ì§ì ‘ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-20\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e testService = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TestService()\n\n\u003cspan class=\"hljs-comment\"\u003e// undefined\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'test metadata'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getMetadata(REGISTER_METADATA, testService.test))\n\u003cspan class=\"hljs-comment\"\u003e// value2\u003c/span\u003e\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'test2 metadata'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getMetadata(REGISTER_METADATA, testService.test2))\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-20\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eì™œ ì´ë ‡ê²Œ ë˜ëŠ” ê±¸ê¹Œìš”? ë°ì½”ë ˆì´í„°ì˜ ì‹¤í–‰ ìˆœì„œê°€ íŒíŠ¸ì…ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cem\u003egâˆ˜f(x) = g(f(x))\u003c/em\u003e ì™€ ê°™ì€ í•©ì„± í•¨ìˆ˜ê°€ ìˆì„ ë•Œ ì„ ì–¸ì€ \u003cem\u003eg\u003c/em\u003eê°€ \u003cem\u003ef\u003c/em\u003eë³´ë‹¤ ë¨¼ì € ë˜ì—ˆì§€ë§Œ ì‹¤í–‰ì€ \u003cem\u003ef\u003c/em\u003e í•¨ìˆ˜ê°€ ë¨¼ì € ì‹¤í–‰ë©ë‹ˆë‹¤. ë§ˆì°¬ê°€ì§€ë¡œ \u003cstrong\u003eë°ì½”ë ˆì´í„°ëŠ” í‰ê°€ë  ë•ŒëŠ” ì„ ì–¸ëœ ìˆœì„œëŒ€ë¡œ ìœ„ì—ì„œ ì•„ë˜ë¡œ, ì‹¤í–‰ë  ë•ŒëŠ” ì•„ë˜ì—ì„œ ìœ„ë¡œ ì‹¤í–‰ë©ë‹ˆë‹¤\u003c/strong\u003e.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"828\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1024x828.png\" alt=\"\" class=\"wp-image-1124\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1024x828.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-300x243.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-768x621.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1536x1243.png 1536w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51-1568x1268.png 1568w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-8.21.51.png 1916w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003eRegisterMetadataì—ì„œ \u003ccode\u003eReflector.defineMetadata\u003c/code\u003eê°€ ë¨¼ì € ì‹¤í–‰ë˜ê³  ê·¸ ë‹¤ìŒ OnError ë°ì½”ë ˆì´í„°ê°€ ê¸°ì¡´ í•¨ìˆ˜ë¥¼ ë®ì–´ì”Œì›ë‹ˆë‹¤. \u003c/p\u003e\n\n\n\n\u003cp\u003eë®ì–´ì”Œì›Œì§€ë©´ì„œ ê¸°ì¡´ì— ë©”íƒ€ë°ì´í„°ê°€ ì €ì¥ëœ í”„ë¡œí† íƒ€ì…ê³¼ ëŠê¸°ê²Œ ë˜ê³  \u003ccode\u003etest\u003c/code\u003e ë©”ì„œë“œì—ì„œ ë©”íƒ€ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003eì´ëŸ° ì‚¬ë¡€ë„ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-21\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTossScheduler\u003c/span\u003e \u003c/span\u003e{\n\n  @OnError(\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log)\n  @Cron(\u003cspan class=\"hljs-string\"\u003e'*/10 * * * *'\u003c/span\u003e)\n  task() {\n    \u003cspan class=\"hljs-comment\"\u003e// do something\u003c/span\u003e\n  }\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-21\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003e@nestjs/schedule\u003c/code\u003e ì˜ Cron ë°ì½”ë ˆì´í„° ì—­ì‹œ CRON ì‹¬ë³¼ì„ ë©”íƒ€ë°ì´í„°ë¡œ ë“±ë¡í•©ë‹ˆë‹¤. ëª¨ë“ˆì´ ì´ˆê¸°í™”ë˜ëŠ” ì‹œì ì— í•´ë‹¹ ë©”íƒ€ë°ì´í„°ê°€ ë“±ë¡ëœ ë©”ì„œë“œë“¤ì„ ì¡°íšŒí•˜ì—¬ cron jobì„ ë“±ë¡í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eí•˜ì§€ë§Œ OnError ë°ì½”ë ˆì´í„°ê°€ Cron ë°ì½”ë ˆì´í„° ì´í›„ì— ì‹¤í–‰ë¨ìœ¼ë¡œì¨ ë©”íƒ€ë°ì´í„°ê°€ ì‚¬ë¼ì§€ê²Œ ë˜ê³ , NestJSì—ì„œëŠ” task ë©”ì„œë“œë¥¼ ì°¾ì§€ ëª»í•´ cron jobì„ ë“±ë¡í•˜ì§€ ëª»í•˜ê²Œ ë©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eì´ë ‡ë“¯ ì¼ë°˜ ë©”ì„œë“œ ë°ì½”ë ˆì´í„°ë¥¼ NestJS í™˜ê²½ì—ì„œ ê·¸ëƒ¥ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ ê°œë°œìì˜ ì‹¤ìˆ˜ì— ì˜í•´ ì½”ë“œì˜ ë™ì‘ì´ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì½”ë ˆì´í„° ì‹¤í–‰ ìˆœì„œë‚˜ ë©”íƒ€ë°ì´í„° í™˜ê²½ì— ëŒ€í•´ ì•Œê³  ìˆì§€ ëª»í•˜ë‹¤ë©´ ì´ëŸ° ë¥˜ì˜ ë²„ê·¸ë¥¼ ì°¾ëŠ” ë°ëŠ” ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦´ ì§€ë„ ëª¨ë¦…ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ì„œëŠ” ë©”íƒ€ë°ì´í„°ë¥¼ ê³ ë ¤í•˜ì—¬ ë°ì½”ë ˆì´í„°ë¥¼ ìƒì„±í•´ì•¼ í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ë°ì½”ë ˆì´í„°\u003c/h2\u003e\n\n\n\n\u003cp\u003eë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•˜ëŠ” ê°€ì¥ naiveí•œ ë°©ë²•ì€, ì˜¤ë²„ë¼ì´ë”© ë˜ê¸° ì „ì— ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•´ë‘” ë’¤ ì˜¤ë²„ë¼ì´ë”©ì´ ëë‚˜ë©´ ë©”íƒ€ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë“±ë¡í•´ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eOnErrorPreserveMeta ì½”ë“œ\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-22\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnErrorPreserveMeta\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ehandler: (e: Error\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-title\"\u003evoid\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etarget: object, key?: any, descriptor?: any\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e originMethod = descriptor.value;\n\n    \u003cspan class=\"hljs-comment\"\u003e//  ì˜¤ë²„ë¼ì´ë”© ë˜ê¸° ì „ì˜ ë©”íƒ€ë°ì´í„°ë¥¼ ì €ì¥í•´ë†¨ë‹¤ê°€\u003c/span\u003e\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e metaKeys = \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getOwnMetadataKeys(descriptor.value);\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e metas = metaKeys.map(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003ek\u003c/span\u003e) =\u0026gt;\u003c/span\u003e [\n      k,\n      \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getMetadata(k, descriptor.value),\n    ]);\n\n    descriptor.value = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e originMethod.call(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e, ...args);\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n        handler(error);\n      }\n    };\n\n    \u003cspan class=\"hljs-comment\"\u003e// ì˜¤ë²„ë¼ì´ë”© ëœ ë©”ì„œë“œì— ëŒ€í•´ ë©”íƒ€ë°ì´í„° ì¬ë“±ë¡\u003c/span\u003e\n    metas.forEach(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e[k, v]\u003c/span\u003e) =\u0026gt;\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.defineMetadata(k, v, descriptor.value));\n  };\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-22\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003eì§ê´€ì ì´ì§€ë§Œ ë§¤ë²ˆ Decoratorë¥¼ ë§Œë“¤ì–´ì¤„ ë•Œë§ˆë‹¤ ì´ëŸ° ê³¼ì •ì„ ê±°ì³ì•¼ í•˜ëŠ” ê²Œ ë¶ˆí¸í•©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ëŠ” ì¢€ ë” ê°„ë‹¨í•œ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eí”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•´ ë©”íƒ€ë°ì´í„° ìœ ì§€í•˜ê¸°\u003c/h2\u003e\n\n\n\n\u003cp\u003eSetMetadata íŒŒíŠ¸ì—ì„œ Reflect.defineMetadata ëŠ” íƒ€ê²Ÿ ê°ì²´ì— [[Metadata]] ë¼ëŠ” ë‚´ë¶€ ìŠ¬ë¡¯ì„ ì •ì˜í•œë‹¤ê³  ë§ì”€ë“œë ¸ìŠµë‹ˆë‹¤. \u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"405\" src=\"https://wp.toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-1024x405.png\" alt=\"\" class=\"wp-image-1126\" srcset=\"https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-1024x405.png 1024w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-300x119.png 300w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56-768x304.png 768w, https://toss.tech/wp-content/uploads/2022/11/á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º-2022-11-18-á„‹á…©á„’á…®-9.09.56.png 1466w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003eë‚´ë¶€ ìŠ¬ë¡¯ ë˜í•œ í”„ë¡œí† íƒ€ì…ì˜ ë‚´ë¶€ í”„ë¡œí¼í‹°ì´ë‹ˆ, ê¸°ì¡´ í”„ë¡œí† íƒ€ì…ì— ë©”íƒ€ë°ì´í„° ë‚´ë¶€ ìŠ¬ë¡¯ì´ ì €ì¥ë˜ì–´ìˆì„ ê²ƒì…ë‹ˆë‹¤. ë”°ë¼ì„œ \u003cstrong\u003eìƒˆë¡­ê²Œ ì •ì˜í•œ ë©”ì„œë“œì— ê¸°ì¡´ í”„ë¡œí† íƒ€ì…ì„ ì—°ê²°í•´ì£¼ë©´ ë©ë‹ˆë‹¤.\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003eë³€ê²½ëœ OnErrorPreserveMeta ì½”ë“œ\u003c/strong\u003e\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-23\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eOnErrorPreserveMeta\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003ehandler: (e: Error\u003c/span\u003e) =\u0026gt; \u003cspan class=\"hljs-title\"\u003evoid\u003c/span\u003e) \u003c/span\u003e{\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003etarget: object, key?: any, descriptor?: any\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e originMethod = descriptor.value;\n\n    \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e wrapper = \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003e...args: any[]\u003c/span\u003e) =\u0026gt;\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003etry\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e originMethod.call(\u003cspan class=\"hljs-keyword\"\u003ethis\u003c/span\u003e, ...args);\n      } \u003cspan class=\"hljs-keyword\"\u003ecatch\u003c/span\u003e (error) {\n        handler(error);\n      }\n    };\n\n    \u003cspan class=\"hljs-built_in\"\u003eObject\u003c/span\u003e.setPrototypeOf(wrapper, originMethod); \u003cspan class=\"hljs-comment\"\u003e// ì´ ì¤„ë§Œ ì¶”ê°€\u003c/span\u003e\n    descriptor.value = wrapper;\n  };\n}\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-23\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003ccode\u003eObject.setPrototypeOf(arg1, arg2)\u003c/code\u003e ì€ arg1 ê°ì²´ì˜ í”„ë¡œí† íƒ€ì…ì„ arg2ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eê¸°ì¡´ ë©”ì„œë“œë¥¼ ë®ì–´ì”Œìš´ í›„ \u003ccode\u003eObject.setPrototypeOf(wrapper, originMethod)\u003c/code\u003eë¡œ originMethodë¥¼ wrapperì˜ í”„ë¡œí† íƒ€ì…ìœ¼ë¡œ ì„¤ì •í•´ì£¼ë©´ ë©”íƒ€ë°ì´í„°ê°€ ìœ ì§€ë©ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\u003cpre class=\"wp-block-code\" aria-describedby=\"shcb-language-24\" data-shcb-language-name=\"JavaScript\" data-shcb-language-slug=\"javascript\"\u003e\u003cdiv\u003e\u003ccode class=\"hljs language-javascript\"\u003e@Injectable()\n\u003cspan class=\"hljs-class\"\u003e\u003cspan class=\"hljs-keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"hljs-title\"\u003eTestService\u003c/span\u003e \u003c/span\u003e{\n  @OnError(\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log)\n  @RegisterMetadata(\u003cspan class=\"hljs-string\"\u003e'value'\u003c/span\u003e)\n  test() {\n    \u003cspan class=\"hljs-keyword\"\u003ethrow\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003eError\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'error'\u003c/span\u003e);\n  }\n}\n\n\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e testService = \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e TestService()\n\n\u003cspan class=\"hljs-built_in\"\u003econsole\u003c/span\u003e.log(\u003cspan class=\"hljs-string\"\u003e'test metadata'\u003c/span\u003e, \u003cspan class=\"hljs-built_in\"\u003eReflect\u003c/span\u003e.getMetadata(REGISTER_METADATA, testService.test)) \u003cspan class=\"hljs-comment\"\u003e// 'value'\u003c/span\u003e\u003c/code\u003e\u003c/div\u003e\u003csmall class=\"shcb-language\" id=\"shcb-language-24\"\u003e\u003cspan class=\"shcb-language__label\"\u003eCode language:\u003c/span\u003e \u003cspan class=\"shcb-language__name\"\u003eJavaScript\u003c/span\u003e \u003cspan class=\"shcb-language__paren\"\u003e(\u003c/span\u003e\u003cspan class=\"shcb-language__slug\"\u003ejavascript\u003c/span\u003e\u003cspan class=\"shcb-language__paren\"\u003e)\u003c/span\u003e\u003c/small\u003e\u003c/pre\u003e\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003chr class=\"wp-block-separator\"/\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch1\u003eë§ˆì¹˜ë©°\u003c/h1\u003e\n\n\n\n\u003cp\u003eë©”íƒ€ë°ì´í„°ì™€ NestJSì˜ \u003ccode\u003eDiscoveryModule\u003c/code\u003e ì„ ì‚¬ìš©í•˜ì—¬ NestJSì˜ IoC ì»¨í…Œì´ë„ˆì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„°, ê·¸ë¦¬ê³  ë©”íƒ€ë°ì´í„°ë¥¼ ìœ ì§€í•  ìˆ˜ ìˆëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ìŠµë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eë©”íƒ€ë°ì´í„° íƒœê¹…, DiscoveryModule, í”„ë¡œí† íƒ€ì…ì„ ì‚¬ìš©í•´ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ ê¸€ì„ í†µí•´ ë”ìš± ë” NestJSì˜ Aop íŒ¨í„´ì— ë§ëŠ” í”„ë¡œê·¸ë˜ë°ì„ í•˜ê²Œ ë˜ì—ˆê¸°ë¥¼ ë°”ëë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003eë˜í•œ í† ìŠ¤ Node.js ì±•í„°ëŠ” í† ìŠ¤ì˜ ë‹¤ì–‘í•œ ì œí’ˆê³¼ ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œì„ ìœ„í•´ íŒ€ì›ë“¤ì˜ ì§€ì†ì ì¸ ì„±ì¥ì´ ì¤‘ìš”í•˜ë‹¤ê³  ë¯¿ìœ¼ë©°, ì´ë¥¼ ìœ„í•´ ì½”ë“œ ë¦¬ë·°, ìŠ¤í„°ë””ì™€ ì—”ì§€ë‹ˆì–´ë§ ì„¸ë¯¸ë‚˜ ë“±ì„ í†µí•´ ê¾¸ì¤€íˆ ê³µë¶€í•˜ê³  ê³µìœ í•˜ëŠ” ìë¦¬ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë‹ˆ ë§ì€ ê´€ì‹¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.\u003c/p\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003chr class=\"wp-block-separator\"/\u003e\n\n\n\n\u003cp\u003e\u003cbr\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003eReferences\u003c/h2\u003e\n\n\n\n\u003cul\u003e\u003cli\u003e\u003ca href=\"https://zuminternet.github.io/nestjs-custom-decorator/\"\u003ehttps://zuminternet.github.io/nestjs-custom-decorator/\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/nestjs/nest\"\u003ehttps://github.com/nestjs/nest\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://github.com/nestjs/swagger/issues/217\"\u003ehttps://github.com/nestjs/swagger/issues/217\u003c/a\u003e\u003c/li\u003e\u003cli\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\"\u003ehttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf\u003c/a\u003e\u003c/li\u003e\u003c/ul\u003e\n\n\n\n\u003cp\u003e\u003c/p\u003e\n","date":"2022-11-22T00:03:49","excerpt":"\u003cp\u003eNestJSì—ì„œ ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” NestJSì˜ DIì™€ ë©”íƒ€ í”„ë¡œê·¸ë˜ë° í™˜ê²½ ë“±ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. ì–´ë–»ê²Œ í•˜ë©´ ì´ëŸ¬í•œ NestJS í™˜ê²½ì— ë§ëŠ” ë°ì½”ë ˆì´í„°ë¥¼ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ ê³ ë¯¼í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\u003c/p\u003e\n","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-300x150.png 300w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02-768x384.png 768w, https://toss.tech/wp-content/uploads/2022/11/tech-article-nest-js-02.png 1200w"}},"metadata":{"ogBackground":"https://static.toss.im/assets/tech-blog/og-image/tech-article-nest-js-02-og.png","ogImageTitle":"NestJS í™˜ê²½ì— ë§ëŠ”\r\nCustom Decorator ë§Œë“¤ê¸°","ogGenerateImage":true,"recruitTitle":"í† ìŠ¤ Node.js Chapter ì±„ìš© ê³µê³ ","recruitUrl":"https://toss.im/career/jobs?search=node.js","form1Url":"https://8cv5m2yf13x.typeform.com/tossengineering#no=998\u0026title=NestJS_í™˜ê²½ì—_ë§ëŠ”_Custom_Decorator_ë§Œë“¤ê¸°\u0026reaction=good","form2Url":"https://8cv5m2yf13x.typeform.com/tossengineering#no=998\u0026title=NestJS_í™˜ê²½ì—_ë§ëŠ”_Custom_Decorator_ë§Œë“¤ê¸°\u0026reaction=bad","formDescription":"ì¢‹ì•˜ëŠ”ì§€, ì•„ì‰¬ì› ëŠ”ì§€, ì•„ë˜ ì´ëª¨ì§€ë¥¼ ëˆŒëŸ¬ ì˜ê²¬ì„ ë“¤ë ¤ì£¼ì„¸ìš”.","form1Label":"ğŸ˜","form2Label":"ğŸ¤”","recruitDescription":null},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}},{"node":{"id":"dGVybTox","name":"Uncategorized"}}]},"author":{"node":{"id":"dXNlcjoyOA==","firstName":"í˜„ì§€","lastName":"ì†¡","description":"í† ìŠ¤ ì½”ì–´, ì¦ê¶Œì—ì„œ ê¸ˆìœµì— í•„ìš”í•œ ëª¨ë“  ìë™í™” ì„œë¹„ìŠ¤ë¥¼ ê°œë°œí•˜ê³  ìˆìŠµë‹ˆë‹¤ :)","avatar":{"url":"https://toss.tech/wp-content/uploads/2022/11/IMG_1399-312x312.jpg"},"role":{"role":"Node.js Developer"}}}},"relatedArticles":[{"title":"ë¬´ì§€ì„±ìœ¼ë¡œ ì‚¬ìš©í•œ í—¬ìŠ¤ ì²´í¬ê°€ ë¶ˆëŸ¬ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ” ì°¸ì‚¬","slug":"how-to-work-health-check-in-spring-boot-actuaotr","date":"2023-04-01T15:38:57","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/04/00009-889461687-300x300.png 300w, https://toss.tech/wp-content/uploads/2023/04/00009-889461687-150x150.png 150w, https://toss.tech/wp-content/uploads/2023/04/00009-889461687.png 512w"}},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}},{"node":{"id":"dGVybTox","name":"Uncategorized"}}]}},{"title":"ESLintì™€ ASTë¡œ ì½”ë“œ í€„ë¦¬í‹° ë†’ì´ê¸°","slug":"improving-code-quality-via-eslint-and-ast","date":"2023-03-31T15:47:53","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/03/center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/center.png 1200w"}},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}}]}}]},"__N_SSP":true},"page":"/article/[slug]","query":{"slug":"nestjs-custom-decorator"},"buildId":"QqBxegmptuUDYc8oCREsD","assetPrefix":"https://static.toss.im/frontend/toss-tech","runtimeConfig":{"ENV":"live","NODE_ENV":"production","PORT":"3000","ASSET_PREFIX":"https://static.toss.im/frontend/toss-tech","SERVICE":"toss-tech","SENTRY":{"DSN":"https://5eff657ed6ef486fb8af2dc5f9508abd@sentry.io/1242586","PUBLIC_KEY":"5eff657ed6ef486fb8af2dc5f9508abd","RELEASE":"toss-tech_1.0.103","SERVICE":"toss-tech","SERVICE_VERSION":"1.0.103"},"RENDER_TYPE":"ssr"},"isFallback":false,"gssp":true,"customServer":true,"scriptLoader":[]}</script></body></html>