<!DOCTYPE html><html><head><link rel="stylesheet" href="https://static.toss.im/tds-pc/3.232.0/main.css"/><link rel="alternate" title="토스 기술 블로그, 토스테크 글 목록" type="application/rss+xml" href="/rss.xml"/><link rel="alternate" title="토스 기술 블로그, 토스테크 글 목록" type="application/atom+xml" href="/atom.xml"/><link rel="stylesheet" type="text/css" href="//static.toss.im/tps/main.css"/><link rel="stylesheet" type="text/css" href="//static.toss.im/tps/others.css"/><link rel="stylesheet" href="https://static.toss.im/tossface-font/tossface.css"/><link rel="alternate" title="토스 기술 블로그, 토스테크 글 목록" type="application/activitystream+json" href="/feed.json"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover"/><meta name="author" content="Viva Republica"/><link rel="preconnect" href="https://static.toss.im"/><link rel="shortcut icon" href="https://static.toss.im/tds/favicon/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="https://static.toss.im/tds/favicon/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="https://static.toss.im/tds/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="https://static.toss.im/tds/favicon/favicon-48x48.png"/><link rel="icon" type="image/png" sizes="196x196" href="https://static.toss.im/tds/favicon/favicon-196x196.png"/><link rel="apple-touch-icon" sizes="57x57" href="https://static.toss.im/tds/favicon/apple-touch-icon-57x57.png"/><link rel="apple-touch-icon" sizes="72x72" href="https://static.toss.im/tds/favicon/apple-touch-icon-72x72.png"/><link rel="apple-touch-icon" sizes="114x114" href="https://static.toss.im/tds/favicon/apple-touch-icon-114x114.png"/><link rel="apple-touch-icon" sizes="120x120" href="https://static.toss.im/tds/favicon/apple-touch-icon-120x120.png"/><link rel="apple-touch-icon" sizes="144x144" href="https://static.toss.im/tds/favicon/apple-touch-icon-144x144.png"/><link rel="apple-touch-icon" sizes="152x152" href="https://static.toss.im/tds/favicon/apple-touch-icon-152x152.png"/><meta name="msapplication-TileImage" content="https://static.toss.im/tds/favicon/mstile-144x144.png"/><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-PQ5NV18TH1"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'G-PQ5NV18TH1');</script><script>(function(h,o,t,j,a,r){
    h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
    h._hjSettings={hjid:2399367,hjsv:6};
    a=o.getElementsByTagName('head')[0];
    r=o.createElement('script');r.async=1;
    r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
    a.appendChild(r);
})(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');</script><title>tosspayments-restdocs: 선언형 문서 작성 라이브러리</title><meta name="twitter:creator" content="Viva Republica"/><meta name="twitter:site" content="@Toss_service"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:title" content="tosspayments-restdocs: 선언형 문서 작성 라이브러리"/><meta name="twitter:title" content="tosspayments-restdocs: 선언형 문서 작성 라이브러리"/><meta property="og:description" content="REST Docs 를 최소한의 코드로 작성하면서 변화에도 더 유연하게 대처할 수 있는 tosspayments-restdocs 라이브러리와, 라이브러리에 녹인 기술들을 소개합니다.
"/><meta name="twitter:description" content="REST Docs 를 최소한의 코드로 작성하면서 변화에도 더 유연하게 대처할 수 있는 tosspayments-restdocs 라이브러리와, 라이브러리에 녹인 기술들을 소개합니다.
"/><meta property="og:image" content="https://toss.tech/wp-content/uploads/2023/03/00017-3291509353.png?v=2"/><meta name="twitter:image" content="https://toss.tech/wp-content/uploads/2023/03/00017-3291509353.png?v=2"/><meta name="next-head-count" content="36"/><meta name="next-font-preconnect"/><link rel="preload" href="https://static.toss.im/frontend/toss-tech/_next/static/css/6486c46747f65f89.css" as="style"/><link rel="stylesheet" href="https://static.toss.im/frontend/toss-tech/_next/static/css/6486c46747f65f89.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/webpack-a37367524f3d9e47.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/framework-5201cf011975c339.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/main-4ffd67ad72332dfe.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/pages/_app-02461bb4136bedab.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/821-c2f4db054c6f6b42.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/935-149f2da2961c2b08.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/chunks/pages/article/%5Bslug%5D-bf5a24035d1301de.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_buildManifest.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_ssgManifest.js" defer=""></script><script src="https://static.toss.im/frontend/toss-tech/_next/static/QqBxegmptuUDYc8oCREsD/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><style data-emotion="css-global ubpbb5">html,body{padding:0;margin:0;font-family:'Toss Product Sans';}button{font-family:'Toss Product Sans';}p{margin:0;}</style><style data-emotion="css kcwxxw">.css-kcwxxw{position:-webkit-sticky;position:sticky;top:0;height:59px;}</style><nav class="p-navbar p-navbar--bottom-border css-kcwxxw"><div class="p-container p-container--default"><div class="p-container__inner p-navbar__inner-container"><div class="p-navbar__logo-container"><a class="p-navbar__logo-icon" href="/tech"><span class="icon p-icon" aria-hidden="true" role="presentation" style="height:auto;width:auto;min-width:24px"></span></a></div><div class="p-navbar__right-on-mobile"></div><div class="p-navbar__content" aria-expanded="false" aria-hidden="true"><ul class="p-navbar__menu"></ul><ul class="p-navbar__menu"><li class="p-navbar__item"><a>디자인</a></li><li class="p-navbar__item"><a>개발</a></li><li class="p-navbar__item p-navbar__button-item"><button class="p-button p-button--primary p-button--inline p-button--fill p-button--small padding--s p-navbar__button" type="button" aria-disabled="false">채용 바로가기</button></li></ul></div></div></div></nav><style data-emotion="css 1nquki8">.css-1nquki8{max-width:700px;margin-bottom:80px;}.css-1nquki8 .has-extra-large-font-size{font-size:20px;}.css-1nquki8 .has-large-font-size{font-size:18px;}.css-1nquki8 .has-small-font-size{font-size:14px;}.css-1nquki8 .has-extra-small-font-size{font-size:12px;}@media (max-width: 700px){.css-1nquki8{margin-bottom:64px;}}</style><div class="p-container p-container--default css-1nquki8"><div class="p-container__inner"><style data-emotion="css gtmad4">.css-gtmad4>*:not(style)~*:not(style){margin-top:54px;}@media (max-width: 700px){.css-gtmad4>*:not(style)~*:not(style){margin-top:48px;}}</style><article class="css-gtmad4"><style data-emotion="css 1095auh">.css-1095auh>*:not(style)~*:not(style){margin-top:20px;}</style><header class="css-1095auh"><style data-emotion="css iffq4o">.css-iffq4o{width:100%;margin-top:36px;border-radius:12px;}</style><img srcSet="https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353.png 1200w" alt="tosspayments-restdocs: 선언형 문서 작성 라이브러리" class="css-iffq4o e132k2574"/><style data-emotion="css 117sh4z">.css-117sh4z{margin-top:36px;margin-bottom:0;font-size:48px;font-weight:700;line-height:1.25;color:#333d4b;word-break:keep-all;overflow-wrap:break-word;}@media (max-width: 700px){.css-117sh4z{margin-top:28px;font-size:32px;}}</style><h1 class="css-117sh4z e132k2573">tosspayments-restdocs: 선언형 문서 작성 라이브러리</h1><style data-emotion="css s5xdrg">.css-s5xdrg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><section class="css-s5xdrg e2c667z4"><style data-emotion="css 1hdebld">.css-1hdebld{grid-area:image;width:48px;height:48px;border-radius:156px;margin-right:14px;}</style><img src="https://toss.tech/wp-content/uploads/2022/09/Profile-2022-312x312.png" alt="" class="css-1hdebld e2c667z3"/><div><style data-emotion="css 14d9k6d">.css-14d9k6d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;grid-area:outline;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding-top:8px;font-size:17px;margin-bottom:2px;}@media (max-width: 700px){.css-14d9k6d>*+*{margin-top:4px;margin-left:0;}}</style><div class="css-14d9k6d e2c667z2"><style data-emotion="css 9krnkp">.css-9krnkp{grid-area:name;margin:0;font-size:17px;font-weight:600;color:#4e5968;white-space:nowrap;}</style><h3 class="css-9krnkp e2c667z1">이준희</h3><h3 class="css-9krnkp e2c667z1">ㆍ<!-- -->Server Developer</h3></div><style data-emotion="css 154r2lc">.css-154r2lc{font-size:14px;line-height:1.5;color:#8b95a1;}</style><div class="css-154r2lc e2c667z0">2023. 3. 22</div></div></section></header><style data-emotion="css 1k1kkv6">.css-1k1kkv6{font-size:18px;line-height:1.7;color:var(--grey700);font-size:18px;word-break:keep-all;overflow-wrap:break-word;counter-reset:p-post-ol 0;}.css-1k1kkv6 h2{margin:2.2em 0 0.6em 0;font-size:25px;font-weight:600;line-height:1.4;color:var(--grey900);}.css-1k1kkv6 h3{margin:2.2em 0 0.6em 0;font-size:22px;font-weight:600;line-height:1.6;color:var(--grey900);}.css-1k1kkv6 h4{margin:2.2em 0 0.3em 0;font-size:19px;font-weight:600;line-height:1.6;color:var(--grey700);}.css-1k1kkv6 p{margin:1em 0;}.css-1k1kkv6 p code,.css-1k1kkv6 li code{font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-size:0.9em;background-color:var(--greyOpacity100);border:1px solid var(--greyOpacity200);border-radius:3px;}.css-1k1kkv6 a{color:var(--blue700);}.css-1k1kkv6 pre{margin:2em -24px;}@media (max-width: 700px){.css-1k1kkv6 pre{margin:2em 0;}}.css-1k1kkv6 pre code{display:block;padding:16px 24px;overflow-x:auto;font-family:Consolas,Menlo,Monaco,source-code-pro,Courier New,monospace;font-size:0.9em;line-height:1.5;word-wrap:normal;white-space:pre;background-color:var(--greyOpacity100);border:1px solid var(--greyOpacity200);border-radius:12px;}.css-1k1kkv6 figure{margin:2em 0;overflow:hidden;border-radius:12px;width:100%;}.css-1k1kkv6 figure.aligncenter{text-align:center;}.css-1k1kkv6 ol,.css-1k1kkv6 ul{margin:0 0 16px;list-style:none;}.css-1k1kkv6 ol li,.css-1k1kkv6 ul li{position:relative;margin-bottom:8px;}.css-1k1kkv6 ol li:before,.css-1k1kkv6 ul li:before{position:absolute;left:0;}.css-1k1kkv6 ol li ol,.css-1k1kkv6 ul li ol{padding-left:0;margin:8px 0 0 -16px;}.css-1k1kkv6 ol li ul,.css-1k1kkv6 ul li ul{padding-left:0;margin-top:8px;}.css-1k1kkv6 ol li p,.css-1k1kkv6 ul li p{margin:0;}.css-1k1kkv6 ol{padding-left:16px;counter-reset:p-post-ol;}.css-1k1kkv6 ol>li{padding-left:32px;counter-increment:p-post-ol;}.css-1k1kkv6 ol>li:before{font-weight:700;font-weight:var(--font-weight-bold);content:counter(p-post-ol) '.';}.css-1k1kkv6 ul{padding-left:16px;}.css-1k1kkv6 ul>li{padding-left:24px;}.css-1k1kkv6 ul>li:before{width:16px;text-align:center;content:'•';}.css-1k1kkv6 figcaption{font-size:0.9em;color:var(--grey600);}.css-1k1kkv6 .wp-block-pullquote{margin:0;}.css-1k1kkv6 blockquote{padding:32px;background:var(--greyOpacity100);border-radius:12px;text-align:left;margin:16px 0 16px 0;}.css-1k1kkv6 blockquote p{color:#333d4b;font-weight:600;margin:0;}.css-1k1kkv6 blockquote cite{font-style:normal;}@media (max-width: 700px){.css-1k1kkv6 blockquote{padding:24px;}}.css-1k1kkv6 .wp-block-embed-youtube iframe{width:100%;border-radius:12px;}.css-1k1kkv6 ol{counter-reset:none;}.css-1k1kkv6 hr{border-top:1px solid #e5e8eb;border-right-style:none;border-left-style:none;border-bottom-style:none;margin:2.5rem 0;}.css-1k1kkv6 figure{display:table;text-align:center;}@media (max-width: 700px){.css-1k1kkv6 figure{width:100%;}}.css-1k1kkv6 figure img,.css-1k1kkv6 figure video{max-width:100%;height:auto;border:1px solid rgba(2,32,71,0.05);border-radius:12px;}.css-1k1kkv6 figure.alignright{float:right;margin:0 0 8px 24px;}@media (max-width: 700px){.css-1k1kkv6 figure.alignright{float:none;margin:0;}}.css-1k1kkv6 figcaption{display:table-caption;text-align:center;white-space:pre-wrap;caption-side:bottom;}.css-1k1kkv6 p:empty::before{content:'';}</style><div class="css-1k1kkv6 e132k2572"><div>
<h1>tosspayments-restdocs: 선언형 문서 작성 라이브러리</h1>



<p><strong>최소한의 코드로 문서 작성하기</strong></p>



<h2>들어가며</h2>



<p>토스페이먼츠에서는 두 가지 장점 때문에 <a href="https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/">Spring REST Docs</a>를 권장하고 있는데요. 첫 번째는 문서 작성 단계부터 API를 통합 테스트할 수 있다는 점, 두 번째는 인터페이스의 의도치 않은 변경을 감지할 수 있다는 점 때문입니다.</p>



<p>하지만 Spring REST Docs에는 단점도 있습니다. 장황한 코드 때문에 가독성이 떨어지고, 코드 반복으로 인해 생산성이 떨어지는 아쉬움이 있었습니다. 이런 문제를 해소하기 위해 Kotlin DSL을 구현해서 반복적이고 지루한 Spring REST Docs 코드 작성에 필요한 노력을 줄이는 방법을 <a href="https://toss.tech/article/kotlin-dsl-restdocs">한규주님의 이전 글 ‘Kotlin으로 DSL 만들기: 반복적이고 지루한 REST Docs 벗어나기’</a>에서 소개했었습니다.</p>



<p>이번에는 나아가 더 높은 가독성, 더 최소화된 코드 중복, 세부 구현 및 의존성 은닉, 마지막으로 확장에 열려있는 특성을 갖춘 문서화 라이브러리 <strong>‘tosspayments-restdocs’</strong>를 소개하고 개발 후기를 공유합니다.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="807" height="1024" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-1-1-807x1024.png" alt="" class="wp-image-2033" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-807x1024.png 807w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-236x300.png 236w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-768x975.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1210x1536.png 1210w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1614x2048.png 1614w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1568x1990.png 1568w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1.png 1822w" sizes="(max-width: 807px) 100vw, 807px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>동일한 컨트롤러를 Spring REST Docs(좌측)와 tosspayments-restdocs(우측)로 문서화했을 때의 차이. 작성한 문서화 코드의 양이 크게 감소했다.</figcaption></figure>



<h2>다시 살펴보기: Spring REST Docs의 문제들</h2>



<p>Spring REST Docs 기반 문서화 코드의 아쉬운 점을 아래 코드를 통해 다시 한번 살펴볼게요.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="816" height="1024" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-2-1.png" alt="" class="wp-image-2035" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1.png 816w, https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1-239x300.png 239w, https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1-768x964.png 768w" sizes="(max-width: 816px) 100vw, 816px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div></figure>



<p><strong>요청 필드 2개, 응답 필드 3개</strong>로 구성된 단순한 <code>PUT</code> 인터페이스지만, 장황하게 작성된 코드 때문에 전체 구조를 한눈에 파악하기 어렵습니다. 이런 구조의 코드는 처음 작성하는 비용이 많이 들 뿐만 아니라 유지보수 비용도 늘립니다. 위 코드의 문제점을 좀 더 구체적으로 살펴보겠습니다.</p>



<h3>1. <strong>코드 중복</strong></h3>



<p>먼저, 같은 내용이 반복적으로 명세에 포함되어 있습니다. 예를 들어 MockMvcResponse와 REST Docs Snippet을 만들기 위해 Path Variable, 그리고 Request Body Field 코드 중복이 발생했습니다.</p>



<p>또한 Request Body값을 MockMvc에 전달하는 과정에서 샘플 데이터를 통해 필드의 타입 및 샘플이 추론 가능함에도 REST Docs Snippet에 불필요하게 다시 명세하고 있습니다.</p>



<h3>2. <strong>불필요한 명령</strong></h3>



<p><code>given()</code>, <code>prettyPrint()</code>, <code>then()</code>, <code>preprocessRequest()</code>, <code>preprocessResponse()</code> 등의 메서드는 인터페이스 명세에 꼭 필요한 핵심이라 하기 어렵습니다. 문서 작성과 관계 없이 빌드에 필요하기 때문에 추가된 사항입니다.</p>



<h3>3. 인터페이스 명세 순서</h3>



<p>실제 HTTP 프로토콜에서는 Request Line → Request Header → Request Body → Response Line → Response Header → Response Body 순으로 페이로드가 만들어집니다.</p>



<p>그러나 위의 예시 코드는 이러한 흐름에 맞춘 자연스러운 명세 작성 대신, MockMvc를 구성하는 기반 기술에 의존하는 명령을 나열하는데 집중하고 있습니다. 그래서 코드를 작성할 때나 읽을 때 모두 코드 블록을 왔다갔다 해야 하는 불편을 겪습니다.</p>



<h3>4. 기반 기술에 강한 의존</h3>



<p>기반 기술에 강하게 의존하고 있기 때문에 기반 기술에 브레이킹 체인지가 생기거나, 유지보수가 중단되면 대응이 어렵습니다.</p>



<p>또, 이렇게 기반 기술에 많이 의존하게 되면 문서를 작성하는 모든 개발자가 기반 기술의 세부 항목을 학습해야 합니다. 가령 MultiPart API, Streaming API, Reactive API 등 다른 형태의 API를 문서화할 때마다 개발자는 사용할 MockMvc의 세부 기능을 각각 학습해야 합니다. 이런 방식은 문서화에 필요한 학습 비용을 높이고 지속적인 대응을 어렵게 만듭니다.</p>



<h1>tosspayments-restdocs로 다시 작성하기</h1>



<p>위 코드를 tosspayments-restdocs 라이브러리를 사용해서 다시 작성한 코드 예시입니다.</p>



<p>생성될 문서를 직관적으로 예측할 수 있고, 기반 기술을 완전히 추상화해서 코드가 절반 이하로 감소했습니다.</p>



<figure class="wp-block-image"><div data-rmiz-wrap="visible"><img src="https://wp.toss.tech/wp-content/uploads/2023/03/image-4-1024x579.png" alt="tosspayments-restdocs를 적용한 결과" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>tosspayments-restdocs를 적용한 결과</figcaption></figure>



<p>이런 개선점을 만든 tosspayments-restdocs 라이브러리에는 선언형 프로그래밍, 타입 추론 개념이 녹아있는데요. 어떻게 적용됐는지 하나씩 설명해보겠습니다.</p>



<h3>선언형 프로그래밍</h3>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="609" height="181" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-3-2.png" alt="" class="wp-image-2039" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-3-2.png 609w, https://toss.tech/wp-content/uploads/2023/03/Untitled-3-2-300x89.png 300w" sizes="(max-width: 609px) 100vw, 609px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption><a href="https://developer.mozilla.org/en-US/docs/Glossary/Element">https://developer.mozilla.org/en-US/docs/Glossary/Element</a></figcaption></figure>



<p>선언적으로 코드를 작성하는 대표적인 사례는 HTML입니다. HTML에서는 표현하고자 하는 항목을 요소(Element)로 추상화하고, 요소의 태그(Tag), 속성(Attribute), 내용(Content)을 명세해서 최종 결과물을 만듭니다.</p>



<p>같은 방식으로, tosspayments-restdocs에서는 API의 실제 형태(HTTP의 페이로드)를 있는 그대로 표현할 수 있도록 Documentation, Request Line, Request Header, Request Body, Response Body를 요소화했습니다. 이렇게 모든 문서화 항목을 요소로 만들었기 때문에 HTML을 작성하는 방식처럼 선언적으로 문서를 작성할 수 있습니다.</p>



<p>선언적인 작성에는 이런 장점이 있습니다.</p>



<ul><li><strong>명세의 내용에 집중하게 됩니다.</strong> 세부 기술 및 이를 위한 불필요한 명령 없이, 문서화 코드의 본질인 인터페이스 명세에 집중할 수 있습니다.</li><li><strong>꼭 필요한 정보만 명세할 수 있습니다.</strong> 꼭 필요한 항목만 요소의 속성으로 선언하고, 추가적인 속성들은 중괄호를 열어 표현하게 됩니다.</li><li><strong>읽기 쉬운 코드가 됩니다.</strong> 최종 결과물의 실제 형태가 그대로 녹아져 있으므로, 위에서 아래로 한번만 읽으면 결과를 파악할 수 있습니다.</li><li><strong>확장이 쉽습니다.</strong> 새로운 문서화 항목이 생기는 경우 요소를 새로 정의하면 됩니다. 기존 항목에 자식 항목이 새롭게 생기는 경우에도 마찬가지로 대응이 가능합니다.</li><li><strong>구현 방법에서 자유로워집니다.</strong> 각 요소를 어떻게, 무엇으로 렌더링 할 지를 모두 라이브러리에 위임해서 기반 기술의 변화나 결과물의 포맷 변화가 코드에 미치는 영향을 줄일 수 있습니다.</li></ul>



<h3>선언형 프로그래밍 구현 – 함수와 확장 함수</h3>



<p>tosspayments-restdocs의 문서화 코드 진입점인 <code>documentation</code> 요소 함수를 살펴보겠습니다.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="154" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-4-1-1024x154.png" alt="" class="wp-image-2042" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-1024x154.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-300x45.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-768x116.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1.png 1182w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>documentation 함수 호출 예</figcaption></figure>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="274" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-5-1024x274.png" alt="" class="wp-image-2043" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-5-1024x274.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5-300x80.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5-768x205.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5.png 1100w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>documentation 내부 구현(이해를 돕기 위해 단순화하였습니다)</figcaption></figure>



<p><code>documentation</code>은 문서의 이름(<code>documentName</code>)을 필수 속성으로, <code>requestLine</code> 등 세부 스펙 요소 추가적인 속성으로 취급하는 요소 함수로, 문서화의 시작(문서 스펙 정의)과 끝(문서 출력)을 담당합니다.</p>



<p>앞서 <strong>꼭 필요한 항목만 요소의 속성으로 선언하고, 추가적인 속성들은 중괄호를 열어 표현한다</strong>고 했는데요. 이 개념을 코틀린으로 구현하면서 필수 속성은 함수의 파라미터로, 추가 속성은 람다 함수 파라미터로 표현했습니다. 요소의 모든 속성을 파라미터로 펼쳐두면 함수가 장황해지고 확장성이 떨어지기 때문입니다.</p>



<p>추가 속성을 람다 확장 함수(<a href="https://kotlinlang.org/docs/extensions.html#extension-functions">Extension Function</a>) 스코프 내에서 정의하도록 하면 스코프 내에서 일어나는 일들에는 함수가 관여하지 않습니다. 그래서 편의성을 확보하면서 확장성을 유지할 수 있고, 스코프를 계층화하여 도메인을 더욱 잘 표현할 수 있습니다.</p>



<p>예를 들어 <code>documentation</code> 요소 함수의 람다 확장 함수(<code>specCustomizer: DocumentSpec.() -&gt; Unit</code>) 스코프에서는 <code>RequestLineSpec</code>, <code>RequestBodySpec</code>, <code>ResponseBodySpec</code> 등을 세부 요소 스펙으로 품고 있는 <code>DocumentSpec</code>의 <code>this</code>가 주어집니다. 스코프 및 스코프에 <code>this</code>를 주입하는 이런 방식에는 다음과 같은 장점이 있습니다.</p>



<ul><li><strong>스코프 단위로 특화된 기능을 제공할 수 있습니다.</strong> 예를 들어 <code>requestLine</code> 함수는 <code>DocumentSpec</code>의 세부 요소 스펙인 <code>RequestLineSpec</code>을 정의하기 위한 요소 함수입니다.</li><li><strong>구조화된 확장성을 갖습니다.</strong> 새로운 속성이 추가되었을 때 스코프 내에 함수나 프로퍼티를 추가하여 쉽게 대응할 수 있습니다. 또한 새로운 자식 요소를 갖게 되는 경우에도 동일한 방식으로 람다 확장 함수 스코프를 정의해 대응할 수 있습니다. documentation → requestBody → field 로 이어지는 nested scope 가 그 예입니다.</li></ul>



<h3>타입 추론</h3>



<p>Spring REST Docs의 문제 중 하나는 필드의 타입을 REST Docs Snippet에 다시 명세하는 비효율적인 작성 방식입니다.</p>



<p>Kotlin에서는 Inline Function 한정으로 <a href="https://kotlinlang.org/docs/inline-functions.html#reified-type-parameters">Reified Type Parameter</a>를 제공합니다. 타입 정보가 소거되는 일반적인 Generic Function의 Type Parameter와 달리, Reified Type Parameter의 경우에는 타입 정보가 소거되지 않아 라이브러리에서 접근할 수 있습니다.</p>



<p>tosspayments-restdocs에서는 항상 문서화 요소가 샘플을 받게 강제하고, 샘플의 타입과 값을 내부 자료구조에 저장하도록 했습니다.</p>



<figure class="wp-block-image"><div data-rmiz-wrap="visible"><img src="https://wp.toss.tech/wp-content/uploads/2023/03/image-6-1024x92.png" alt="sample이 reified T로 선언되어 타입 정보(T::class.java)에 접근이 가능합니다." style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>sample이 reified T로 선언되어 타입 정보(T::class.java)에 접근이 가능합니다.</figcaption></figure>



<p>타입 정보가 남아있다면 문서를 작성하는 개발자를 대신해 다양한 작업을 자동화 할 수 있습니다. tosspayments-restdocs에서는 타입 명세, 열거형 예시 작성, 포멧 명세 등에 타입 정보를 활용하고 잇습니다.</p>



<figure class="wp-block-image size-large"><div data-rmiz-wrap="visible"><img loading="lazy" width="1024" height="267" src="https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-6-1024x267.png" alt="" class="wp-image-2046" srcSet="https://toss.tech/wp-content/uploads/2023/03/Untitled-6-1024x267.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-300x78.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-768x200.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-1536x400.png 1536w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6.png 1542w" sizes="(max-width: 1024px) 100vw, 1024px" style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>타입 정보 활용 예(타입별 양식 자동생성) – 열거형은 엔트리 나열, 시간 타입은 타임 포멧을 반환</figcaption></figure>



<figure class="wp-block-image"><div data-rmiz-wrap="visible"><img src="https://wp.toss.tech/wp-content/uploads/2023/03/image-5-1024x200.png" alt="타입 정보 활용 예(생성된 문서) – 열거형 타입으로부터 얻은 정보로 ResultType의 엔트리(SUCCESS, ERROR)가 자동생성 되었습니다." style="max-width:100%;max-height:100%"/><button aria-label="Zoom image" data-rmiz-btn-open="true"></button></div><figcaption>타입 정보 활용 예(생성된 문서) – 열거형 타입으로부터 얻은 정보로 ResultType의 엔트리(SUCCESS, ERROR)가 자동생성 되었습니다.</figcaption></figure>



<h1>마치며</h1>



<p>지금까지 문서를 최소한의 코드로 작성하면서 변화에도 더 유연하게 대처할 수 있는 tosspayments-restdocs 라이브러리와, 라이브러리에 녹인 생각들을 소개했습니다.</p>



<p>tosspayments-restdocs는 토스페이먼츠의 다양한 팀에서 Spring REST Docs, kotlin-dsl-restdocs를 대신해 활용하며 생산성을 높이고 있습니다.</p>



<p>개발자가 더욱 변하지 않고 가치있는 일에 집중할 수 있도록, 토스페이먼츠에서는 생산성을 높이기 위한 다양한 활동을 이어나가고 있습니다. 함께 고민하며 더욱 좋은 문화와 기술을 만들어나가면 좋겠습니다.</p>
</div></div><style data-emotion="css auig7l">.css-auig7l{margin-top:96px;}</style><style data-emotion="css x7fajo">.css-x7fajo{margin-top:96px;}.css-x7fajo>*:not(style)~*:not(style){margin-left:24px;}</style><style data-emotion="css 6rfvv8">.css-6rfvv8{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;margin-top:96px;}.css-6rfvv8>*:not(style)~*:not(style){margin-left:24px;}</style><div class="css-6rfvv8"><style data-emotion="css 1n0u3h">.css-1n0u3h{background-color:#f9fafb;width:100%;height:auto;border-radius:12px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:48px;}@media (max-width: 700px){.css-1n0u3h{padding:32px;}}</style><div class="css-1n0u3h e1t1xt3a7"><style data-emotion="css 6cc9f0">.css-6cc9f0{font-size:24px;font-weight:700;margin-bottom:16px;color:#4e5968;}</style><h2 class="css-6cc9f0 e1t1xt3a6">재미있게 읽으셨나요?</h2><style data-emotion="css 1wmgpcn">.css-1wmgpcn{font-size:16px;line-height:1.5;font-weight:600;color:#6b7684;margin-bottom:4px;}</style><p class="css-1wmgpcn e1t1xt3a5">좋았는지, 아쉬웠는지, 아래 이모지를 눌러 의견을 들려주세요.</p><style data-emotion="css 4qu8li">.css-4qu8li{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;margin-top:16px;}</style><div class="css-4qu8li e1t1xt3a3"><style data-emotion="css 1fmr5ax">.css-1fmr5ax{display:block;font-family:'tossface';font-size:40px;cursor:pointer;margin:0 12px;-webkit-transition:0.15s ease-in-out all;transition:0.15s ease-in-out all;}.css-1fmr5ax a{-webkit-text-decoration:none;text-decoration:none;}.css-1fmr5ax:hover{-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2);}</style><div class="css-1fmr5ax e1t1xt3a1">😍</div><div class="css-1fmr5ax e1t1xt3a1">🤔</div></div><style data-emotion="css 1p3zmjw">.css-1p3zmjw{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;margin-top:16px;}.css-1p3zmjw button,.css-1p3zmjw a{margin:0 12px;}@media (max-width: 700px){.css-1p3zmjw{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:100%;}.css-1p3zmjw button,.css-1p3zmjw a{width:100%;margin:8px 0;}}</style><div class="css-1p3zmjw e1t1xt3a0"><style data-emotion="css 1u8jkqx">.css-1u8jkqx{display:grid;grid-template-columns:min-content auto;grid-column-gap:8px;}</style><button class="p-button p-button--primary p-button--inline p-button--weak p-button--default p-button--has-icon padding--base css-1u8jkqx" type="button" aria-disabled="false"><span class="icon p-icon icon--colored p-icon--colored" aria-hidden="true" role="presentation" style="height:16px;width:16px;min-width:16px;color:#3182f6"></span>아티클 공유하기</button></div></div></div></article><style data-emotion="css 1lsuzal">.css-1lsuzal{margin-top:100px;}.css-1lsuzal::before{content:'';position:absolute;width:100%;height:1px;left:0;border-bottom:1px solid #e5e8eb;}</style><div class="css-1lsuzal e132k2571"><style data-emotion="css 1ympfnp">.css-1ympfnp{display:inline-block;width:100%;font-size:20px;margin:34px 0 40px 0;}</style><span class="typography typography--h3 typography--bold color--grey800 css-1ympfnp e132k2570">이어지는 글</span><style data-emotion="css vivlm7">.css-vivlm7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;margin-bottom:40px;}.css-vivlm7:last-of-type{margin-bottom:0px;}.css-vivlm7:hover .egyklng4{color:#3182f6;}</style><div class="css-vivlm7 egyklng3"><style data-emotion="css bc0lqn">.css-bc0lqn{width:80px;height:80px;margin-right:20px;border-radius:12px;object-fit:cover;}@media (max-width: 700px){.css-bc0lqn{width:64px;height:64px;}}</style><img srcSet="https://toss.tech/wp-content/uploads/2023/03/center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/center.png 1200w" class="css-bc0lqn egyklng2"/><style data-emotion="css 1fttcpj">.css-1fttcpj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}</style><div class="css-1fttcpj egyklng1"><style data-emotion="css p4blj2">.css-p4blj2{font-size:24px;margin-bottom:4px;word-break:keep-all;line-height:1.4;overflow-wrap:break-word;-webkit-transition:color 0.3s ease;transition:color 0.3s ease;-webkit-line-clamp:2;display:block;}@media (max-width: 700px){.css-p4blj2{font-size:18px;-webkit-line-clamp:2;}}</style><span class="typography typography--h4 typography--bold color--grey800 css-p4blj2 egyklng4">ESLint와 AST로 코드 퀄리티 높이기</span><style data-emotion="css 1jxhn1e">.css-1jxhn1e{color:#8b95a1;}</style><span class="typography typography--p typography--regular color--grey700 css-1jxhn1e egyklng0">2023. 03. 31</span></div></div><div class="css-vivlm7 egyklng3"><img srcSet="https://toss.tech/wp-content/uploads/2023/03/declarative-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/declarative-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/declarative-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/declarative.png 1200w" class="css-bc0lqn egyklng2"/><div class="css-1fttcpj egyklng1"><span class="typography typography--h4 typography--bold color--grey800 css-p4blj2 egyklng4">선언적인 코드 작성하기</span><span class="typography typography--p typography--regular color--grey700 css-1jxhn1e egyklng0">2023. 03. 16</span></div></div><div class="css-vivlm7 egyklng3"><img srcSet="https://toss.tech/wp-content/uploads/2023/01/js_center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/01/js_center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/01/js_center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/01/js_center.png 1200w" class="css-bc0lqn egyklng2"/><div class="css-1fttcpj egyklng1"><span class="typography typography--h4 typography--bold color--grey800 css-p4blj2 egyklng4">똑똑하게 브라우저 Polyfill 관리하기</span><span class="typography typography--p typography--regular color--grey700 css-1jxhn1e egyklng0">2023. 01. 21</span></div></div></div></div></div><style data-emotion="css 1d2vuhc">.css-1d2vuhc{padding:60px 24px;word-break:keep-all;overflow-wrap:break-word;background:rgba(2,9,19,0.91);}@media (max-width: 700px){.css-1d2vuhc{padding-top:24px;}}</style><section class="css-1d2vuhc eqrolup4"><style data-emotion="css yf0lpd">.css-yf0lpd{display:grid;grid-template-columns:3fr 7fr;grid-column-gap:20px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:640px;margin:0 auto;content-visibility:auto;}@media (max-width: 700px){.css-yf0lpd{grid-template-rows:min-content auto;grid-template-columns:1fr;grid-row-gap:24px;}}</style><div class="css-yf0lpd eqrolup2"><style data-emotion="css 1d33yk5">.css-1d33yk5{width:100%;}@media (max-width: 700px){.css-1d33yk5{width:90px;}}</style><img src="https://static.toss.im/3d/website_code_blue_alpha.png" alt="" class="css-1d33yk5 eqrolup3"/><style data-emotion="css 1gb2pj4">.css-1gb2pj4>*:not(style)~*:not(style){margin-top:24px;}</style><style data-emotion="css 7xmgw5">.css-7xmgw5{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.css-7xmgw5>*:not(style)~*:not(style){margin-top:24px;}</style><div class="css-7xmgw5"><style data-emotion="css 1pbuvpm">.css-1pbuvpm>*:not(style)~*:not(style){margin-top:8px;}</style><style data-emotion="css nbpfuv">.css-nbpfuv{-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:start;-ms-flex-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;}.css-nbpfuv>*:not(style)~*:not(style){margin-top:8px;}</style><div class="css-nbpfuv"><style data-emotion="css 19gu4b8">.css-19gu4b8{margin:0;font-size:26px;line-height:1.4;color:#ffffff;}@media (max-width: 700px){.css-19gu4b8{font-size:20px;}}</style><h3 class="css-19gu4b8 eqrolup1">토스팀이 만드는 수많은 혁신의 순간들</h3><style data-emotion="css shfxsq">.css-shfxsq{font-size:17px;line-height:1.5;color:#e5e8eb;}@media (max-width: 700px){.css-shfxsq{font-size:16px;}}</style><div class="css-shfxsq eqrolup0">당신과 함께 만들고 싶습니다.<br/>지금, 토스팀에 합류하세요.</div></div><a class="p-button p-button--primary p-button--inline p-button--fill p-button--small padding--s" aria-disabled="false" href="https://toss.im/career/jobs?gh_src=38b73b7a3us">채용 중인 공고 보기</a></div></div></section><footer class="p-footer p-footer--light"><div class="p-footer__inner"><div class="p-footer__site-group-list"><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">토스테크</div></li><li class="p-footer__site-group-item"><a href="mailto:techblog@toss.im">의견 보내기</a></li></ul><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">토스</div></li><li class="p-footer__site-group-item"><a href="https://toss.im">홈페이지</a></li><li class="p-footer__site-group-item"><a href="https://team.toss.im">회사 소개</a></li><li class="p-footer__site-group-item"><a href="https://toss.im/career">채용</a></li></ul><ul class="p-footer__site-group"><li><div class="p-footer__site-group-title">고객센터</div></li><li class="p-footer__site-group-item"><a href="tel:1599-4905">전화: 1599-4905 (24시간 연중무휴)</a></li><li class="p-footer__site-group-item"><a href="mailto:support.toss.im">이메일: support@toss.im</a></li><li class="p-footer__site-group-item"><a href="https://goto.kakao.com/@toss">카카오톡: @toss</a></li></ul></div><address class="p-footer__address"><strong class="p-footer__address__company-name">㈜비바리퍼블리카</strong>Copyright © Viva Republica, Inc. All Rights Reserved.</address><ul class="p-footer__term-wrapper"></ul><ul class="p-footer__social-list"><li class="p-footer__social-list-item"><a aria-label="Toss Facebook" target="_blank" href="https://www.facebook.com/toss.revolution"><img src="https://static.toss.im/assets/homepage/safety/icn-facebook.svg" alt="Toss Facebook"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss blog" target="_blank" href="https://blog.toss.im"><img src="https://static.toss.im/assets/homepage/safety/icn-blog.svg" alt="Toss blog"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Naver Post" target="_blank" href="https://post.naver.com/tossblog"><img src="https://static.toss.im/assets/homepage/safety/icn-naver.svg" alt="Toss Naver Post"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Twitter" target="_blank" href="https://twitter.com/toss__official"><img src="https://static.toss.im/assets/homepage/safety/icn-twitter.svg" alt="Toss Twitter"/></a></li><li class="p-footer__social-list-item"><a aria-label="Toss Instagram" target="_blank" href="https://www.instagram.com/toss.im/"><img src="https://static.toss.im/assets/homepage/safety/icn-instagram.svg" alt="Toss Instagram"/></a></li></ul></div></footer><div id="tds-pc__portal-container"></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"title":"tosspayments-restdocs: 선언형 문서 작성 라이브러리","content":"\n\u003ch1\u003etosspayments-restdocs: 선언형 문서 작성 라이브러리\u003c/h1\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003e최소한의 코드로 문서 작성하기\u003c/strong\u003e\u003c/p\u003e\n\n\n\n\u003ch2\u003e들어가며\u003c/h2\u003e\n\n\n\n\u003cp\u003e토스페이먼츠에서는 두 가지 장점 때문에 \u003ca href=\"https://docs.spring.io/spring-restdocs/docs/current/reference/htmlsingle/\"\u003eSpring REST Docs\u003c/a\u003e를 권장하고 있는데요. 첫 번째는 문서 작성 단계부터 API를 통합 테스트할 수 있다는 점, 두 번째는 인터페이스의 의도치 않은 변경을 감지할 수 있다는 점 때문입니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e하지만 Spring REST Docs에는 단점도 있습니다. 장황한 코드 때문에 가독성이 떨어지고, 코드 반복으로 인해 생산성이 떨어지는 아쉬움이 있었습니다. 이런 문제를 해소하기 위해 Kotlin DSL을 구현해서 반복적이고 지루한 Spring REST Docs 코드 작성에 필요한 노력을 줄이는 방법을 \u003ca href=\"https://toss.tech/article/kotlin-dsl-restdocs\"\u003e한규주님의 이전 글 \u0026#8216;Kotlin으로 DSL 만들기: 반복적이고 지루한 REST Docs 벗어나기\u0026#8217;\u003c/a\u003e에서 소개했었습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e이번에는 나아가 더 높은 가독성, 더 최소화된 코드 중복, 세부 구현 및 의존성 은닉, 마지막으로 확장에 열려있는 특성을 갖춘 문서화 라이브러리\u0026nbsp;\u003cstrong\u003e\u0026#8216;tosspayments-restdocs\u0026#8217;\u003c/strong\u003e를 소개하고 개발 후기를 공유합니다.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"807\" height=\"1024\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-1-1-807x1024.png\" alt=\"\" class=\"wp-image-2033\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-807x1024.png 807w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-236x300.png 236w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-768x975.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1210x1536.png 1210w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1614x2048.png 1614w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1-1568x1990.png 1568w, https://toss.tech/wp-content/uploads/2023/03/Untitled-1-1.png 1822w\" sizes=\"(max-width: 807px) 100vw, 807px\" /\u003e\u003cfigcaption\u003e동일한 컨트롤러를 Spring REST Docs(좌측)와 tosspayments-restdocs(우측)로 문서화했을 때의 차이. 작성한 문서화 코드의 양이 크게 감소했다.\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003ch2\u003e다시 살펴보기: Spring REST Docs의 문제들\u003c/h2\u003e\n\n\n\n\u003cp\u003eSpring REST Docs 기반 문서화 코드의 아쉬운 점을 아래 코드를 통해 다시 한번 살펴볼게요.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"816\" height=\"1024\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-2-1.png\" alt=\"\" class=\"wp-image-2035\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1.png 816w, https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1-239x300.png 239w, https://toss.tech/wp-content/uploads/2023/03/Untitled-2-1-768x964.png 768w\" sizes=\"(max-width: 816px) 100vw, 816px\" /\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003cstrong\u003e요청 필드 2개, 응답 필드 3개\u003c/strong\u003e로 구성된 단순한 \u003ccode\u003ePUT\u003c/code\u003e 인터페이스지만, 장황하게 작성된 코드 때문에 전체 구조를 한눈에 파악하기 어렵습니다. 이런 구조의 코드는 처음 작성하는 비용이 많이 들 뿐만 아니라 유지보수 비용도 늘립니다. 위 코드의 문제점을 좀 더 구체적으로 살펴보겠습니다.\u003c/p\u003e\n\n\n\n\u003ch3\u003e1. \u003cstrong\u003e코드 중복\u003c/strong\u003e\u003c/h3\u003e\n\n\n\n\u003cp\u003e먼저, 같은 내용이 반복적으로 명세에 포함되어 있습니다. 예를 들어 MockMvcResponse와 REST Docs Snippet을 만들기 위해 Path Variable, 그리고 Request Body Field 코드 중복이 발생했습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e또한 Request Body값을 MockMvc에 전달하는 과정에서 샘플 데이터를 통해 필드의 타입 및 샘플이 추론 가능함에도 REST Docs Snippet에 불필요하게 다시 명세하고 있습니다.\u003c/p\u003e\n\n\n\n\u003ch3\u003e2. \u003cstrong\u003e불필요한 명령\u003c/strong\u003e\u003c/h3\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003egiven()\u003c/code\u003e,\u0026nbsp;\u003ccode\u003eprettyPrint()\u003c/code\u003e,\u0026nbsp;\u003ccode\u003ethen()\u003c/code\u003e,\u0026nbsp;\u003ccode\u003epreprocessRequest()\u003c/code\u003e,\u0026nbsp;\u003ccode\u003epreprocessResponse()\u003c/code\u003e\u0026nbsp;등의 메서드는 인터페이스 명세에 꼭 필요한 핵심이라 하기 어렵습니다. 문서 작성과 관계 없이 빌드에 필요하기 때문에 추가된 사항입니다.\u003c/p\u003e\n\n\n\n\u003ch3\u003e3. 인터페이스 명세 순서\u003c/h3\u003e\n\n\n\n\u003cp\u003e실제 HTTP 프로토콜에서는 Request Line → Request Header → Request Body → Response Line → Response Header → Response Body 순으로 페이로드가 만들어집니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e그러나 위의 예시 코드는 이러한 흐름에 맞춘 자연스러운 명세 작성 대신, MockMvc를 구성하는 기반 기술에 의존하는 명령을 나열하는데 집중하고 있습니다. 그래서 코드를 작성할 때나 읽을 때 모두 코드 블록을 왔다갔다 해야 하는 불편을 겪습니다.\u003c/p\u003e\n\n\n\n\u003ch3\u003e4. 기반 기술에 강한 의존\u003c/h3\u003e\n\n\n\n\u003cp\u003e기반 기술에 강하게 의존하고 있기 때문에 기반 기술에 브레이킹 체인지가 생기거나, 유지보수가 중단되면 대응이 어렵습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e또, 이렇게 기반 기술에 많이 의존하게 되면 문서를 작성하는 모든 개발자가 기반 기술의 세부 항목을 학습해야 합니다. 가령 MultiPart API, Streaming API, Reactive API 등 다른 형태의 API를 문서화할 때마다 개발자는 사용할 MockMvc의 세부 기능을 각각 학습해야 합니다. 이런 방식은 문서화에 필요한 학습 비용을 높이고 지속적인 대응을 어렵게 만듭니다.\u003c/p\u003e\n\n\n\n\u003ch1\u003etosspayments-restdocs로 다시 작성하기\u003c/h1\u003e\n\n\n\n\u003cp\u003e위 코드를 tosspayments-restdocs 라이브러리를 사용해서 다시 작성한 코드 예시입니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e생성될 문서를 직관적으로 예측할 수 있고, 기반 기술을 완전히 추상화해서 코드가 절반 이하로 감소했습니다.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image\"\u003e\u003cimg src=\"https://wp.toss.tech/wp-content/uploads/2023/03/image-4-1024x579.png\" alt=\"tosspayments-restdocs를 적용한 결과\"/\u003e\u003cfigcaption\u003etosspayments-restdocs를 적용한 결과\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e이런 개선점을 만든 tosspayments-restdocs 라이브러리에는 선언형 프로그래밍, 타입 추론 개념이 녹아있는데요. 어떻게 적용됐는지 하나씩 설명해보겠습니다.\u003c/p\u003e\n\n\n\n\u003ch3\u003e선언형 프로그래밍\u003c/h3\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"609\" height=\"181\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-3-2.png\" alt=\"\" class=\"wp-image-2039\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-3-2.png 609w, https://toss.tech/wp-content/uploads/2023/03/Untitled-3-2-300x89.png 300w\" sizes=\"(max-width: 609px) 100vw, 609px\" /\u003e\u003cfigcaption\u003e\u003ca href=\"https://developer.mozilla.org/en-US/docs/Glossary/Element\"\u003ehttps://developer.mozilla.org/en-US/docs/Glossary/Element\u003c/a\u003e\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e선언적으로 코드를 작성하는 대표적인 사례는 HTML입니다. HTML에서는 표현하고자 하는 항목을 요소(Element)로 추상화하고, 요소의 태그(Tag), 속성(Attribute), 내용(Content)을 명세해서 최종 결과물을 만듭니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e같은 방식으로, tosspayments-restdocs에서는 API의 실제 형태(HTTP의 페이로드)를 있는 그대로 표현할 수 있도록 Documentation, Request Line, Request Header, Request Body, Response Body를 요소화했습니다. 이렇게 모든 문서화 항목을 요소로 만들었기 때문에 HTML을 작성하는 방식처럼 선언적으로 문서를 작성할 수 있습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e선언적인 작성에는 이런 장점이 있습니다.\u003c/p\u003e\n\n\n\n\u003cul\u003e\u003cli\u003e\u003cstrong\u003e명세의 내용에 집중하게 됩니다.\u003c/strong\u003e 세부 기술 및 이를 위한 불필요한 명령 없이, 문서화 코드의 본질인 인터페이스 명세에 집중할 수 있습니다.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e꼭 필요한 정보만 명세할 수 있습니다.\u003c/strong\u003e 꼭 필요한 항목만 요소의 속성으로 선언하고, 추가적인 속성들은 중괄호를 열어 표현하게 됩니다.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e읽기 쉬운 코드가 됩니다.\u003c/strong\u003e 최종 결과물의 실제 형태가 그대로 녹아져 있으므로, 위에서 아래로 한번만 읽으면 결과를 파악할 수 있습니다.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e확장이 쉽습니다.\u003c/strong\u003e 새로운 문서화 항목이 생기는 경우 요소를 새로 정의하면 됩니다. 기존 항목에 자식 항목이 새롭게 생기는 경우에도 마찬가지로 대응이 가능합니다.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e구현 방법에서 자유로워집니다.\u003c/strong\u003e 각 요소를 어떻게, 무엇으로 렌더링 할 지를 모두 라이브러리에 위임해서 기반 기술의 변화나 결과물의 포맷 변화가 코드에 미치는 영향을 줄일 수 있습니다.\u003c/li\u003e\u003c/ul\u003e\n\n\n\n\u003ch3\u003e선언형 프로그래밍 구현 \u0026#8211; 함수와 확장 함수\u003c/h3\u003e\n\n\n\n\u003cp\u003etosspayments-restdocs의 문서화 코드 진입점인 \u003ccode\u003edocumentation\u003c/code\u003e 요소 함수를 살펴보겠습니다.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"154\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-4-1-1024x154.png\" alt=\"\" class=\"wp-image-2042\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-1024x154.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-300x45.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1-768x116.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-4-1.png 1182w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003cfigcaption\u003edocumentation 함수 호출 예\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"274\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-5-1024x274.png\" alt=\"\" class=\"wp-image-2043\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-5-1024x274.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5-300x80.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5-768x205.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-5.png 1100w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003cfigcaption\u003edocumentation 내부 구현(이해를 돕기 위해 단순화하였습니다)\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e\u003ccode\u003edocumentation\u003c/code\u003e은 문서의 이름(\u003ccode\u003edocumentName\u003c/code\u003e)을 필수 속성으로, \u003ccode\u003erequestLine\u003c/code\u003e 등 세부 스펙 요소 추가적인 속성으로 취급하는 요소 함수로, 문서화의 시작(문서 스펙 정의)과 끝(문서 출력)을 담당합니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e앞서 \u003cstrong\u003e꼭 필요한 항목만 요소의 속성으로 선언하고, 추가적인 속성들은 중괄호를 열어 표현한다\u003c/strong\u003e고 했는데요. 이 개념을 코틀린으로 구현하면서 필수 속성은 함수의 파라미터로, 추가 속성은 람다 함수 파라미터로 표현했습니다. 요소의 모든 속성을 파라미터로 펼쳐두면 함수가 장황해지고 확장성이 떨어지기 때문입니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e추가 속성을 람다 확장 함수(\u003ca href=\"https://kotlinlang.org/docs/extensions.html#extension-functions\"\u003eExtension Function\u003c/a\u003e) 스코프 내에서 정의하도록 하면 스코프 내에서 일어나는 일들에는 함수가 관여하지 않습니다. 그래서 편의성을 확보하면서 확장성을 유지할 수 있고, 스코프를 계층화하여 도메인을 더욱 잘 표현할 수 있습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e예를 들어 \u003ccode\u003edocumentation\u003c/code\u003e 요소 함수의 람다 확장 함수(\u003ccode\u003especCustomizer: DocumentSpec.() -\u0026gt; Unit\u003c/code\u003e) 스코프에서는 \u003ccode\u003eRequestLineSpec\u003c/code\u003e, \u003ccode\u003eRequestBodySpec\u003c/code\u003e, \u003ccode\u003eResponseBodySpec\u003c/code\u003e 등을 세부 요소 스펙으로 품고 있는 \u003ccode\u003eDocumentSpec\u003c/code\u003e의 \u003ccode\u003ethis\u003c/code\u003e가 주어집니다. 스코프 및 스코프에 \u003ccode\u003ethis\u003c/code\u003e를 주입하는 이런 방식에는 다음과 같은 장점이 있습니다.\u003c/p\u003e\n\n\n\n\u003cul\u003e\u003cli\u003e\u003cstrong\u003e스코프 단위로 특화된 기능을 제공할 수 있습니다.\u003c/strong\u003e 예를 들어 \u003ccode\u003erequestLine\u003c/code\u003e 함수는 \u003ccode\u003eDocumentSpec\u003c/code\u003e의 세부 요소 스펙인 \u003ccode\u003eRequestLineSpec\u003c/code\u003e을 정의하기 위한 요소 함수입니다.\u003c/li\u003e\u003cli\u003e\u003cstrong\u003e구조화된 확장성을 갖습니다.\u003c/strong\u003e 새로운 속성이 추가되었을 때 스코프 내에 함수나 프로퍼티를 추가하여 쉽게 대응할 수 있습니다. 또한 새로운 자식 요소를 갖게 되는 경우에도 동일한 방식으로 람다 확장 함수 스코프를 정의해 대응할 수 있습니다. documentation → requestBody → field 로 이어지는 nested scope 가 그 예입니다.\u003c/li\u003e\u003c/ul\u003e\n\n\n\n\u003ch3\u003e타입 추론\u003c/h3\u003e\n\n\n\n\u003cp\u003eSpring REST Docs의 문제 중 하나는 필드의 타입을 REST Docs Snippet에 다시 명세하는 비효율적인 작성 방식입니다.\u003c/p\u003e\n\n\n\n\u003cp\u003eKotlin에서는 Inline Function 한정으로\u0026nbsp;\u003ca href=\"https://kotlinlang.org/docs/inline-functions.html#reified-type-parameters\"\u003eReified Type Parameter\u003c/a\u003e를 제공합니다. 타입 정보가 소거되는 일반적인 Generic Function의 Type Parameter와 달리, Reified Type Parameter의 경우에는 타입 정보가 소거되지 않아 라이브러리에서 접근할 수 있습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003etosspayments-restdocs에서는 항상 문서화 요소가 샘플을 받게 강제하고, 샘플의 타입과 값을 내부 자료구조에 저장하도록 했습니다.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image\"\u003e\u003cimg src=\"https://wp.toss.tech/wp-content/uploads/2023/03/image-6-1024x92.png\" alt=\"sample이 reified T로 선언되어 타입 정보(T::class.java)에 접근이 가능합니다.\"/\u003e\u003cfigcaption\u003esample이 reified T로 선언되어 타입 정보(T::class.java)에 접근이 가능합니다.\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cp\u003e타입 정보가 남아있다면 문서를 작성하는 개발자를 대신해 다양한 작업을 자동화 할 수 있습니다. tosspayments-restdocs에서는 타입 명세, 열거형 예시 작성, 포멧 명세 등에 타입 정보를 활용하고 잇습니다.\u003c/p\u003e\n\n\n\n\u003cfigure class=\"wp-block-image size-large\"\u003e\u003cimg loading=\"lazy\" width=\"1024\" height=\"267\" src=\"https://wp.toss.tech/wp-content/uploads/2023/03/Untitled-6-1024x267.png\" alt=\"\" class=\"wp-image-2046\" srcset=\"https://toss.tech/wp-content/uploads/2023/03/Untitled-6-1024x267.png 1024w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-300x78.png 300w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-768x200.png 768w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6-1536x400.png 1536w, https://toss.tech/wp-content/uploads/2023/03/Untitled-6.png 1542w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" /\u003e\u003cfigcaption\u003e타입 정보 활용 예(타입별 양식 자동생성) – 열거형은 엔트리 나열, 시간 타입은 타임 포멧을 반환\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003cfigure class=\"wp-block-image\"\u003e\u003cimg src=\"https://wp.toss.tech/wp-content/uploads/2023/03/image-5-1024x200.png\" alt=\"타입 정보 활용 예(생성된 문서) – 열거형 타입으로부터 얻은 정보로 ResultType의 엔트리(SUCCESS, ERROR)가 자동생성 되었습니다.\"/\u003e\u003cfigcaption\u003e타입 정보 활용 예(생성된 문서) – 열거형 타입으로부터 얻은 정보로 ResultType의 엔트리(SUCCESS, ERROR)가 자동생성 되었습니다.\u003c/figcaption\u003e\u003c/figure\u003e\n\n\n\n\u003ch1\u003e마치며\u003c/h1\u003e\n\n\n\n\u003cp\u003e지금까지 문서를 최소한의 코드로 작성하면서 변화에도 더 유연하게 대처할 수 있는 tosspayments-restdocs 라이브러리와, 라이브러리에 녹인 생각들을 소개했습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003etosspayments-restdocs는 토스페이먼츠의 다양한 팀에서 Spring REST Docs, kotlin-dsl-restdocs를 대신해 활용하며 생산성을 높이고 있습니다.\u003c/p\u003e\n\n\n\n\u003cp\u003e개발자가 더욱 변하지 않고 가치있는 일에 집중할 수 있도록, 토스페이먼츠에서는 생산성을 높이기 위한 다양한 활동을 이어나가고 있습니다. 함께 고민하며 더욱 좋은 문화와 기술을 만들어나가면 좋겠습니다.\u003c/p\u003e\n","date":"2023-03-22T14:29:51","excerpt":"\u003cp\u003eREST Docs 를 최소한의 코드로 작성하면서 변화에도 더 유연하게 대처할 수 있는 tosspayments-restdocs 라이브러리와, 라이브러리에 녹인 기술들을 소개합니다.\u003c/p\u003e\n","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/00017-3291509353.png 1200w"}},"metadata":{"ogBackground":null,"ogImageTitle":null,"ogGenerateImage":null,"recruitTitle":"재미있게 읽으셨나요?","recruitUrl":null,"form1Url":"https://8cv5m2yf13x.typeform.com/tossengineering#no=1761\u0026title=선언형_문서_작성_라이브러리\u0026reaction=good","form2Url":"https://8cv5m2yf13x.typeform.com/tossengineering#no=1761\u0026title=선언형_문서_작성_라이브러리\u0026reaction=bad","formDescription":"좋았는지, 아쉬웠는지, 아래 이모지를 눌러 의견을 들려주세요.","form1Label":"😍","form2Label":"🤔","recruitDescription":null},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}}]},"author":{"node":{"id":"dXNlcjoxNw==","firstName":"준희","lastName":"이","description":"토스페이먼츠 토스비즈니스 트라이브에서 바로신청, 사업용 안심번호 등 사업자들의 시작을 돕는 서비스를 개발하고 있습니다. 단순하고 안전한 소프트웨어 개발에 관심이 많습니다.","avatar":{"url":"https://toss.tech/wp-content/uploads/2022/09/Profile-2022-312x312.png"},"role":{"role":"Server Developer"}}}},"relatedArticles":[{"title":"ESLint와 AST로 코드 퀄리티 높이기","slug":"improving-code-quality-via-eslint-and-ast","date":"2023-03-31T15:47:53","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/03/center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/center.png 1200w"}},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}}]}},{"title":"선언적인 코드 작성하기","slug":"frontend-declarative-code","date":"2023-03-16T21:41:13","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/03/declarative-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/03/declarative-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/03/declarative-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/03/declarative.png 1200w"}},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}}]}},{"title":"똑똑하게 브라우저 Polyfill 관리하기","slug":"smart-polyfills","date":"2023-01-21T12:52:16","featuredImage":{"node":{"srcSet":"https://toss.tech/wp-content/uploads/2023/01/js_center-300x150.png 300w, https://toss.tech/wp-content/uploads/2023/01/js_center-1024x512.png 1024w, https://toss.tech/wp-content/uploads/2023/01/js_center-768x384.png 768w, https://toss.tech/wp-content/uploads/2023/01/js_center.png 1200w"}},"categories":{"edges":[{"node":{"id":"dGVybToy","name":"tech"}},{"node":{"id":"dGVybTox","name":"Uncategorized"}}]}}]},"__N_SSP":true},"page":"/article/[slug]","query":{"slug":"tosspayments-restdocs"},"buildId":"QqBxegmptuUDYc8oCREsD","assetPrefix":"https://static.toss.im/frontend/toss-tech","runtimeConfig":{"ENV":"live","NODE_ENV":"production","PORT":"3000","ASSET_PREFIX":"https://static.toss.im/frontend/toss-tech","SERVICE":"toss-tech","SENTRY":{"DSN":"https://5eff657ed6ef486fb8af2dc5f9508abd@sentry.io/1242586","PUBLIC_KEY":"5eff657ed6ef486fb8af2dc5f9508abd","RELEASE":"toss-tech_1.0.103","SERVICE":"toss-tech","SERVICE_VERSION":"1.0.103"},"RENDER_TYPE":"ssr"},"isFallback":false,"gssp":true,"customServer":true,"scriptLoader":[]}</script></body></html>